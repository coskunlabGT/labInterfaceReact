{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Property, Event, EventHandler, L10n, compile, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, detach, append, Animation } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, KeyboardEvents, setValue, getValue, ChildProperty } from '@syncfusion/ej2-base';\nimport { Collection, Complex, Browser, Ajax, getUniqueID, closest } from '@syncfusion/ej2-base';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { updateBlazorTemplate, resetBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nvar ROOT = 'e-uploader';\nvar CONTROL_WRAPPER = 'e-upload e-control-wrapper';\nvar INPUT_WRAPPER = 'e-file-select';\nvar DROP_AREA = 'e-file-drop';\nvar DROP_WRAPPER = 'e-file-select-wrap';\nvar LIST_PARENT = 'e-upload-files';\nvar FILE = 'e-upload-file-list';\nvar STATUS = 'e-file-status';\nvar ACTION_BUTTONS = 'e-upload-actions';\nvar UPLOAD_BUTTONS = 'e-file-upload-btn e-css e-btn e-flat e-primary';\nvar CLEAR_BUTTONS = 'e-file-clear-btn e-css e-btn e-flat';\nvar FILE_NAME = 'e-file-name';\nvar FILE_TYPE = 'e-file-type';\nvar FILE_SIZE = 'e-file-size';\nvar REMOVE_ICON = 'e-file-remove-btn';\nvar DELETE_ICON = 'e-file-delete-btn';\nvar SPINNER_PANE = 'e-spinner-pane';\nvar ABORT_ICON = 'e-file-abort-btn';\nvar RETRY_ICON = 'e-file-reload-btn';\nvar DRAG_HOVER = 'e-upload-drag-hover';\nvar PROGRESS_WRAPPER = 'e-upload-progress-wrap';\nvar PROGRESSBAR = 'e-upload-progress-bar';\nvar PROGRESSBAR_TEXT = 'e-progress-bar-text';\nvar UPLOAD_INPROGRESS = 'e-upload-progress';\nvar UPLOAD_SUCCESS = 'e-upload-success';\nvar UPLOAD_FAILED = 'e-upload-fails';\nvar TEXT_CONTAINER = 'e-file-container';\nvar VALIDATION_FAILS = 'e-validation-fails';\nvar RTL = 'e-rtl';\nvar DISABLED = 'e-disabled';\nvar RTL_CONTAINER = 'e-rtl-container';\nvar ICON_FOCUSED = 'e-clear-icon-focus';\nvar PROGRESS_INNER_WRAPPER = 'e-progress-inner-wrap';\nvar PAUSE_UPLOAD = 'e-file-pause-btn';\nvar RESUME_UPLOAD = 'e-file-play-btn';\nvar RESTRICT_RETRY = 'e-restrict-retry';\nvar wrapperAttr = ['title', 'style', 'class'];\nvar FORM_UPLOAD = 'e-form-upload';\nvar HIDDEN_INPUT = 'e-hidden-file-input';\nvar INVALID_FILE = 'e-file-invalid';\nvar INFORMATION = 'e-file-information';\n\nvar FilesProp =\n/** @class */\nfunction (_super) {\n  __extends(FilesProp, _super);\n\n  function FilesProp() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], FilesProp.prototype, \"name\", void 0);\n\n  __decorate([Property(null)], FilesProp.prototype, \"size\", void 0);\n\n  __decorate([Property('')], FilesProp.prototype, \"type\", void 0);\n\n  return FilesProp;\n}(ChildProperty);\n\nexport { FilesProp };\n\nvar ButtonsProps =\n/** @class */\nfunction (_super) {\n  __extends(ButtonsProps, _super);\n\n  function ButtonsProps() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('Browse...')], ButtonsProps.prototype, \"browse\", void 0);\n\n  __decorate([Property('Upload')], ButtonsProps.prototype, \"upload\", void 0);\n\n  __decorate([Property('Clear')], ButtonsProps.prototype, \"clear\", void 0);\n\n  return ButtonsProps;\n}(ChildProperty);\n\nexport { ButtonsProps };\n\nvar AsyncSettings =\n/** @class */\nfunction (_super) {\n  __extends(AsyncSettings, _super);\n\n  function AsyncSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], AsyncSettings.prototype, \"saveUrl\", void 0);\n\n  __decorate([Property('')], AsyncSettings.prototype, \"removeUrl\", void 0);\n\n  __decorate([Property(0)], AsyncSettings.prototype, \"chunkSize\", void 0);\n\n  __decorate([Property(3)], AsyncSettings.prototype, \"retryCount\", void 0);\n\n  __decorate([Property(500)], AsyncSettings.prototype, \"retryAfterDelay\", void 0);\n\n  return AsyncSettings;\n}(ChildProperty);\n\nexport { AsyncSettings };\n/**\n * The uploader component allows to upload images, documents, and other files from local to server.\n * ```html\n * <input type='file' name='images[]' id='upload'/>\n * ```\n * ```typescript\n * <script>\n *   var uploadObj = new Uploader();\n *   uploadObj.appendTo('#upload');\n * </script>\n * ```\n */\n\nvar Uploader =\n/** @class */\nfunction (_super) {\n  __extends(Uploader, _super);\n  /**\n   * Triggers when change the Uploader value.\n   */\n\n\n  function Uploader(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.initialAttr = {\n      accept: null,\n      multiple: false,\n      disabled: false\n    };\n    _this.uploadedFilesData = [];\n    _this.base64String = [];\n    _this.isForm = false;\n    _this.allTypes = false;\n    _this.pausedData = [];\n    _this.uploadMetaData = [];\n    _this.tabIndex = '0';\n    _this.btnTabIndex = '0';\n    _this.disableKeyboardNavigation = false;\n    _this.count = -1;\n    _this.actionCompleteCount = 0;\n    _this.flag = true;\n    _this.selectedFiles = [];\n    _this.uploaderName = 'UploadFiles';\n    _this.fileStreams = [];\n    _this.newFileRef = 0;\n    /**\n     * Get the file item(li) which are shown in file list.\n     * @private\n     */\n\n    _this.fileList = [];\n    /**\n     * Get the data of files which are shown in file list.\n     * @private\n     */\n\n    _this.filesData = [];\n    _this.uploaderOptions = options;\n    return _this;\n  }\n  /**\n   * Calls internally if any of the property value is changed.\n   * @private\n   */\n\n\n  Uploader.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'allowedExtensions':\n          this.setExtensions(this.allowedExtensions);\n          this.clearAll();\n          break;\n\n        case 'enabled':\n          this.setControlStatus();\n          break;\n\n        case 'multiple':\n          this.setMultipleSelection();\n          break;\n\n        case 'enableRtl':\n          this.setRTL();\n          this.reRenderFileList();\n          break;\n\n        case 'buttons':\n          this.buttons.browse = isNullOrUndefined(this.buttons.browse) ? '' : this.buttons.browse;\n          this.buttons.clear = isNullOrUndefined(this.buttons.clear) ? '' : this.buttons.clear;\n          this.buttons.upload = isNullOrUndefined(this.buttons.upload) ? '' : this.buttons.upload;\n          this.renderButtonTemplates();\n          break;\n\n        case 'dropArea':\n          this.unBindDropEvents();\n          this.setDropArea();\n          break;\n\n        case 'htmlAttributes':\n          this.updateHTMLAttrToElement();\n          this.updateHTMLAttrToWrapper();\n          this.checkHTMLAttributes(true);\n          break;\n\n        case 'files':\n          this.renderPreLoadFiles();\n          break;\n\n        case 'directoryUpload':\n          this.updateDirectoryAttributes();\n          break;\n\n        case 'template':\n          if (!this.isServerBlazor) {\n            this.clearAll();\n          }\n\n          break;\n\n        case 'minFileSize':\n        case 'maxFileSize':\n        case 'autoUpload':\n          this.clearAll();\n          break;\n\n        case 'sequentialUpload':\n          this.clearAll();\n          break;\n\n        case 'locale':\n          this.l10n.setLocale(this.locale);\n          this.setLocalizedTexts();\n          this.preLocaleObj = getValue('currentLocale', this.l10n);\n          break;\n\n        case 'cssClass':\n          this.setCSSClass(oldProp.cssClass);\n          break;\n      }\n    }\n  };\n\n  Uploader.prototype.setLocalizedTexts = function () {\n    if (isNullOrUndefined(this.template)) {\n      if (typeof this.buttons.browse === 'string') {\n        this.browseButton.innerText = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n        this.browseButton.setAttribute('title', this.browseButton.innerText);\n\n        if (this.uploadWrapper) {\n          this.uploadWrapper.querySelector('.' + DROP_AREA).innerHTML = this.localizedTexts('dropFilesHint');\n        }\n      }\n\n      this.updateFileList();\n    }\n  };\n\n  Uploader.prototype.getKeyValue = function (val) {\n    var keyValue;\n\n    for (var _i = 0, _a = Object.keys(this.preLocaleObj); _i < _a.length; _i++) {\n      var key = _a[_i];\n\n      if (this.preLocaleObj[key] === val) {\n        keyValue = key;\n      }\n    }\n\n    return keyValue;\n  };\n\n  Uploader.prototype.updateFileList = function () {\n    var element;\n    /* istanbul ignore next */\n\n    if (this.fileList.length > 0 && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + LIST_PARENT))) {\n      for (var i = 0; i < this.fileList.length; i++) {\n        element = this.fileList[i].querySelector('.e-file-status');\n        element.innerHTML = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n        this.filesData[i].status = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n\n        if (this.fileList[i].classList.contains(UPLOAD_SUCCESS)) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('delete'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-play-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('resume'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-remove-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('remove'));\n        }\n\n        if (this.fileList[i].querySelector('.e-file-reload-btn')) {\n          this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('retry'));\n        }\n\n        if (!this.autoUpload) {\n          this.uploadButton.innerText = this.buttons.upload === 'Upload' ? this.localizedTexts('Upload') : this.buttons.upload;\n          this.uploadButton.setAttribute('title', this.localizedTexts('Upload'));\n          this.clearButton.innerText = this.buttons.clear === 'Clear' ? this.localizedTexts('Clear') : this.buttons.clear;\n          this.clearButton.setAttribute('title', this.localizedTexts('Clear'));\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.reRenderFileList = function () {\n    if (this.listParent) {\n      detach(this.listParent);\n      this.listParent = null;\n      this.fileList = [];\n      this.createFileList(this.filesData);\n\n      if (this.actionButtons) {\n        this.removeActionButtons();\n        this.renderActionButtons();\n        this.checkActionButtonStatus();\n      }\n    }\n  };\n\n  Uploader.prototype.preRender = function () {\n    this.localeText = {\n      Browse: 'Browse...',\n      Clear: 'Clear',\n      Upload: 'Upload',\n      dropFilesHint: 'Or drop files here',\n      invalidMaxFileSize: 'File size is too large',\n      invalidMinFileSize: 'File size is too small',\n      invalidFileType: 'File type is not allowed',\n      uploadFailedMessage: 'File failed to upload',\n      uploadSuccessMessage: 'File uploaded successfully',\n      removedSuccessMessage: 'File removed successfully',\n      removedFailedMessage: 'Unable to remove file',\n      inProgress: 'Uploading',\n      readyToUploadMessage: 'Ready to upload',\n      abort: 'Abort',\n      remove: 'Remove',\n      cancel: 'Cancel',\n      delete: 'Delete file',\n      pauseUpload: 'File upload paused',\n      pause: 'Pause',\n      resume: 'Resume',\n      retry: 'Retry',\n      fileUploadCancel: 'File upload canceled',\n      invalidFileSelection: 'Invalid files selected',\n      totalFiles: 'Total files',\n      size: 'Size'\n    };\n    this.l10n = new L10n('uploader', this.localeText, this.locale);\n    this.preLocaleObj = getValue('currentLocale', this.l10n);\n    this.isServerBlazor = isBlazor() && this.isServerRendered ? true : false;\n    this.isBlazorTemplate = this.isServerBlazor && this.template !== '' && !isNullOrUndefined(this.template) ? true : false;\n    this.isBlazorSaveUrl = this.isServerRendered && (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl)) ? true : false;\n\n    if (this.isBlazorSaveUrl && this.sequentialUpload) {\n      this.sequentialUpload = false;\n    }\n\n    this.formRendered();\n\n    if (!this.isServerBlazor) {\n      this.updateHTMLAttrToElement();\n      this.checkHTMLAttributes(false); // tslint:disable-next-line\n\n      var ejInstance = getValue('ej2_instances', this.element);\n      /* istanbul ignore next */\n\n      if (this.element.tagName === 'EJS-UPLOADER') {\n        var inputElement = this.createElement('input', {\n          attrs: {\n            type: 'file'\n          }\n        });\n        var index = 0;\n\n        for (index; index < this.element.attributes.length; index++) {\n          inputElement.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n          inputElement.innerHTML = this.element.innerHTML;\n        }\n\n        if (!inputElement.hasAttribute('name')) {\n          inputElement.setAttribute('name', 'UploadFiles');\n        }\n\n        this.element.appendChild(inputElement);\n        this.element = inputElement;\n        setValue('ej2_instances', ejInstance, this.element);\n      }\n      /* istanbul ignore next */\n\n\n      if (ejInstance[0].isPureReactComponent) {\n        if (!isNullOrUndefined(ejInstance[0].props.name)) {\n          this.element.setAttribute('name', ejInstance[0].props.name);\n        } else if (!isNullOrUndefined(ejInstance[0].props.id) && isNullOrUndefined(ejInstance[0].props.name)) {\n          this.element.setAttribute('name', ejInstance[0].props.id);\n        } else {\n          this.element.setAttribute('name', 'UploadFiles');\n        }\n      }\n\n      if (isNullOrUndefined(this.element.getAttribute('name'))) {\n        this.element.setAttribute('name', this.element.getAttribute('id'));\n      }\n\n      if (!this.element.hasAttribute('type')) {\n        this.element.setAttribute('type', 'file');\n      }\n\n      this.updateDirectoryAttributes();\n    }\n\n    this.keyConfigs = {\n      enter: 'enter'\n    };\n\n    if (this.element.hasAttribute('tabindex')) {\n      this.tabIndex = this.element.getAttribute('tabindex');\n    }\n\n    this.browserName = Browser.info.name;\n    this.uploaderName = this.element.getAttribute('name');\n  };\n\n  Uploader.prototype.formRendered = function () {\n    var parentEle = closest(this.element, 'form');\n\n    if (!isNullOrUndefined(parentEle)) {\n      for (; parentEle && parentEle !== document.documentElement; parentEle = parentEle.parentElement) {\n        if (parentEle.tagName === 'FORM') {\n          this.isForm = true;\n          this.formElement = parentEle;\n          parentEle.setAttribute('enctype', 'multipart/form-data');\n          parentEle.setAttribute('encoding', 'multipart/form-data');\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.getPersistData = function () {\n    return this.addOnPersist(['filesData']);\n  };\n  /**\n   * Return the module name of the component.\n   */\n\n\n  Uploader.prototype.getModuleName = function () {\n    return 'uploader';\n  };\n\n  Uploader.prototype.updateDirectoryAttributes = function () {\n    if (this.directoryUpload) {\n      this.element.setAttribute('directory', 'true');\n      this.element.setAttribute('webkitdirectory', 'true');\n    } else {\n      this.element.removeAttribute('directory');\n      this.element.removeAttribute('webkitdirectory');\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   * @private\n   */\n\n\n  Uploader.prototype.render = function () {\n    if (!this.isServerBlazor) {\n      this.renderBrowseButton();\n      this.initializeUpload();\n      this.updateHTMLAttrToWrapper();\n      this.wireEvents();\n      this.setMultipleSelection();\n      this.setExtensions(this.allowedExtensions);\n      this.setRTL();\n      this.renderPreLoadFiles();\n      this.setControlStatus();\n      this.setCSSClass();\n    } else {\n      this.dropAreaWrapper = closest(this.element, '.' + DROP_WRAPPER);\n      this.uploadWrapper = closest(this.element, '.e-upload.e-control-wrapper');\n      this.browseButton = this.dropAreaWrapper.querySelector('button.e-upload-browse-btn');\n      this.setDropArea();\n      this.renderPreLoadFiles();\n      this.wireEvents();\n    }\n\n    this.renderComplete();\n  };\n\n  Uploader.prototype.renderBrowseButton = function () {\n    this.browseButton = this.createElement('button', {\n      className: 'e-css e-btn',\n      attrs: {\n        'type': 'button'\n      }\n    });\n    this.browseButton.setAttribute('tabindex', this.tabIndex);\n\n    if (typeof this.buttons.browse === 'string') {\n      this.browseButton.textContent = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n      this.browseButton.setAttribute('title', this.browseButton.innerText);\n    } else {\n      this.browseButton.appendChild(this.buttons.browse);\n    }\n\n    this.element.setAttribute('aria-label', 'Uploader');\n  };\n\n  Uploader.prototype.renderActionButtons = function () {\n    this.element.setAttribute('tabindex', '-1');\n\n    if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n      this.actionButtons = this.createElement('div', {\n        className: ACTION_BUTTONS\n      });\n      this.uploadButton = this.createElement('button', {\n        className: UPLOAD_BUTTONS,\n        attrs: {\n          'type': 'button',\n          'tabindex': this.btnTabIndex\n        }\n      });\n      this.clearButton = this.createElement('button', {\n        className: CLEAR_BUTTONS,\n        attrs: {\n          'type': 'button',\n          'tabindex': this.btnTabIndex\n        }\n      });\n      this.actionButtons.appendChild(this.clearButton);\n      this.actionButtons.appendChild(this.uploadButton);\n      this.renderButtonTemplates();\n      this.uploadWrapper.appendChild(this.actionButtons);\n      this.browseButton.blur();\n      this.uploadButton.focus();\n      this.wireActionButtonEvents();\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverActionButtonsEventBind = function (element) {\n    if (element && !this.isForm) {\n      this.browseButton.blur();\n      this.actionButtons = element;\n      this.uploadButton = this.actionButtons.querySelector('.e-file-upload-btn');\n      this.clearButton = this.actionButtons.querySelector('.e-file-clear-btn');\n      this.uploadButton.focus();\n      this.unwireActionButtonEvents();\n      this.wireActionButtonEvents();\n      this.checkActionButtonStatus();\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverUlElement = function (element) {\n    if (element) {\n      if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n        this.listParent = element;\n        this.fileList = [].slice.call(this.listParent.querySelectorAll('li'));\n        this.serverRemoveIconBindEvent();\n\n        if (!this.isForm) {\n          this.checkAutoUpload(this.filesData);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.wireActionButtonEvents = function () {\n    EventHandler.add(this.uploadButton, 'click', this.uploadButtonClick, this);\n    EventHandler.add(this.clearButton, 'click', this.clearButtonClick, this);\n  };\n\n  Uploader.prototype.unwireActionButtonEvents = function () {\n    EventHandler.remove(this.uploadButton, 'click', this.uploadButtonClick);\n    EventHandler.remove(this.clearButton, 'click', this.clearButtonClick);\n  };\n\n  Uploader.prototype.removeActionButtons = function () {\n    if (this.actionButtons) {\n      this.unwireActionButtonEvents();\n\n      if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n        detach(this.actionButtons);\n      }\n\n      this.actionButtons = null;\n    }\n  };\n\n  Uploader.prototype.renderButtonTemplates = function () {\n    if (typeof this.buttons.browse === 'string') {\n      this.browseButton.textContent = this.buttons.browse === 'Browse...' ? this.localizedTexts('Browse') : this.buttons.browse;\n      this.browseButton.setAttribute('title', this.browseButton.textContent);\n    } else {\n      this.browseButton.innerHTML = '';\n      this.browseButton.appendChild(this.buttons.browse);\n    }\n\n    if (this.uploadButton) {\n      var uploadText = void 0;\n      uploadText = isNullOrUndefined(this.buttons.upload) ? 'Upload' : this.buttons.upload;\n      this.buttons.upload = uploadText;\n\n      if (typeof this.buttons.upload === 'string') {\n        this.uploadButton.textContent = this.buttons.upload === 'Upload' ? this.localizedTexts('Upload') : this.buttons.upload;\n        this.uploadButton.setAttribute('title', this.uploadButton.textContent);\n      } else {\n        this.uploadButton.innerHTML = '';\n        this.uploadButton.appendChild(this.buttons.upload);\n      }\n    }\n\n    if (this.clearButton) {\n      var clearText = void 0;\n      clearText = isNullOrUndefined(this.buttons.clear) ? 'Clear' : this.buttons.clear;\n      this.buttons.clear = clearText;\n\n      if (typeof this.buttons.clear === 'string') {\n        this.clearButton.textContent = this.buttons.clear === 'Clear' ? this.localizedTexts('Clear') : this.buttons.clear;\n        this.clearButton.setAttribute('title', this.clearButton.textContent);\n      } else {\n        this.clearButton.innerHTML = '';\n        this.clearButton.appendChild(this.buttons.clear);\n      }\n    }\n  };\n\n  Uploader.prototype.initializeUpload = function () {\n    this.element.setAttribute('tabindex', '-1');\n    var inputWrapper = this.createElement('span', {\n      className: INPUT_WRAPPER\n    });\n    this.element.parentElement.insertBefore(inputWrapper, this.element);\n    this.dropAreaWrapper = this.createElement('div', {\n      className: DROP_WRAPPER\n    });\n    this.element.parentElement.insertBefore(this.dropAreaWrapper, this.element);\n    inputWrapper.appendChild(this.element);\n    this.dropAreaWrapper.appendChild(this.browseButton);\n    this.dropAreaWrapper.appendChild(inputWrapper);\n    var fileDropArea = this.createElement('span', {\n      className: DROP_AREA\n    });\n    fileDropArea.innerHTML = this.localizedTexts('dropFilesHint');\n    this.dropAreaWrapper.appendChild(fileDropArea);\n    this.uploadWrapper = this.createElement('div', {\n      className: CONTROL_WRAPPER\n    });\n    this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper, this.dropAreaWrapper);\n    this.uploadWrapper.appendChild(this.dropAreaWrapper);\n    this.setDropArea();\n  };\n\n  Uploader.prototype.renderPreLoadFiles = function () {\n    if (this.files.length) {\n      if (this.enablePersistence && this.filesData.length) {\n        this.createFileList(this.filesData);\n        return;\n      }\n\n      if (isNullOrUndefined(this.files[0].size)) {\n        return;\n      }\n\n      var files = [].slice.call(this.files);\n      var filesData = [];\n\n      if (!this.multiple) {\n        this.clearData();\n        files = [files[0]];\n      }\n\n      for (var _i = 0, files_1 = files; _i < files_1.length; _i++) {\n        var data = files_1[_i];\n        var fileData = {\n          name: data.name + '.' + data.type.split('.')[data.type.split('.').length - 1],\n          rawFile: '',\n          size: data.size,\n          status: this.localizedTexts('uploadSuccessMessage'),\n          type: data.type,\n          validationMessages: {\n            minSize: '',\n            maxSize: ''\n          },\n          statusCode: '2'\n        };\n        filesData.push(fileData);\n        this.filesData.push(fileData);\n      }\n\n      this.createFileList(filesData);\n\n      if (!this.autoUpload && this.listParent && !this.actionButtons && (!this.isForm || this.allowUpload()) && this.showFileList) {\n        this.renderActionButtons();\n      }\n\n      this.checkActionButtonStatus();\n    }\n  };\n\n  Uploader.prototype.checkActionButtonStatus = function () {\n    if (this.actionButtons) {\n      var length_1 = this.uploadWrapper.querySelectorAll('.' + VALIDATION_FAILS).length + this.uploadWrapper.querySelectorAll('.e-upload-fails:not(.e-upload-progress)').length + this.uploadWrapper.querySelectorAll('span.' + UPLOAD_SUCCESS).length + this.uploadWrapper.querySelectorAll('span.' + UPLOAD_INPROGRESS).length;\n\n      if (length_1 > 0 && length_1 === this.uploadWrapper.querySelectorAll('li').length) {\n        this.uploadButton.setAttribute('disabled', 'disabled');\n      } else {\n        this.uploadButton.removeAttribute('disabled');\n      }\n    }\n  };\n\n  Uploader.prototype.setDropArea = function () {\n    var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n\n    if (this.dropArea) {\n      this.dropZoneElement = typeof this.dropArea !== 'string' ? this.dropArea : document.querySelector(this.dropArea);\n      var element = this.element;\n      var enableDropText = false;\n\n      while (element.parentNode) {\n        element = element.parentNode;\n\n        if (element === this.dropZoneElement) {\n          enableDropText = true;\n          dropTextArea.textContent = this.localizedTexts('dropFilesHint');\n        }\n      }\n\n      if (!enableDropText) {\n        dropTextArea.textContent = '';\n      }\n    } else {\n      this.dropZoneElement = this.uploadWrapper;\n      dropTextArea.textContent = this.localizedTexts('dropFilesHint');\n    }\n\n    this.bindDropEvents();\n  };\n\n  Uploader.prototype.updateHTMLAttrToElement = function () {\n    if (!isNullOrUndefined(this.htmlAttributes)) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var pro = _a[_i];\n\n        if (wrapperAttr.indexOf(pro) < 0) {\n          this.element.setAttribute(pro, this.htmlAttributes[pro]);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.updateHTMLAttrToWrapper = function () {\n    if (!isNullOrUndefined(this.htmlAttributes)) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var pro = _a[_i];\n\n        if (wrapperAttr.indexOf(pro) > -1) {\n          if (pro === 'class') {\n            var updatedClassValues = this.htmlAttributes[pro].replace(/\\s+/g, ' ').trim();\n\n            if (updatedClassValues !== '') {\n              addClass([this.uploadWrapper], updatedClassValues.split(' '));\n            }\n          } else if (pro === 'style') {\n            var uploadStyle = this.uploadWrapper.getAttribute(pro);\n            uploadStyle = !isNullOrUndefined(uploadStyle) ? uploadStyle + this.htmlAttributes[pro] : this.htmlAttributes[pro];\n            this.uploadWrapper.setAttribute(pro, uploadStyle);\n          } else {\n            this.uploadWrapper.setAttribute(pro, this.htmlAttributes[pro]);\n          }\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.setMultipleSelection = function () {\n    if (this.multiple && !this.element.hasAttribute('multiple')) {\n      var newAttr = document.createAttribute('multiple');\n      newAttr.value = 'multiple';\n      this.element.setAttributeNode(newAttr);\n    } else if (!this.multiple) {\n      this.element.removeAttribute('multiple');\n    }\n  };\n\n  Uploader.prototype.checkAutoUpload = function (fileData) {\n    if (this.autoUpload) {\n      if (this.sequentialUpload) {\n        /* istanbul ignore next */\n        this.sequenceUpload(fileData);\n      } else {\n        this.upload(fileData);\n      }\n\n      this.removeActionButtons();\n    } else if (!this.actionButtons) {\n      this.renderActionButtons();\n    }\n\n    this.checkActionButtonStatus();\n  };\n\n  Uploader.prototype.sequenceUpload = function (fileData) {\n    if (this.filesData.length - fileData.length === 0 || this.filesData[this.filesData.length - fileData.length - 1].statusCode !== '1') {\n      ++this.count;\n      var isFileListCreated = this.showFileList ? false : true;\n\n      if (typeof this.filesData[this.count] === 'object') {\n        this.upload(this.filesData[this.count], isFileListCreated);\n\n        if (this.filesData[this.count].statusCode === '0') {\n          this.sequenceUpload(fileData);\n        }\n      } else {\n        --this.count;\n      }\n    }\n  };\n\n  Uploader.prototype.setCSSClass = function (oldCSSClass) {\n    var updatedCssClassValue = this.cssClass;\n\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValue = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(this.cssClass) && updatedCssClassValue !== '') {\n      addClass([this.uploadWrapper], updatedCssClassValue.split(updatedCssClassValue.indexOf(',') > -1 ? ',' : ' '));\n    }\n\n    var updatedOldCssClass = oldCSSClass;\n\n    if (!isNullOrUndefined(oldCSSClass)) {\n      updatedOldCssClass = oldCSSClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(oldCSSClass) && updatedOldCssClass !== '') {\n      removeClass([this.uploadWrapper], updatedOldCssClass.split(' '));\n    }\n  };\n\n  Uploader.prototype.wireEvents = function () {\n    EventHandler.add(this.browseButton, 'click', this.browseButtonClick, this);\n    EventHandler.add(this.element, 'change', this.onSelectFiles, this);\n    EventHandler.add(document, 'click', this.removeFocus, this);\n    this.keyboardModule = new KeyboardEvents(this.uploadWrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n\n    if (this.isForm) {\n      EventHandler.add(this.formElement, 'reset', this.resetForm, this);\n    }\n  };\n\n  Uploader.prototype.unWireEvents = function () {\n    EventHandler.remove(this.browseButton, 'click', this.browseButtonClick);\n    EventHandler.remove(this.element, 'change', this.onSelectFiles);\n    EventHandler.remove(document, 'click', this.removeFocus);\n\n    if (this.isForm) {\n      EventHandler.remove(this.formElement, 'reset', this.resetForm);\n    }\n\n    this.keyboardModule.destroy();\n  };\n\n  Uploader.prototype.resetForm = function () {\n    this.clearAll();\n  };\n\n  Uploader.prototype.keyActionHandler = function (e) {\n    var targetElement = e.target;\n\n    switch (e.action) {\n      case 'enter':\n        if (e.target === this.clearButton) {\n          this.clearButtonClick();\n        } else if (e.target === this.uploadButton) {\n          this.uploadButtonClick();\n        } else if (e.target === this.browseButton) {\n          this.browseButtonClick();\n        } else if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n          var metaData = this.getCurrentMetaData(null, e);\n          metaData.file.statusCode = '4';\n          metaData.file.status = this.localizedTexts('pauseUpload');\n          this.abortUpload(metaData, false);\n        } else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n          this.resumeUpload(this.getCurrentMetaData(null, e), e);\n        } else if (targetElement.classList.contains(RETRY_ICON)) {\n          var metaData = this.getCurrentMetaData(null, e);\n\n          if (!isNullOrUndefined(metaData)) {\n            metaData.file.statusCode = '1';\n            metaData.file.status = this.localizedTexts('readyToUploadMessage');\n            this.chunkUpload(metaData.file);\n          } else {\n            var target = e.target.parentElement;\n            var fileData = this.filesData[this.fileList.indexOf(target)];\n            this.retry(fileData);\n          }\n        } else {\n          this.removeFiles(e);\n\n          if (!targetElement.classList.contains(ABORT_ICON)) {\n            this.browseButton.focus();\n          }\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n        break;\n    }\n  };\n\n  Uploader.prototype.getCurrentMetaData = function (fileInfo, e) {\n    var fileData;\n    var targetMetaData;\n\n    if (isNullOrUndefined(fileInfo)) {\n      var target = e.target.parentElement;\n      fileData = this.filesData[this.fileList.indexOf(target)];\n    } else {\n      fileData = fileInfo;\n    }\n\n    for (var i = 0; i < this.uploadMetaData.length; i++) {\n      if (this.uploadMetaData[i].file.name === fileData.name) {\n        targetMetaData = this.uploadMetaData[i];\n      }\n    }\n\n    return targetMetaData;\n  };\n\n  Uploader.prototype.removeFocus = function () {\n    if (this.uploadWrapper && this.listParent && this.listParent.querySelector('.' + ICON_FOCUSED)) {\n      document.activeElement.blur();\n      this.listParent.querySelector('.' + ICON_FOCUSED).classList.remove(ICON_FOCUSED);\n    }\n  };\n\n  Uploader.prototype.browseButtonClick = function () {\n    this.element.click();\n  };\n\n  Uploader.prototype.uploadButtonClick = function () {\n    if (this.sequentialUpload) {\n      this.sequenceUpload(this.filesData);\n    } else {\n      this.upload(this.filesData);\n    }\n  };\n\n  Uploader.prototype.clearButtonClick = function () {\n    this.clearAll();\n    /* istanbul ignore next */\n\n    if (this.sequentialUpload) {\n      this.count = -1;\n    }\n\n    this.actionCompleteCount = 0;\n  };\n\n  Uploader.prototype.bindDropEvents = function () {\n    if (this.dropZoneElement) {\n      EventHandler.add(this.dropZoneElement, 'drop', this.dropElement, this);\n      EventHandler.add(this.dropZoneElement, 'dragover', this.dragHover, this);\n      EventHandler.add(this.dropZoneElement, 'dragleave', this.onDragLeave, this);\n      EventHandler.add(this.dropZoneElement, 'paste', this.onPasteFile, this);\n    }\n  };\n\n  Uploader.prototype.unBindDropEvents = function () {\n    if (this.dropZoneElement) {\n      EventHandler.remove(this.dropZoneElement, 'drop', this.dropElement);\n      EventHandler.remove(this.dropZoneElement, 'dragover', this.dragHover);\n      EventHandler.remove(this.dropZoneElement, 'dragleave', this.onDragLeave);\n    }\n  };\n\n  Uploader.prototype.onDragLeave = function (e) {\n    this.dropZoneElement.classList.remove(DRAG_HOVER);\n  };\n\n  Uploader.prototype.dragHover = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.dropZoneElement.classList.add(DRAG_HOVER);\n\n    if (this.dropEffect !== 'Default') {\n      e.dataTransfer.dropEffect = this.dropEffect.toLowerCase();\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.dropElement = function (e) {\n    this.dropZoneElement.classList.remove(DRAG_HOVER);\n    this.onSelectFiles(e);\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.onPasteFile = function (event) {\n    var item = event.clipboardData.items;\n\n    if (item.length !== 1) {\n      return;\n    }\n\n    var pasteFile = [].slice.call(item)[0];\n\n    if (pasteFile.kind === 'file' && pasteFile.type.match('^image/')) {\n      this.renderSelectedFiles(event, [pasteFile.getAsFile()], false, true);\n    }\n  };\n\n  Uploader.prototype.getSelectedFiles = function (index) {\n    var data = [];\n    var liElement = this.fileList[index];\n    var allFiles = this.getFilesData();\n    var nameElements = +liElement.getAttribute('data-files-count');\n    var startIndex = 0;\n\n    for (var i = 0; i < index; i++) {\n      startIndex += +this.fileList[i].getAttribute('data-files-count');\n    }\n\n    for (var j = startIndex; j < startIndex + nameElements; j++) {\n      data.push(allFiles[j]);\n    }\n\n    return data;\n  };\n\n  Uploader.prototype.removeFiles = function (args) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var selectedElement = args.target.parentElement;\n\n    if (this.isBlazorSaveUrl) {\n      this.fileList = [].slice.call(this.uploadWrapper.querySelectorAll('li'));\n    }\n\n    var index = this.fileList.indexOf(selectedElement);\n    var liElement = this.fileList[index];\n    var formUpload = this.isFormUpload();\n    var fileData = formUpload ? this.getSelectedFiles(index) : this.getFilesInArray(this.filesData[index]);\n\n    if (isNullOrUndefined(fileData)) {\n      return;\n    }\n\n    if (args.target.classList.contains(ABORT_ICON) && !formUpload) {\n      fileData[0].statusCode = '5';\n\n      if (!isNullOrUndefined(liElement)) {\n        var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n        createSpinner({\n          target: spinnerTarget,\n          width: '20px'\n        });\n        showSpinner(spinnerTarget);\n      }\n\n      if (this.sequentialUpload) {\n        /* istanbul ignore next */\n        this.uploadSequential();\n      }\n\n      if (!liElement.classList.contains(RESTRICT_RETRY)) {\n        this.checkActionComplete(true);\n      }\n    } else {\n      this.remove(fileData, false, false, true, args);\n    }\n\n    this.element.value = '';\n    this.checkActionButtonStatus();\n  };\n\n  Uploader.prototype.removeFilesData = function (file, customTemplate) {\n    var index;\n\n    if (customTemplate) {\n      if (!this.showFileList) {\n        index = this.filesData.indexOf(file);\n        this.filesData.splice(index, 1);\n      }\n\n      return;\n    }\n\n    var selectedElement = this.getLiElement(file);\n\n    if (isNullOrUndefined(selectedElement)) {\n      return;\n    }\n\n    if (!this.isBlazorSaveUrl) {\n      detach(selectedElement);\n    }\n\n    index = this.fileList.indexOf(selectedElement);\n    this.fileList.splice(index, 1);\n    this.filesData.splice(index, 1);\n\n    if (!this.isBlazorSaveUrl) {\n      if (this.fileList.length === 0 && !isNullOrUndefined(this.listParent)) {\n        detach(this.listParent);\n        this.listParent = null;\n        this.removeActionButtons();\n      }\n\n      if (this.sequentialUpload) {\n        /* istanbul ignore next */\n        if (index <= this.count) {\n          --this.count;\n        }\n      }\n    } else {\n      // tslint:disable-next-line\n      this.interopAdaptor.invokeMethodAsync('removeFileData', index);\n    }\n  };\n\n  Uploader.prototype.removeUploadedFile = function (file, eventArgs, removeDirectly, custom) {\n    var _this = this;\n\n    var selectedFiles = file;\n    var ajax = new Ajax(this.asyncSettings.removeUrl, 'POST', true, null);\n    ajax.emitError = false;\n    var formData = new FormData();\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n\n      if (_this.isServerBlazor) {\n        if (_this.currentRequestHeader) {\n          _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n        }\n\n        if (_this.customFormDatas) {\n          _this.updateFormData(formData, _this.customFormDatas);\n        }\n      }\n\n      if (!removeDirectly) {\n        _this.trigger('removing', eventArgs, function (eventArgs) {\n          if (eventArgs.cancel) {\n            e.cancel = true;\n          } else {\n            _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n          }\n        });\n      } else {\n        _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n      }\n    };\n\n    if (this.isServerBlazor) {\n      var name_1 = this.element.getAttribute('name');\n\n      if (!isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n        formData.append(name_1, selectedFiles.rawFile, selectedFiles.name);\n      } else {\n        formData.append(name_1, selectedFiles.name);\n      }\n    }\n\n    ajax.onLoad = function (e) {\n      _this.removeCompleted(e, selectedFiles, custom);\n\n      return {};\n    };\n    /* istanbul ignore next */\n\n\n    ajax.onError = function (e) {\n      _this.removeFailed(e, selectedFiles, custom);\n\n      return {};\n    };\n\n    ajax.send(formData);\n  };\n\n  Uploader.prototype.removingEventCallback = function (eventArgs, formData, selectedFiles, file) {\n    /* istanbul ignore next */\n    var name = this.element.getAttribute('name');\n    var liElement = this.getLiElement(file);\n\n    if (!isNullOrUndefined(liElement) && (!isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON)) || !isNullOrUndefined(liElement.querySelector('.' + REMOVE_ICON)))) {\n      var spinnerTarget = void 0;\n      spinnerTarget = liElement.querySelector('.' + DELETE_ICON) ? liElement.querySelector('.' + DELETE_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n      createSpinner({\n        target: spinnerTarget,\n        width: '20px'\n      });\n      showSpinner(spinnerTarget);\n    }\n\n    if (!this.isServerBlazor) {\n      if (eventArgs.postRawFile && !isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n        formData.append(name, selectedFiles.rawFile, selectedFiles.name);\n      } else {\n        formData.append(name, selectedFiles.name);\n      }\n\n      this.updateFormData(formData, eventArgs.customFormData);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateFormData = function (formData, customData) {\n    if (customData.length > 0 && customData[0]) {\n      var _loop_1 = function (i) {\n        var data = customData[i]; // tslint:disable-next-line\n\n        var value = Object.keys(data).map(function (e) {\n          return data[e];\n        });\n        formData.append(Object.keys(data)[0], value);\n      };\n\n      for (var i = 0; i < customData.length; i++) {\n        _loop_1(i);\n      }\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateCustomheader = function (request, currentRequest) {\n    if (currentRequest.length > 0 && currentRequest[0]) {\n      var _loop_2 = function (i) {\n        var data = currentRequest[i]; // tslint:disable-next-line\n\n        var value = Object.keys(data).map(function (e) {\n          return data[e];\n        });\n        request.setRequestHeader(Object.keys(data)[0], value);\n      };\n\n      for (var i = 0; i < currentRequest.length; i++) {\n        _loop_2(i);\n      }\n    }\n  };\n\n  Uploader.prototype.removeCompleted = function (e, files, customTemplate) {\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var args = {\n      e: e,\n      response: response,\n      operation: 'remove',\n      file: this.updateStatus(files, this.localizedTexts('removedSuccessMessage'), '2')\n    };\n    this.trigger('success', args);\n    this.removeFilesData(files, customTemplate);\n    var index = this.uploadedFilesData.indexOf(files);\n    this.uploadedFilesData.splice(index, 1);\n    this.trigger('change', {\n      files: this.uploadedFilesData\n    });\n  };\n\n  Uploader.prototype.removeFailed = function (e, files, customTemplate) {\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var args = {\n      e: e,\n      response: response,\n      operation: 'remove',\n      file: this.updateStatus(files, this.localizedTexts('removedFailedMessage'), '0')\n    };\n\n    if (!customTemplate) {\n      var index = this.filesData.indexOf(files);\n      var rootElement = this.fileList[index];\n\n      if (rootElement) {\n        var statusElement = rootElement.querySelector('.' + STATUS);\n        rootElement.classList.remove(UPLOAD_SUCCESS);\n        statusElement.classList.remove(UPLOAD_SUCCESS);\n        rootElement.classList.add(UPLOAD_FAILED);\n        statusElement.classList.add(UPLOAD_FAILED);\n      }\n\n      this.checkActionButtonStatus();\n    }\n\n    this.trigger('failure', args);\n    var liElement = this.getLiElement(files);\n    /* istanbul ignore next */\n\n    if (!isNullOrUndefined(liElement) && !isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n      var spinnerTarget = liElement.querySelector('.' + DELETE_ICON);\n      hideSpinner(spinnerTarget);\n      detach(liElement.querySelector('.e-spinner-pane'));\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFilesFromFolder = function (event) {\n    this.filesEntries = [];\n    var items;\n    items = this.multiple ? event.dataTransfer.items : [event.dataTransfer.items[0]];\n    var validDirectoryUpload = this.checkDirectoryUpload(items);\n\n    if (!validDirectoryUpload) {\n      return;\n    }\n\n    var _loop_3 = function (i) {\n      // tslint:disable-next-line\n      var item = items[i].webkitGetAsEntry();\n\n      if (item.isFile) {\n        var files_2 = []; // tslint:disable-next-line\n\n        item.file(function (fileObj) {\n          var path = item.fullPath;\n          files_2.push({\n            'path': path,\n            'file': fileObj\n          });\n        });\n        this_1.renderSelectedFiles(event, files_2, true);\n      } else if (item.isDirectory) {\n        this_1.traverseFileTree(item, event);\n      }\n    };\n\n    var this_1 = this;\n\n    for (var i = 0; i < items.length; i++) {\n      _loop_3(i);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.checkDirectoryUpload = function (items) {\n    for (var i = 0; items && i < items.length; i++) {\n      // tslint:disable-next-line\n      var item = items[i].webkitGetAsEntry();\n\n      if (item.isDirectory) {\n        return true;\n      }\n    }\n\n    return false;\n  }; // tslint:disable\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.traverseFileTree = function (item, event) {\n    if (item.isFile) {\n      this.filesEntries.push(item);\n    } else if (item.isDirectory) {\n      // tslint:disable-next-line\n      var directoryReader = item.createReader(); // tslint:disable-next-line\n\n      this.readFileFromDirectory(directoryReader, event);\n    }\n  }; // tslint:disable\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.readFileFromDirectory = function (directoryReader, event) {\n    var _this = this; // tslint:disable-next-line\n\n\n    directoryReader.readEntries(function (entries) {\n      for (var i = 0; i < entries.length; i++) {\n        _this.traverseFileTree(entries[i]); // tslint:disable-next-line\n\n      }\n\n      ;\n\n      _this.pushFilesEntries(event);\n\n      if (entries.length) {\n        _this.readFileFromDirectory(directoryReader);\n      }\n    });\n  };\n\n  Uploader.prototype.pushFilesEntries = function (event) {\n    var _this = this;\n\n    var files = [];\n\n    var _loop_4 = function (i) {\n      // tslint:disable-next-line\n      this_2.filesEntries[i].file(function (fileObj) {\n        if (_this.filesEntries) {\n          var path = _this.filesEntries[i].fullPath;\n          files.push({\n            'path': path,\n            'file': fileObj\n          });\n\n          if (i === _this.filesEntries.length - 1) {\n            _this.filesEntries = [];\n\n            _this.renderSelectedFiles(event, files, true);\n          }\n        }\n      });\n    };\n\n    var this_2 = this;\n\n    for (var i = 0; i < this.filesEntries.length; i++) {\n      _loop_4(i);\n    }\n  }; // tslint:enable\n\n\n  Uploader.prototype.onSelectFiles = function (args) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var targetFiles;\n    /* istanbul ignore next */\n\n    if (args.type === 'drop') {\n      if (this.directoryUpload) {\n        this.getFilesFromFolder(args);\n      } else {\n        var files = this.sortFilesList = args.dataTransfer.files;\n\n        if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n          this.element.files = files;\n        }\n\n        targetFiles = this.multiple ? this.sortFileList(files) : [files[0]];\n        this.renderSelectedFiles(args, targetFiles);\n      }\n    } else {\n      targetFiles = [].slice.call(args.target.files);\n      this.renderSelectedFiles(args, targetFiles);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getBase64 = function (file) {\n    return new Promise(function (resolve, reject) {\n      var fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = function () {\n        return resolve(fileReader.result);\n      };\n\n      fileReader.onerror = function (error) {\n        return reject(error);\n      };\n    });\n  };\n  /* istanbul ignore next */\n\n  /* tslint:ignore */\n\n\n  Uploader.prototype.renderSelectedFiles = function (args, // tslint:disable-next-line\n  targetFiles, directory, paste) {\n    var _this = this;\n\n    this.base64String = []; // tslint:disable-next-line\n\n    var eventArgs = {\n      event: args,\n      cancel: false,\n      filesData: [],\n      isModified: false,\n      modifiedFilesData: [],\n      progressInterval: '',\n      isCanceled: false,\n      currentRequest: null,\n      customFormData: null\n    };\n    /* istanbul ignore next */\n\n    if (targetFiles.length < 1) {\n      eventArgs.isCanceled = true;\n      this.trigger('selected', eventArgs);\n      return;\n    }\n\n    this.flag = true;\n    var fileData = [];\n\n    if (!this.multiple) {\n      this.clearData(true);\n      targetFiles = [targetFiles[0]];\n    }\n\n    for (var i = 0; i < targetFiles.length; i++) {\n      var file = directory ? targetFiles[i].file : targetFiles[i];\n      this.updateInitialFileDetails(args, targetFiles, file, i, fileData, directory, paste);\n    }\n\n    eventArgs.filesData = fileData;\n\n    if (this.allowedExtensions.indexOf('*') > -1) {\n      this.allTypes = true;\n    }\n\n    if (!this.allTypes) {\n      fileData = this.checkExtension(fileData);\n    }\n\n    this.trigger('selected', eventArgs, function (eventArgs) {\n      _this._internalRenderSelect(eventArgs, fileData);\n    });\n  };\n\n  Uploader.prototype.updateInitialFileDetails = function (args, // tslint:disable-next-line\n  targetFiles, file, i, fileData, directory, paste) {\n    var fileName = directory ? targetFiles[i].path.substring(1, targetFiles[i].path.length) : paste ? getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name) : this.directoryUpload ? targetFiles[i].webkitRelativePath : file.name;\n    var fileDetails = {\n      name: fileName,\n      rawFile: file,\n      size: file.size,\n      status: this.localizedTexts('readyToUploadMessage'),\n      type: this.getFileType(file.name),\n      validationMessages: this.validatedFileSize(file.size),\n      statusCode: '1',\n      id: getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name)\n    };\n    /* istanbul ignore next */\n\n    if (paste) {\n      fileDetails.fileSource = 'paste';\n    }\n\n    fileDetails.status = fileDetails.validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : fileDetails.validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : fileDetails.status;\n\n    if (fileDetails.validationMessages.minSize !== '' || fileDetails.validationMessages.maxSize !== '') {\n      fileDetails.statusCode = '0';\n      this.checkActionComplete(true);\n    }\n\n    fileData.push(fileDetails);\n  };\n\n  Uploader.prototype._internalRenderSelect = function (eventArgs, fileData) {\n    if (!eventArgs.cancel) {\n      /* istanbul ignore next */\n      if (this.isServerBlazor) {\n        this.currentRequestHeader = eventArgs.currentRequest;\n        this.customFormDatas = eventArgs.customFormData;\n      }\n\n      this.selectedFiles = fileData;\n      this.btnTabIndex = this.disableKeyboardNavigation ? '-1' : '0';\n\n      if (this.showFileList) {\n        if (eventArgs.isModified && eventArgs.modifiedFilesData.length > 0) {\n          for (var j = 0; j < eventArgs.modifiedFilesData.length; j++) {\n            for (var k = 0; k < fileData.length; k++) {\n              if (eventArgs.modifiedFilesData[j].id === fileData[k].id) {\n                eventArgs.modifiedFilesData[j].rawFile = fileData[k].rawFile;\n              }\n            }\n          }\n\n          var dataFiles = this.allTypes ? eventArgs.modifiedFilesData : this.checkExtension(eventArgs.modifiedFilesData);\n          this.updateSortedFileList(dataFiles);\n          this.filesData = dataFiles;\n\n          if (!this.isForm || this.allowUpload()) {\n            this.checkAutoUpload(dataFiles);\n          }\n        } else {\n          this.createFileList(fileData, true);\n\n          if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n            this.filesData = this.filesData.concat(fileData);\n          }\n\n          if (!this.isForm || this.allowUpload()) {\n            if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n              this.checkAutoUpload(fileData);\n            }\n          }\n        }\n\n        if (!isNullOrUndefined(eventArgs.progressInterval) && eventArgs.progressInterval !== '') {\n          this.progressInterval = eventArgs.progressInterval;\n        }\n      } else {\n        this.filesData = this.filesData.concat(fileData);\n\n        if (this.isBlazorSaveUrl) {\n          // tslint:disable-next-line\n          this.interopAdaptor.invokeMethodAsync('updateServerFileData', this.filesData, this.isForm);\n        }\n\n        if (this.autoUpload) {\n          this.upload(this.filesData, true);\n        }\n      }\n\n      this.raiseActionComplete();\n    }\n  };\n\n  Uploader.prototype.allowUpload = function () {\n    var allowFormUpload = false;\n\n    if (this.isForm && !isNullOrUndefined(this.asyncSettings.saveUrl) && this.asyncSettings.saveUrl !== '') {\n      allowFormUpload = true;\n    }\n\n    return allowFormUpload;\n  };\n\n  Uploader.prototype.isFormUpload = function () {\n    var isFormUpload = false;\n\n    if (this.isForm && (isNullOrUndefined(this.asyncSettings.saveUrl) || this.asyncSettings.saveUrl === '') && (isNullOrUndefined(this.asyncSettings.removeUrl) || this.asyncSettings.removeUrl === '')) {\n      isFormUpload = true;\n    }\n\n    return isFormUpload;\n  };\n\n  Uploader.prototype.clearData = function (singleUpload) {\n    if (!isNullOrUndefined(this.listParent) && !(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n      detach(this.listParent);\n      this.listParent = null;\n    }\n\n    if (this.browserName !== 'msie' && !singleUpload) {\n      this.element.value = '';\n    }\n\n    this.fileList = [];\n    this.filesData = [];\n\n    if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n      // tslint:disable-next-line\n      this.interopAdaptor.invokeMethodAsync('clearAll');\n    } else {\n      this.removeActionButtons();\n    }\n  };\n\n  Uploader.prototype.updateSortedFileList = function (filesData) {\n    var previousListClone = this.createElement('div', {\n      id: 'clonewrapper'\n    });\n    var added = -1;\n    var removedList;\n\n    if (this.listParent) {\n      for (var i = 0; i < this.listParent.querySelectorAll('li').length; i++) {\n        var liElement = this.listParent.querySelectorAll('li')[i];\n        previousListClone.appendChild(liElement.cloneNode(true));\n      }\n\n      removedList = this.listParent.querySelectorAll('li');\n\n      for (var _i = 0, removedList_1 = removedList; _i < removedList_1.length; _i++) {\n        var item = removedList_1[_i];\n        detach(item);\n      }\n\n      this.removeActionButtons();\n      var oldList = [].slice.call(previousListClone.childNodes);\n      detach(this.listParent);\n      this.listParent = null;\n      this.fileList = [];\n      this.createParentUL();\n\n      for (var index = 0; index < filesData.length; index++) {\n        for (var j = 0; j < this.filesData.length; j++) {\n          if (this.filesData[j].name === filesData[index].name) {\n            this.listParent.appendChild(oldList[j]);\n            EventHandler.add(oldList[j].querySelector('.e-icons'), 'click', this.removeFiles, this);\n            this.fileList.push(oldList[j]);\n            added = index;\n          }\n        }\n\n        if (added !== index) {\n          this.createFileList([filesData[index]]);\n        }\n      }\n    } else {\n      this.createFileList(filesData);\n    }\n  };\n\n  Uploader.prototype.isBlank = function (str) {\n    return !str || /^\\s*$/.test(str);\n  };\n\n  Uploader.prototype.checkExtension = function (files) {\n    var dropFiles = files;\n\n    if (!this.isBlank(this.allowedExtensions)) {\n      var allowedExtensions = [];\n      var extensions = this.allowedExtensions.split(',');\n\n      for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n        var extension = extensions_1[_i];\n        allowedExtensions.push(extension.trim().toLocaleLowerCase());\n      }\n\n      for (var i = 0; i < files.length; i++) {\n        if (allowedExtensions.indexOf(('.' + files[i].type).toLocaleLowerCase()) === -1) {\n          files[i].status = this.localizedTexts('invalidFileType');\n          files[i].statusCode = '0';\n        }\n      }\n    }\n\n    return dropFiles;\n  };\n\n  Uploader.prototype.validatedFileSize = function (fileSize) {\n    var minSizeError = '';\n    var maxSizeError = '';\n\n    if (fileSize < this.minFileSize) {\n      minSizeError = this.localizedTexts('invalidMinFileSize');\n    } else if (fileSize > this.maxFileSize) {\n      maxSizeError = this.localizedTexts('invalidMaxFileSize');\n    } else {\n      minSizeError = '';\n      maxSizeError = '';\n    }\n\n    var errorMessage = {\n      minSize: minSizeError,\n      maxSize: maxSizeError\n    };\n    return errorMessage;\n  };\n\n  Uploader.prototype.isPreLoadFile = function (fileData) {\n    var isPreload = false;\n\n    for (var i = 0; i < this.files.length; i++) {\n      if (this.files[i].name === fileData.name.slice(0, fileData.name.lastIndexOf('.')) && this.files[i].type === fileData.type) {\n        isPreload = true;\n      }\n    }\n\n    return isPreload;\n  };\n\n  Uploader.prototype.createCustomfileList = function (fileData) {\n    this.createParentUL();\n    resetBlazorTemplate(this.element.id + 'Template', 'Template');\n\n    for (var _i = 0, fileData_1 = fileData; _i < fileData_1.length; _i++) {\n      var listItem = fileData_1[_i];\n      var liElement = this.createElement('li', {\n        className: FILE,\n        attrs: {\n          'data-file-name': listItem.name\n        }\n      });\n      this.uploadTemplateFn = this.templateComplier(this.template);\n      var fromElements = [].slice.call(this.uploadTemplateFn(listItem, null, null, this.element.id + 'Template', this.isStringTemplate));\n      var index = fileData.indexOf(listItem);\n      append(fromElements, liElement);\n      var eventArgs = {\n        element: liElement,\n        fileInfo: listItem,\n        index: index,\n        isPreload: this.isPreLoadFile(listItem)\n      };\n      var eventsArgs = {\n        element: liElement,\n        fileInfo: listItem,\n        index: index,\n        isPreload: this.isPreLoadFile(listItem)\n      };\n      this.trigger('rendering', eventArgs);\n      this.trigger('fileListRendering', eventsArgs);\n      this.listParent.appendChild(liElement);\n      this.fileList.push(liElement);\n    }\n\n    updateBlazorTemplate(this.element.id + 'Template', 'Template', this, false);\n  };\n\n  Uploader.prototype.createParentUL = function () {\n    if (isNullOrUndefined(this.listParent)) {\n      this.listParent = this.createElement('ul', {\n        className: LIST_PARENT\n      });\n      this.uploadWrapper.appendChild(this.listParent);\n    }\n  };\n\n  Uploader.prototype.formFileList = function (fileData, files) {\n    var fileList = this.createElement('li', {\n      className: FILE\n    });\n    fileList.setAttribute('data-files-count', fileData.length + '');\n    var fileContainer = this.createElement('span', {\n      className: TEXT_CONTAINER\n    });\n    var statusMessage;\n\n    for (var _i = 0, fileData_2 = fileData; _i < fileData_2.length; _i++) {\n      var listItem = fileData_2[_i];\n      var fileNameEle = this.createElement('span', {\n        className: FILE_NAME\n      });\n      fileNameEle.innerHTML = this.getFileNameOnly(listItem.name);\n      var fileTypeEle = this.createElement('span', {\n        className: FILE_TYPE\n      });\n      fileTypeEle.innerHTML = '.' + this.getFileType(listItem.name);\n\n      if (!this.enableRtl) {\n        fileContainer.appendChild(fileNameEle);\n        fileContainer.appendChild(fileTypeEle);\n      } else {\n        var rtlContainer = this.createElement('span', {\n          className: RTL_CONTAINER\n        });\n        rtlContainer.appendChild(fileTypeEle);\n        rtlContainer.appendChild(fileNameEle);\n        fileContainer.appendChild(rtlContainer);\n      }\n\n      this.truncateName(fileNameEle);\n      statusMessage = this.formValidateFileInfo(listItem, fileList);\n    }\n\n    fileList.appendChild(fileContainer);\n    this.setListToFileInfo(fileData, fileList);\n    var index = this.listParent.querySelectorAll('li').length;\n    var infoEle = this.createElement('span');\n\n    if (fileList.classList.contains(INVALID_FILE)) {\n      infoEle.classList.add(STATUS);\n      infoEle.classList.add(INVALID_FILE);\n      infoEle.innerText = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n    } else {\n      infoEle.classList.add(fileData.length > 1 ? INFORMATION : FILE_SIZE);\n      infoEle.innerText = fileData.length > 1 ? this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , ' + this.localizedTexts('size') + ': ' + this.bytesToSize(this.getFileSize(fileData)) : this.bytesToSize(fileData[0].size);\n      this.createFormInput(fileData);\n    }\n\n    fileContainer.appendChild(infoEle);\n\n    if (isNullOrUndefined(fileList.querySelector('.e-icons'))) {\n      var iconElement = this.createElement('span', {\n        className: 'e-icons',\n        attrs: {\n          'tabindex': this.btnTabIndex\n        }\n      });\n      /* istanbul ignore next */\n\n      if (this.browserName === 'msie') {\n        iconElement.classList.add('e-msie');\n      }\n\n      iconElement.setAttribute('title', this.localizedTexts('remove'));\n      fileList.appendChild(fileContainer);\n      fileList.appendChild(iconElement);\n      EventHandler.add(iconElement, 'click', this.removeFiles, this);\n      iconElement.classList.add(REMOVE_ICON);\n    }\n\n    var eventArgs = {\n      element: fileList,\n      fileInfo: this.mergeFileInfo(fileData, fileList),\n      index: index,\n      isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n    };\n    var eventsArgs = {\n      element: fileList,\n      fileInfo: this.mergeFileInfo(fileData, fileList),\n      index: index,\n      isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n    };\n    this.trigger('rendering', eventArgs);\n    this.trigger('fileListRendering', eventsArgs);\n    this.listParent.appendChild(fileList);\n    this.fileList.push(fileList);\n  };\n\n  Uploader.prototype.formValidateFileInfo = function (listItem, fileList) {\n    var statusMessage = listItem.status;\n    var validationMessages = this.validatedFileSize(listItem.size);\n\n    if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n      this.addInvalidClass(fileList);\n      statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n    }\n\n    var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n\n    if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n      this.addInvalidClass(fileList);\n      statusMessage = typeValidationMessage;\n    }\n\n    return statusMessage;\n  };\n\n  Uploader.prototype.addInvalidClass = function (fileList) {\n    fileList.classList.add(INVALID_FILE);\n  };\n\n  Uploader.prototype.createFormInput = function (fileData) {\n    var inputElement = this.element.cloneNode(true);\n    inputElement.classList.add(HIDDEN_INPUT);\n\n    for (var _i = 0, fileData_3 = fileData; _i < fileData_3.length; _i++) {\n      var listItem = fileData_3[_i];\n      listItem.input = inputElement;\n    }\n\n    inputElement.setAttribute('name', this.uploaderName);\n    this.uploadWrapper.querySelector('.' + INPUT_WRAPPER).appendChild(inputElement);\n\n    if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n      this.element.value = '';\n    }\n  };\n\n  Uploader.prototype.getFileSize = function (fileData) {\n    var fileSize = 0;\n\n    for (var _i = 0, fileData_4 = fileData; _i < fileData_4.length; _i++) {\n      var file = fileData_4[_i];\n      fileSize += file.size;\n    }\n\n    return fileSize;\n  };\n\n  Uploader.prototype.mergeFileInfo = function (fileData, fileList) {\n    var result = {\n      name: '',\n      rawFile: '',\n      size: 0,\n      status: '',\n      type: '',\n      validationMessages: {\n        minSize: '',\n        maxSize: ''\n      },\n      statusCode: '1',\n      list: fileList\n    };\n    var fileNames = [];\n    var type = '';\n\n    for (var _i = 0, fileData_5 = fileData; _i < fileData_5.length; _i++) {\n      var listItem = fileData_5[_i];\n      fileNames.push(listItem.name);\n      type = listItem.type;\n    }\n\n    result.name = fileNames.join(', ');\n    result.size = this.getFileSize(fileData);\n    result.type = type;\n    result.status = this.statusForFormUpload(fileData, fileList);\n    return result;\n  };\n\n  Uploader.prototype.statusForFormUpload = function (fileData, fileList) {\n    var isValid = true;\n    var statusMessage;\n\n    for (var _i = 0, fileData_6 = fileData; _i < fileData_6.length; _i++) {\n      var listItem = fileData_6[_i];\n      statusMessage = listItem.status;\n      var validationMessages = this.validatedFileSize(listItem.size);\n\n      if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n        isValid = false;\n        statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') : validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n      }\n\n      var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n\n      if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n        isValid = false;\n        statusMessage = typeValidationMessage;\n      }\n    }\n\n    if (!isValid) {\n      fileList.classList.add(INVALID_FILE);\n      statusMessage = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n    } else {\n      statusMessage = this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , ' + this.localizedTexts('size') + ': ' + this.bytesToSize(this.getFileSize(fileData));\n    }\n\n    return statusMessage;\n  };\n\n  Uploader.prototype.formCustomFileList = function (fileData, files) {\n    this.createParentUL();\n    resetBlazorTemplate(this.element.id + 'Template', 'Template');\n    var fileList = this.createElement('li', {\n      className: FILE\n    });\n    fileList.setAttribute('data-files-count', fileData.length + '');\n    this.setListToFileInfo(fileData, fileList);\n    var result = this.mergeFileInfo(fileData, fileList);\n    fileList.setAttribute('data-file-name', result.name);\n    this.uploadTemplateFn = this.templateComplier(this.template);\n    var fromElements = [].slice.call(this.uploadTemplateFn(result, null, null, this.element.id + 'Template', this.isStringTemplate));\n    var index = this.listParent.querySelectorAll('li').length;\n    append(fromElements, fileList);\n\n    if (!fileList.classList.contains(INVALID_FILE)) {\n      this.createFormInput(fileData);\n    }\n\n    var eventArgs = {\n      element: fileList,\n      fileInfo: result,\n      index: index,\n      isPreload: this.isPreLoadFile(result)\n    };\n    var eventsArgs = {\n      element: fileList,\n      fileInfo: result,\n      index: index,\n      isPreload: this.isPreLoadFile(result)\n    };\n    this.trigger('rendering', eventArgs);\n    this.trigger('fileListRendering', eventsArgs);\n    this.listParent.appendChild(fileList);\n    this.fileList.push(fileList);\n    updateBlazorTemplate(this.element.id + 'Template', 'Template', this, false);\n  };\n  /**\n   * Create the file list for specified files data.\n   * @param { FileInfo[] } fileData - specifies the files data for file list creation.\n   * @returns void\n   */\n\n\n  Uploader.prototype.createFileList = function (fileData, isSelectedFile) {\n    if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n      var fileListData = isSelectedFile ? this.filesData = this.filesData.concat(fileData) : fileData; // tslint:disable-next-line\n\n      this.interopAdaptor.invokeMethodAsync('createFileList', fileListData, this.isForm);\n    } else {\n      this.createParentUL();\n\n      if (this.template !== '' && !isNullOrUndefined(this.template)) {\n        if (this.isFormUpload()) {\n          this.uploadWrapper.classList.add(FORM_UPLOAD);\n          this.formCustomFileList(fileData, this.element.files);\n        } else {\n          this.createCustomfileList(fileData);\n        }\n      } else if (this.isFormUpload()) {\n        this.uploadWrapper.classList.add(FORM_UPLOAD);\n        this.formFileList(fileData, this.element.files);\n      } else {\n        for (var _i = 0, fileData_7 = fileData; _i < fileData_7.length; _i++) {\n          var listItem = fileData_7[_i];\n          var liElement = this.createElement('li', {\n            className: FILE,\n            attrs: {\n              'data-file-name': listItem.name,\n              'data-files-count': '1'\n            }\n          });\n          var textContainer = this.createElement('span', {\n            className: TEXT_CONTAINER\n          });\n          var textElement = this.createElement('span', {\n            className: FILE_NAME,\n            attrs: {\n              'title': listItem.name\n            }\n          });\n          textElement.innerHTML = this.getFileNameOnly(listItem.name);\n          var fileExtension = this.createElement('span', {\n            className: FILE_TYPE\n          });\n          fileExtension.innerHTML = '.' + this.getFileType(listItem.name);\n\n          if (!this.enableRtl) {\n            textContainer.appendChild(textElement);\n            textContainer.appendChild(fileExtension);\n          } else {\n            var rtlContainer = this.createElement('span', {\n              className: RTL_CONTAINER\n            });\n            rtlContainer.appendChild(fileExtension);\n            rtlContainer.appendChild(textElement);\n            textContainer.appendChild(rtlContainer);\n          }\n\n          var fileSize = this.createElement('span', {\n            className: FILE_SIZE\n          });\n          fileSize.innerHTML = this.bytesToSize(listItem.size);\n          textContainer.appendChild(fileSize);\n          var statusElement = this.createElement('span', {\n            className: STATUS\n          });\n          textContainer.appendChild(statusElement);\n          statusElement.innerHTML = listItem.status;\n          liElement.appendChild(textContainer);\n          var iconElement = this.createElement('span', {\n            className: ' e-icons',\n            attrs: {\n              'tabindex': this.btnTabIndex\n            }\n          });\n          /* istanbul ignore next */\n\n          if (this.browserName === 'msie') {\n            iconElement.classList.add('e-msie');\n          }\n\n          iconElement.setAttribute('title', this.localizedTexts('remove'));\n          liElement.appendChild(iconElement);\n          EventHandler.add(iconElement, 'click', this.removeFiles, this);\n\n          if (listItem.statusCode === '2') {\n            statusElement.classList.add(UPLOAD_SUCCESS);\n            iconElement.classList.add(DELETE_ICON);\n            iconElement.setAttribute('title', this.localizedTexts('delete'));\n          } else if (listItem.statusCode !== '1') {\n            statusElement.classList.remove(UPLOAD_SUCCESS);\n            statusElement.classList.add(VALIDATION_FAILS);\n          }\n\n          if (this.autoUpload && listItem.statusCode === '1' && this.asyncSettings.saveUrl !== '') {\n            statusElement.innerHTML = '';\n          }\n\n          if (!iconElement.classList.contains(DELETE_ICON)) {\n            iconElement.classList.add(REMOVE_ICON);\n          }\n\n          var index = fileData.indexOf(listItem);\n          var eventArgs = {\n            element: liElement,\n            fileInfo: listItem,\n            index: index,\n            isPreload: this.isPreLoadFile(listItem)\n          };\n          var eventsArgs = {\n            element: liElement,\n            fileInfo: listItem,\n            index: index,\n            isPreload: this.isPreLoadFile(listItem)\n          };\n          this.trigger('rendering', eventArgs);\n          this.trigger('fileListRendering', eventsArgs);\n          this.listParent.appendChild(liElement);\n          this.fileList.push(liElement);\n          this.truncateName(textElement);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.getSlicedName = function (nameElement) {\n    var text;\n    text = nameElement.textContent;\n    nameElement.dataset.tail = text.slice(text.length - 10);\n  };\n\n  Uploader.prototype.setListToFileInfo = function (fileData, fileList) {\n    for (var _i = 0, fileData_8 = fileData; _i < fileData_8.length; _i++) {\n      var listItem = fileData_8[_i];\n      listItem.list = fileList;\n    }\n  };\n\n  Uploader.prototype.truncateName = function (name) {\n    var nameElement = name;\n\n    if (this.browserName !== 'edge' && nameElement.offsetWidth < nameElement.scrollWidth) {\n      this.getSlicedName(nameElement);\n      /* istanbul ignore next */\n    } else if (nameElement.offsetWidth + 1 < nameElement.scrollWidth) {\n      this.getSlicedName(nameElement);\n    }\n  };\n\n  Uploader.prototype.getFileType = function (name) {\n    var extension;\n    var index = name.lastIndexOf('.');\n\n    if (index >= 0) {\n      extension = name.substring(index + 1);\n    }\n\n    return extension ? extension : '';\n  };\n\n  Uploader.prototype.getFileNameOnly = function (name) {\n    var type = this.getFileType(name);\n    var names = name.split('.' + type);\n    return type = names[0];\n  };\n\n  Uploader.prototype.setInitialAttributes = function () {\n    if (this.initialAttr.accept) {\n      this.element.setAttribute('accept', this.initialAttr.accept);\n    }\n\n    if (this.initialAttr.disabled) {\n      this.element.setAttribute('disabled', 'disabled');\n    }\n\n    if (this.initialAttr.multiple) {\n      var newAttr = document.createAttribute('multiple');\n      this.element.setAttributeNode(newAttr);\n    }\n  };\n\n  Uploader.prototype.filterfileList = function (files) {\n    var filterFiles = [];\n    var li;\n\n    for (var i = 0; i < files.length; i++) {\n      li = this.getLiElement(files[i]);\n\n      if (!li.classList.contains(UPLOAD_SUCCESS)) {\n        filterFiles.push(files[i]);\n      }\n    }\n\n    return filterFiles;\n  };\n\n  Uploader.prototype.updateStatus = function (files, status, statusCode, updateLiStatus) {\n    if (updateLiStatus === void 0) {\n      updateLiStatus = true;\n    }\n\n    if (!(status === '' || isNullOrUndefined(status)) && !(statusCode === '' || isNullOrUndefined(statusCode))) {\n      if (this.isBlazorSaveUrl) {\n        for (var i = 0; i < this.filesData.length; i++) {\n          if (this.filesData[i].name === files.name) {\n            this.filesData[i].status = status;\n            this.filesData[i].statusCode = statusCode;\n          }\n        }\n      } else {\n        files.status = status;\n        files.statusCode = statusCode;\n      }\n    }\n\n    if (updateLiStatus) {\n      var li = this.getLiElement(files);\n\n      if (!isNullOrUndefined(li)) {\n        if (!isNullOrUndefined(li.querySelector('.' + STATUS)) && !(status === '' || isNullOrUndefined(status))) {\n          li.querySelector('.' + STATUS).textContent = status;\n        }\n      }\n    }\n\n    return files;\n  };\n\n  Uploader.prototype.getLiElement = function (files) {\n    var index;\n\n    for (var i = 0; i < this.filesData.length; i++) {\n      if (this.filesData[i].name === files.name) {\n        index = i;\n      }\n    }\n\n    return this.fileList[index];\n  };\n\n  Uploader.prototype.createProgressBar = function (liElement) {\n    var progressbarWrapper = this.createElement('span', {\n      className: PROGRESS_WRAPPER\n    });\n    var progressBar = this.createElement('progressbar', {\n      className: PROGRESSBAR,\n      attrs: {\n        value: '0',\n        max: '100'\n      }\n    });\n    var progressbarInnerWrapper = this.createElement('span', {\n      className: PROGRESS_INNER_WRAPPER\n    });\n    progressBar.setAttribute('style', 'width: 0%');\n    var progressbarText = this.createElement('span', {\n      className: PROGRESSBAR_TEXT\n    });\n    progressbarText.textContent = '0%';\n    progressbarInnerWrapper.appendChild(progressBar);\n    progressbarWrapper.appendChild(progressbarInnerWrapper);\n    progressbarWrapper.appendChild(progressbarText);\n    liElement.querySelector('.' + TEXT_CONTAINER).appendChild(progressbarWrapper);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.updateProgressbar = function (e, li) {\n    if (!isNaN(Math.round(e.loaded / e.total * 100)) && !isNullOrUndefined(li.querySelector('.' + PROGRESSBAR))) {\n      if (!isNullOrUndefined(this.progressInterval) && this.progressInterval !== '') {\n        var value = Math.round(e.loaded / e.total * 100) % parseInt(this.progressInterval, 10);\n\n        if (value === 0 || value === 100) {\n          this.changeProgressValue(li, Math.round(e.loaded / e.total * 100).toString() + '%');\n        }\n      } else {\n        this.changeProgressValue(li, Math.round(e.loaded / e.total * 100).toString() + '%');\n      }\n    }\n  };\n\n  Uploader.prototype.changeProgressValue = function (li, progressValue) {\n    li.querySelector('.' + PROGRESSBAR).setAttribute('style', 'width:' + progressValue);\n    li.querySelector('.' + PROGRESSBAR_TEXT).textContent = progressValue;\n  };\n\n  Uploader.prototype.uploadInProgress = function (e, files, customUI, request) {\n    var li = this.getLiElement(files);\n\n    if (isNullOrUndefined(li) && !customUI) {\n      return;\n    }\n\n    if (!isNullOrUndefined(li)) {\n      /* istanbul ignore next */\n      if (files.statusCode === '5') {\n        this.cancelUploadingFile(files, e, request, li);\n      }\n\n      if (!(li.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0) && li.querySelector('.' + STATUS)) {\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_INPROGRESS);\n        this.createProgressBar(li);\n        this.updateProgressBarClasses(li, UPLOAD_INPROGRESS);\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n      }\n\n      this.updateProgressbar(e, li);\n      var iconEle = li.querySelector('.' + REMOVE_ICON);\n\n      if (!isNullOrUndefined(iconEle)) {\n        iconEle.classList.add(ABORT_ICON, UPLOAD_INPROGRESS);\n        iconEle.setAttribute('title', this.localizedTexts('abort'));\n        iconEle.classList.remove(REMOVE_ICON);\n      }\n    } else {\n      this.cancelUploadingFile(files, e, request);\n    }\n\n    var args = {\n      e: e,\n      operation: 'upload',\n      file: this.updateStatus(files, this.localizedTexts('inProgress'), '3')\n    };\n    this.trigger('progress', args);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.cancelUploadingFile = function (files, e, request, li) {\n    var _this = this;\n\n    if (files.statusCode === '5') {\n      var eventArgs = {\n        event: e,\n        fileData: files,\n        cancel: false\n      };\n      this.trigger('canceling', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          files.statusCode = '3';\n\n          if (!isNullOrUndefined(li)) {\n            var spinnerTarget = li.querySelector('.' + ABORT_ICON);\n\n            if (!isNullOrUndefined(spinnerTarget)) {\n              hideSpinner(spinnerTarget);\n              detach(li.querySelector('.e-spinner-pane'));\n            }\n          }\n        } else {\n          request.emitError = false;\n          request.httpRequest.abort();\n          var formData = new FormData();\n\n          if (files.statusCode === '5') {\n            var name_2 = _this.element.getAttribute('name');\n\n            formData.append(name_2, files.name);\n            formData.append('cancel-uploading', files.name);\n            var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n            ajax.emitError = false;\n\n            ajax.onLoad = function (e) {\n              _this.removecanceledFile(e, files);\n\n              return {};\n            };\n\n            ajax.send(formData);\n          }\n        }\n      });\n    }\n  };\n\n  Uploader.prototype.removecanceledFile = function (e, file) {\n    var liElement = this.getLiElement(file);\n\n    if (liElement.querySelector('.' + RETRY_ICON) || isNullOrUndefined(liElement.querySelector('.' + ABORT_ICON))) {\n      return;\n    }\n\n    this.updateStatus(file, this.localizedTexts('fileUploadCancel'), '5');\n    this.renderFailureState(e, file, liElement);\n    var spinnerTarget = liElement.querySelector('.' + REMOVE_ICON);\n\n    if (!isNullOrUndefined(liElement)) {\n      hideSpinner(spinnerTarget);\n      detach(liElement.querySelector('.e-spinner-pane'));\n    }\n\n    var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n    var args = {\n      event: e,\n      response: requestResponse,\n      operation: 'cancel',\n      file: file\n    };\n    this.trigger('success', args);\n  };\n\n  Uploader.prototype.renderFailureState = function (e, file, liElement) {\n    var _this = this;\n\n    this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n    this.removeProgressbar(liElement, 'failure');\n\n    if (!isNullOrUndefined(liElement.querySelector('.e-file-status'))) {\n      liElement.querySelector('.e-file-status').classList.add(UPLOAD_FAILED);\n    }\n\n    var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n\n    if (isNullOrUndefined(deleteIcon)) {\n      return;\n    }\n\n    deleteIcon.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n    deleteIcon.classList.add(REMOVE_ICON);\n    deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n    this.pauseButton = this.createElement('span', {\n      className: 'e-icons e-file-reload-btn',\n      attrs: {\n        'tabindex': this.btnTabIndex\n      }\n    });\n    deleteIcon.parentElement.insertBefore(this.pauseButton, deleteIcon);\n    this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n    var retryElement = liElement.querySelector('.' + RETRY_ICON);\n    /* istanbul ignore next */\n\n    retryElement.addEventListener('click', function (e) {\n      _this.reloadcanceledFile(e, file, liElement, false);\n    }, false);\n  };\n\n  Uploader.prototype.reloadcanceledFile = function (e, file, liElement, custom) {\n    file.statusCode = '1';\n    file.status = this.localizedTexts('readyToUploadMessage');\n\n    if (!custom) {\n      liElement.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n\n      if (!isNullOrUndefined(liElement.querySelector('.' + RETRY_ICON))) {\n        detach(liElement.querySelector('.' + RETRY_ICON));\n      }\n\n      this.pauseButton = null;\n    }\n    /* istanbul ignore next */\n\n\n    liElement.classList.add(RESTRICT_RETRY);\n    this.upload([file]);\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.uploadComplete = function (e, file, customUI) {\n    var status = e.target;\n\n    if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n      var li = this.getLiElement(file);\n\n      if (isNullOrUndefined(li) && (!customUI || isNullOrUndefined(customUI))) {\n        return;\n      }\n\n      if (!isNullOrUndefined(li)) {\n        this.updateProgressBarClasses(li, UPLOAD_SUCCESS);\n        this.removeProgressbar(li, 'success');\n        var iconEle = li.querySelector('.' + ABORT_ICON);\n\n        if (!isNullOrUndefined(iconEle)) {\n          iconEle.classList.add(DELETE_ICON);\n          iconEle.setAttribute('title', this.localizedTexts('delete'));\n          iconEle.classList.remove(ABORT_ICON);\n          iconEle.classList.remove(UPLOAD_INPROGRESS);\n        }\n      }\n\n      this.raiseSuccessEvent(e, file);\n    } else {\n      this.uploadFailed(e, file);\n    }\n  };\n\n  Uploader.prototype.getResponse = function (e) {\n    // tslint:disable-next-line\n    var target = e.currentTarget;\n    var response = {\n      readyState: target.readyState,\n      statusCode: target.status,\n      statusText: target.statusText,\n      headers: target.getAllResponseHeaders(),\n      withCredentials: target.withCredentials\n    };\n    return response;\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverRemoveIconBindEvent = function () {\n    if (this.uploadWrapper && this.isBlazorSaveUrl) {\n      var iconElement = [].slice.call(this.uploadWrapper.querySelectorAll('ul li'));\n\n      for (var i = 0; i < iconElement.length; i++) {\n        var removeIconEle = iconElement[i] ? iconElement[i].querySelector('.e-icons') : null;\n\n        if (removeIconEle) {\n          EventHandler.remove(removeIconEle, 'click', this.removeFiles);\n          EventHandler.add(removeIconEle, 'click', this.removeFiles, this);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.raiseSuccessEvent = function (e, file) {\n    var _this = this;\n\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var statusMessage = this.localizedTexts('uploadSuccessMessage');\n    var args = {\n      e: e,\n      response: response,\n      operation: 'upload',\n      file: this.updateStatus(file, statusMessage, '2', false),\n      statusText: statusMessage\n    };\n\n    if (!this.isBlazorSaveUrl) {\n      var liElement = this.getLiElement(file);\n\n      if (!isNullOrUndefined(liElement)) {\n        var spinnerEle = liElement.querySelector('.' + SPINNER_PANE);\n\n        if (!isNullOrUndefined(spinnerEle)) {\n          hideSpinner(liElement);\n          detach(spinnerEle);\n        }\n      }\n    }\n\n    this.trigger('success', args, function (args) {\n      // tslint:disable-next-line\n      _this.updateStatus(file, args.statusText, '2');\n\n      _this.uploadedFilesData.push(file);\n\n      if (!_this.isBlazorSaveUrl) {\n        _this.trigger('change', {\n          file: _this.uploadedFilesData\n        });\n      }\n\n      _this.checkActionButtonStatus();\n\n      if (_this.fileList.length > 0) {\n        if (!_this.getLiElement(file).classList.contains(RESTRICT_RETRY)) {\n          _this.uploadSequential();\n\n          _this.checkActionComplete(true);\n        } else {\n          /* istanbul ignore next */\n          _this.getLiElement(file).classList.remove(RESTRICT_RETRY);\n        }\n      }\n    });\n  };\n\n  Uploader.prototype.uploadFailed = function (e, file) {\n    var _this = this;\n\n    var li = this.getLiElement(file);\n    var response = e && e.currentTarget ? this.getResponse(e) : null;\n    var statusMessage = this.localizedTexts('uploadFailedMessage');\n    var args = {\n      e: e,\n      response: response,\n      operation: 'upload',\n      file: this.updateStatus(file, statusMessage, '0', false),\n      statusText: statusMessage\n    };\n\n    if (!isNullOrUndefined(li)) {\n      this.renderFailureState(e, file, li);\n    }\n\n    this.trigger('failure', args, function (args) {\n      // tslint:disable-next-line\n      _this.updateStatus(file, args.statusText, '0');\n\n      _this.checkActionButtonStatus();\n\n      _this.uploadSequential();\n\n      _this.checkActionComplete(true);\n    });\n  };\n\n  Uploader.prototype.uploadSequential = function () {\n    if (this.sequentialUpload) {\n      if (this.autoUpload) {\n        /* istanbul ignore next */\n        this.checkAutoUpload(this.filesData);\n      } else {\n        this.uploadButtonClick();\n      }\n    }\n  };\n\n  Uploader.prototype.checkActionComplete = function (increment) {\n    increment ? ++this.actionCompleteCount : --this.actionCompleteCount;\n    this.raiseActionComplete();\n  };\n\n  Uploader.prototype.raiseActionComplete = function () {\n    if (this.filesData.length === this.actionCompleteCount && this.flag) {\n      this.flag = false;\n      var eventArgs = {\n        fileData: []\n      };\n      eventArgs.fileData = this.getSelectedFileStatus(this.selectedFiles);\n      this.trigger('actionComplete', eventArgs);\n    }\n  };\n\n  Uploader.prototype.getSelectedFileStatus = function (selectedFiles) {\n    var matchFiles = [];\n    var matchFilesIndex = 0;\n\n    for (var selectFileIndex = 0; selectFileIndex < selectedFiles.length; selectFileIndex++) {\n      var selectedFileData = selectedFiles[selectFileIndex];\n\n      for (var fileDataIndex = 0; fileDataIndex < this.filesData.length; fileDataIndex++) {\n        if (this.filesData[fileDataIndex].name === selectedFileData.name) {\n          matchFiles[matchFilesIndex] = this.filesData[fileDataIndex];\n          ++matchFilesIndex;\n        }\n      }\n    }\n\n    return matchFiles;\n  };\n\n  Uploader.prototype.updateProgressBarClasses = function (li, className) {\n    var progressBar = li.querySelector('.' + PROGRESSBAR);\n\n    if (!isNullOrUndefined(progressBar)) {\n      progressBar.classList.add(className);\n    }\n  };\n\n  Uploader.prototype.removeProgressbar = function (li, callType) {\n    var _this = this;\n\n    if (!isNullOrUndefined(li.querySelector('.' + PROGRESS_WRAPPER))) {\n      this.progressAnimation = new Animation({\n        duration: 1250\n      });\n      this.progressAnimation.animate(li.querySelector('.' + PROGRESS_WRAPPER), {\n        name: 'FadeOut'\n      });\n      this.progressAnimation.animate(li.querySelector('.' + PROGRESSBAR_TEXT), {\n        name: 'FadeOut'\n      });\n      setTimeout(function () {\n        _this.animateProgressBar(li, callType);\n      }, 750);\n    }\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.animateProgressBar = function (li, callType) {\n    if (callType === 'success') {\n      li.classList.add(UPLOAD_SUCCESS);\n\n      if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n        this.progressAnimation.animate(li.querySelector('.' + STATUS), {\n          name: 'FadeIn'\n        });\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_SUCCESS);\n      }\n    } else {\n      if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n        li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n        this.progressAnimation.animate(li.querySelector('.' + STATUS), {\n          name: 'FadeIn'\n        });\n        li.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n      }\n    }\n\n    if (li.querySelector('.' + PROGRESS_WRAPPER)) {\n      detach(li.querySelector('.' + PROGRESS_WRAPPER));\n    }\n  };\n\n  Uploader.prototype.setExtensions = function (extensions) {\n    if (extensions !== '' && !isNullOrUndefined(extensions)) {\n      this.element.setAttribute('accept', extensions);\n    } else {\n      this.element.removeAttribute('accept');\n    }\n  };\n\n  Uploader.prototype.templateComplier = function (uploadTemplate) {\n    if (uploadTemplate) {\n      var exception = void 0;\n\n      try {\n        if (document.querySelectorAll(uploadTemplate).length) {\n          return compile(document.querySelector(uploadTemplate).innerHTML.trim());\n        }\n      } catch (exception) {\n        return compile(uploadTemplate);\n      }\n    }\n\n    return undefined;\n  };\n\n  Uploader.prototype.setRTL = function () {\n    this.enableRtl ? addClass([this.uploadWrapper], RTL) : removeClass([this.uploadWrapper], RTL);\n  };\n\n  Uploader.prototype.localizedTexts = function (localeText) {\n    this.l10n.setLocale(this.locale);\n    return this.l10n.getConstant(localeText);\n  };\n\n  Uploader.prototype.setControlStatus = function () {\n    if (!this.enabled) {\n      this.uploadWrapper.classList.add(DISABLED);\n      this.element.setAttribute('disabled', 'disabled');\n      this.browseButton.setAttribute('disabled', 'disabled');\n\n      if (!isNullOrUndefined(this.clearButton)) {\n        this.clearButton.setAttribute('disabled', 'disabled');\n      }\n\n      if (!isNullOrUndefined(this.uploadButton)) {\n        this.uploadButton.setAttribute('disabled', 'disabled');\n      }\n    } else {\n      if (this.uploadWrapper.classList.contains(DISABLED)) {\n        this.uploadWrapper.classList.remove(DISABLED);\n      }\n\n      if (!isNullOrUndefined(this.browseButton) && this.element.hasAttribute('disabled')) {\n        this.element.removeAttribute('disabled');\n        this.browseButton.removeAttribute('disabled');\n      }\n\n      if (!isNullOrUndefined(this.clearButton) && this.clearButton.hasAttribute('disabled')) {\n        this.clearButton.removeAttribute('disabled');\n      }\n\n      if (!isNullOrUndefined(this.uploadButton) && this.uploadButton.hasAttribute('disabled')) {\n        this.uploadButton.hasAttribute('disabled');\n      }\n    }\n  };\n\n  Uploader.prototype.checkHTMLAttributes = function (isDynamic) {\n    var attributes = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ['accept', 'multiple', 'disabled'];\n\n    for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n      var prop = attributes_1[_i];\n\n      if (!isNullOrUndefined(this.element.getAttribute(prop))) {\n        switch (prop) {\n          case 'accept':\n            // tslint:disable-next-line\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['allowedExtensions'] === undefined || isDynamic) {\n              this.setProperties({\n                allowedExtensions: this.element.getAttribute('accept')\n              }, !isDynamic);\n              this.initialAttr.accept = this.allowedExtensions;\n            }\n\n            break;\n\n          case 'multiple':\n            // tslint:disable-next-line\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['multiple'] === undefined || isDynamic) {\n              var isMutiple = this.element.getAttribute(prop) === 'multiple' || this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? true : false;\n              this.setProperties({\n                multiple: isMutiple\n              }, !isDynamic);\n              this.initialAttr.multiple = true;\n            }\n\n            break;\n\n          case 'disabled':\n            // tslint:disable-next-line\n            if (isNullOrUndefined(this.uploaderOptions) || this.uploaderOptions['enabled'] === undefined || isDynamic) {\n              var isDisabled = this.element.getAttribute(prop) === 'disabled' || this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? false : true;\n              this.setProperties({\n                enabled: isDisabled\n              }, !isDynamic);\n              this.initialAttr.disabled = true;\n            }\n\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.chunkUpload = function (file, custom, fileIndex) {\n    var start = 0;\n    var end = Math.min(this.asyncSettings.chunkSize, file.size);\n    var index = 0;\n    var blob = file.rawFile.slice(start, end);\n    var metaData = {\n      chunkIndex: index,\n      blob: blob,\n      file: file,\n      start: start,\n      end: end,\n      retryCount: 0,\n      request: null\n    };\n    this.sendRequest(file, metaData, custom, fileIndex);\n  };\n\n  Uploader.prototype.sendRequest = function (file, metaData, custom, fileIndex) {\n    var _this = this;\n\n    var formData = new FormData();\n    var cloneFile;\n    var blob = file.rawFile.slice(metaData.start, metaData.end);\n    formData.append('chunkFile', blob, file.name);\n    formData.append('chunk-index', metaData.chunkIndex.toString());\n    formData.append('chunkIndex', metaData.chunkIndex.toString());\n    var totalChunk = Math.max(Math.ceil(file.size / this.asyncSettings.chunkSize), 1);\n    formData.append('total-chunk', totalChunk.toString());\n    formData.append('totalChunk', totalChunk.toString());\n    var ajax = new Ajax({\n      url: this.asyncSettings.saveUrl,\n      type: 'POST',\n      async: true,\n      contentType: null\n    });\n    ajax.emitError = false;\n\n    ajax.onLoad = function (e) {\n      _this.chunkUploadComplete(e, metaData, custom);\n\n      return {};\n    };\n\n    ajax.onUploadProgress = function (e) {\n      _this.chunkUploadInProgress(e, metaData, custom);\n\n      return {};\n    };\n\n    var eventArgs = {\n      fileData: file,\n      customFormData: [],\n      cancel: false,\n      chunkSize: this.asyncSettings.chunkSize === 0 ? null : this.asyncSettings.chunkSize\n    };\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n      eventArgs.currentChunkIndex = metaData.chunkIndex;\n      /* istanbul ignore next */\n\n      if (_this.isServerBlazor) {\n        if (_this.currentRequestHeader) {\n          _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n        }\n\n        if (_this.customFormDatas) {\n          _this.updateFormData(formData, _this.customFormDatas);\n        }\n      }\n\n      if (eventArgs.currentChunkIndex === 0) {\n        // This event is currently not required but to avoid breaking changes for previous customer, we have included.\n        _this.trigger('uploading', eventArgs, function (eventArgs) {\n          _this.uploadingEventCallback(formData, eventArgs, e, file);\n        });\n      } else {\n        _this.trigger('chunkUploading', eventArgs, function (eventArgs) {\n          _this.uploadingEventCallback(formData, eventArgs, e, file);\n        });\n      }\n    };\n    /* istanbul ignore next */\n\n\n    ajax.onError = function (e) {\n      _this.chunkUploadFailed(e, metaData, custom);\n\n      return {};\n    };\n\n    ajax.send(formData);\n    metaData.request = ajax;\n  };\n\n  Uploader.prototype.uploadingEventCallback = function (formData, eventArgs, e, file) {\n    if (eventArgs.cancel) {\n      this.eventCancelByArgs(e, eventArgs, file);\n    } else {\n      this.updateFormData(formData, eventArgs.customFormData);\n    }\n  };\n\n  Uploader.prototype.eventCancelByArgs = function (e, eventArgs, file) {\n    var _this = this;\n\n    e.cancel = true;\n\n    if (eventArgs.fileData.statusCode === '5') {\n      return;\n    }\n\n    var liElement = this.getLiElement(eventArgs.fileData);\n    liElement.querySelector('.' + STATUS).innerHTML = this.localizedTexts('fileUploadCancel');\n    liElement.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n    eventArgs.fileData.statusCode = '5';\n    eventArgs.fileData.status = this.localizedTexts('fileUploadCancel');\n    this.pauseButton = this.createElement('span', {\n      className: 'e-icons e-file-reload-btn',\n      attrs: {\n        'tabindex': this.btnTabIndex\n      }\n    });\n    var removeIcon = liElement.querySelector('.' + REMOVE_ICON);\n    removeIcon.parentElement.insertBefore(this.pauseButton, removeIcon);\n    this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n    /* istanbul ignore next */\n\n    this.pauseButton.addEventListener('click', function (e) {\n      _this.reloadcanceledFile(e, file, liElement);\n    }, false);\n    this.checkActionButtonStatus();\n  };\n\n  Uploader.prototype.checkChunkUpload = function () {\n    return this.asyncSettings.chunkSize <= 0 || isNullOrUndefined(this.asyncSettings.chunkSize) ? false : true;\n  };\n\n  Uploader.prototype.chunkUploadComplete = function (e, metaData, custom) {\n    var _this = this;\n\n    var response = e.target;\n    var liElement;\n\n    if (response.readyState === 4 && response.status >= 200 && response.status < 300) {\n      var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n      var totalChunk = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n      var eventArgs = {\n        event: e,\n        file: metaData.file,\n        chunkIndex: metaData.chunkIndex,\n        totalChunk: totalChunk,\n        chunkSize: this.asyncSettings.chunkSize,\n        response: requestResponse\n      };\n      this.trigger('chunkSuccess', eventArgs);\n\n      if (isNullOrUndefined(custom) || !custom) {\n        liElement = this.getLiElement(metaData.file);\n      }\n\n      this.updateMetaData(metaData);\n\n      if (metaData.end === metaData.file.size) {\n        metaData.file.statusCode = '3';\n      }\n\n      if (metaData.file.statusCode === '5') {\n        var eventArgs_1 = {\n          event: e,\n          fileData: metaData.file,\n          cancel: false\n        };\n        this.trigger('canceling', eventArgs_1, function (eventArgs) {\n          /* istanbul ignore next */\n          if (eventArgs.cancel) {\n            metaData.file.statusCode = '3';\n            var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n\n            if (!isNullOrUndefined(liElement) && !isNullOrUndefined(spinnerTarget)) {\n              hideSpinner(spinnerTarget);\n              detach(liElement.querySelector('.e-spinner-pane'));\n            }\n\n            _this.sendNextRequest(metaData);\n          } else {\n            metaData.request.emitError = false;\n            response.abort();\n            var formData = new FormData();\n\n            var name_3 = _this.element.getAttribute('name');\n\n            formData.append(name_3, metaData.file.name);\n            formData.append('cancel-uploading', metaData.file.name);\n            formData.append('cancelUploading', metaData.file.name);\n            var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n            ajax.emitError = false;\n\n            ajax.onLoad = function (e) {\n              _this.removeChunkFile(e, metaData, custom);\n\n              return {};\n            };\n\n            ajax.send(formData);\n          }\n        });\n      } else {\n        if (totalChunk - 1 === metaData.chunkIndex && totalChunk > metaData.chunkIndex) {\n          var index = this.pausedData.indexOf(metaData);\n\n          if (index >= 0) {\n            this.pausedData.splice(index, 1);\n          }\n\n          if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n            if (liElement) {\n              detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n            }\n\n            this.removeChunkProgressBar(metaData);\n          }\n\n          this.raiseSuccessEvent(e, metaData.file);\n          return;\n        }\n\n        this.sendNextRequest(metaData);\n      }\n    } else {\n      this.chunkUploadFailed(e, metaData);\n    }\n  };\n\n  Uploader.prototype.sendNextRequest = function (metaData) {\n    metaData.start = metaData.end;\n    metaData.end += this.asyncSettings.chunkSize;\n    metaData.end = Math.min(metaData.end, metaData.file.size);\n    metaData.chunkIndex += 1;\n    this.sendRequest(metaData.file, metaData);\n  };\n\n  Uploader.prototype.removeChunkFile = function (e, metaData, custom) {\n    if (isNullOrUndefined(this.template) && isNullOrUndefined(custom) && !custom) {\n      var liElement = this.getLiElement(metaData.file);\n      var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n      var spinnerTarget = deleteIcon;\n      this.updateStatus(metaData.file, this.localizedTexts('fileUploadCancel'), '5');\n      this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n      this.removeProgressbar(liElement, 'failure');\n      deleteIcon.classList.remove(ABORT_ICON);\n      deleteIcon.classList.add(REMOVE_ICON);\n      deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n      var pauseIcon = liElement.querySelector('.' + PAUSE_UPLOAD);\n      pauseIcon.classList.add(RETRY_ICON);\n      pauseIcon.classList.remove(PAUSE_UPLOAD);\n      pauseIcon.setAttribute('title', this.localizedTexts('retry'));\n\n      if (!isNullOrUndefined(liElement) && !isNullOrUndefined(deleteIcon)) {\n        hideSpinner(spinnerTarget);\n        detach(liElement.querySelector('.e-spinner-pane'));\n      }\n    }\n  };\n\n  Uploader.prototype.pauseUpload = function (metaData, e, custom) {\n    metaData.file.statusCode = '4';\n    metaData.file.status = this.localizedTexts('pause');\n    this.updateMetaData(metaData);\n    var eventArgs = {\n      event: e ? e : null,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n      chunkSize: this.asyncSettings.chunkSize\n    };\n    this.abortUpload(metaData, custom, eventArgs);\n  };\n\n  Uploader.prototype.abortUpload = function (metaData, custom, eventArgs) {\n    metaData.request.emitError = false;\n    metaData.request.httpRequest.abort();\n    var liElement = this.getLiElement(metaData.file);\n\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n      var targetElement = liElement.querySelector('.' + PAUSE_UPLOAD);\n      targetElement.classList.remove(PAUSE_UPLOAD);\n      targetElement.classList.add(RESUME_UPLOAD);\n      targetElement.setAttribute('title', this.localizedTexts('resume'));\n      targetElement.nextElementSibling.classList.add(REMOVE_ICON);\n      targetElement.nextElementSibling.classList.remove(ABORT_ICON);\n      targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('remove'));\n    }\n\n    for (var i = 0; i < this.pausedData.length; i++) {\n      if (this.pausedData[i].file.name === metaData.file.name) {\n        this.pausedData.splice(i, 1);\n      }\n    }\n\n    this.pausedData.push(metaData);\n    this.trigger('pausing', eventArgs);\n  };\n\n  Uploader.prototype.resumeUpload = function (metaData, e, custom) {\n    var liElement = this.getLiElement(metaData.file);\n    var targetElement;\n\n    if (!isNullOrUndefined(liElement)) {\n      targetElement = liElement.querySelector('.' + RESUME_UPLOAD);\n    }\n\n    if (!isNullOrUndefined(targetElement) && (isNullOrUndefined(custom) || !custom)) {\n      targetElement.classList.remove(RESUME_UPLOAD);\n      targetElement.classList.add(PAUSE_UPLOAD);\n      targetElement.setAttribute('title', this.localizedTexts('pause'));\n      targetElement.nextElementSibling.classList.remove(REMOVE_ICON);\n      targetElement.nextElementSibling.classList.add(ABORT_ICON);\n      targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('abort'));\n    }\n\n    metaData.file.status = this.localizedTexts('inProgress');\n    metaData.file.statusCode = '3';\n    this.updateMetaData(metaData);\n    var eventArgs = {\n      event: e ? e : null,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n      chunkSize: this.asyncSettings.chunkSize\n    };\n    this.trigger('resuming', eventArgs);\n\n    for (var i = 0; i < this.pausedData.length; i++) {\n      if (this.pausedData[i].end === this.pausedData[i].file.size) {\n        this.chunkUploadComplete(e, metaData, custom);\n      } else {\n        if (this.pausedData[i].file.name === metaData.file.name) {\n          this.pausedData[i].start = this.pausedData[i].end;\n          this.pausedData[i].end = this.pausedData[i].end + this.asyncSettings.chunkSize;\n          this.pausedData[i].end = Math.min(this.pausedData[i].end, this.pausedData[i].file.size);\n          this.pausedData[i].chunkIndex = this.pausedData[i].chunkIndex + 1;\n          this.sendRequest(this.pausedData[i].file, this.pausedData[i], custom);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.updateMetaData = function (metaData) {\n    if (this.uploadMetaData.indexOf(metaData) === -1) {\n      this.uploadMetaData.push(metaData);\n    } else {\n      this.uploadMetaData.splice(this.uploadMetaData.indexOf(metaData), 1);\n      this.uploadMetaData.push(metaData);\n    }\n  };\n\n  Uploader.prototype.removeChunkProgressBar = function (metaData) {\n    var liElement = this.getLiElement(metaData.file);\n\n    if (!isNullOrUndefined(liElement)) {\n      this.updateProgressBarClasses(liElement, UPLOAD_SUCCESS);\n      this.removeProgressbar(liElement, 'success');\n      var cancelButton = liElement.querySelector('.' + ABORT_ICON);\n\n      if (!isNullOrUndefined(cancelButton)) {\n        cancelButton.classList.add(DELETE_ICON);\n        cancelButton.setAttribute('title', this.localizedTexts('delete'));\n        cancelButton.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n      }\n    }\n  };\n\n  Uploader.prototype.chunkUploadFailed = function (e, metaData, custom) {\n    var _this = this;\n\n    var chunkCount = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n    var liElement;\n\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n      liElement = this.getLiElement(metaData.file);\n    }\n\n    var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n    var eventArgs = {\n      event: e,\n      file: metaData.file,\n      chunkIndex: metaData.chunkIndex,\n      totalChunk: chunkCount,\n      chunkSize: this.asyncSettings.chunkSize,\n      cancel: false,\n      response: requestResponse\n    };\n    this.trigger('chunkFailure', eventArgs, function (eventArgs) {\n      // To prevent triggering of failure event\n      // tslint:disable-next-line\n      if (!eventArgs.cancel) {\n        if (metaData.retryCount < _this.asyncSettings.retryCount) {\n          setTimeout(function () {\n            _this.retryRequest(liElement, metaData, custom);\n          }, _this.asyncSettings.retryAfterDelay);\n        } else {\n          if (!isNullOrUndefined(liElement)) {\n            var pauseButton = liElement.querySelector('.' + PAUSE_UPLOAD) ? liElement.querySelector('.' + PAUSE_UPLOAD) : liElement.querySelector('.' + RESUME_UPLOAD);\n\n            if (!isNullOrUndefined(pauseButton)) {\n              pauseButton.classList.add(RETRY_ICON);\n              pauseButton.classList.remove(PAUSE_UPLOAD, RESUME_UPLOAD);\n            }\n\n            _this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n\n            _this.removeProgressbar(liElement, 'failure');\n\n            liElement.querySelector('.e-icons').classList.remove(UPLOAD_INPROGRESS);\n            var iconElement = liElement.querySelector('.' + ABORT_ICON) ? liElement.querySelector('.' + ABORT_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n            iconElement.classList.remove(ABORT_ICON);\n\n            if (!isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n              detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n            }\n\n            if (metaData.start > 0) {\n              iconElement.classList.add(DELETE_ICON);\n              iconElement.setAttribute('title', _this.localizedTexts('delete'));\n            } else {\n              iconElement.classList.add(REMOVE_ICON);\n              iconElement.setAttribute('title', _this.localizedTexts('remove'));\n            }\n          }\n\n          metaData.retryCount = 0;\n          var file_1 = metaData.file;\n\n          var failureMessage = _this.localizedTexts('uploadFailedMessage');\n\n          var args = {\n            e: e,\n            response: requestResponse,\n            operation: 'upload',\n            file: _this.updateStatus(file_1, failureMessage, '0', false),\n            statusText: failureMessage\n          };\n\n          _this.trigger('failure', args, function (args) {\n            // tslint:disable-next-line\n            _this.updateStatus(file_1, args.statusText, '0');\n\n            _this.uploadSequential();\n\n            _this.checkActionComplete(true);\n          });\n        }\n      }\n    });\n  };\n\n  Uploader.prototype.retryRequest = function (liElement, metaData, custom) {\n    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n      this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n    }\n\n    metaData.retryCount += 1;\n    this.sendRequest(metaData.file, metaData);\n  };\n\n  Uploader.prototype.checkPausePlayAction = function (e) {\n    var targetElement = e.target;\n    var selectedElement = e.target.parentElement;\n    var index = this.fileList.indexOf(selectedElement);\n    var fileData = this.filesData[index];\n    var metaData = this.getCurrentMetaData(fileData);\n\n    if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n      /* istanbul ignore next */\n      this.pauseUpload(metaData, e);\n    } else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n      /* istanbul ignore next */\n      this.resumeUpload(metaData, e);\n    } else if (targetElement.classList.contains(RETRY_ICON)) {\n      if (metaData.file.status === this.localizedTexts('fileUploadCancel')) {\n        this.retryUpload(metaData, false);\n      } else {\n        this.retryUpload(metaData, true);\n      }\n    }\n  };\n\n  Uploader.prototype.retryUpload = function (metaData, fromcanceledStage) {\n    if (fromcanceledStage) {\n      metaData.end = metaData.end + this.asyncSettings.chunkSize;\n      metaData.start = metaData.start + this.asyncSettings.chunkSize;\n      this.sendRequest(metaData.file, metaData);\n    } else {\n      metaData.file.statusCode = '1';\n      metaData.file.status = this.localizedTexts('readyToUploadMessage');\n      this.chunkUpload(metaData.file);\n    }\n    /* istanbul ignore next */\n\n\n    this.getLiElement(metaData.file).classList.add(RESTRICT_RETRY);\n  };\n\n  Uploader.prototype.chunkUploadInProgress = function (e, metaData, custom) {\n    var _this = this;\n\n    if (metaData.file.statusCode === '4') {\n      return;\n    }\n\n    if (metaData.file.statusCode !== '4' && metaData.file.statusCode !== '5') {\n      metaData.file.statusCode = '3';\n      metaData.file.status = this.localizedTexts('inProgress');\n    }\n\n    this.updateMetaData(metaData);\n    var liElement = this.getLiElement(metaData.file);\n\n    if (isNullOrUndefined(liElement)) {\n      return;\n    }\n\n    var target;\n    var retryElement = liElement.querySelector('.' + RETRY_ICON);\n\n    if (!isNullOrUndefined(retryElement)) {\n      retryElement.classList.add(PAUSE_UPLOAD);\n      retryElement.setAttribute('title', this.localizedTexts('pause'));\n      retryElement.classList.remove(RETRY_ICON);\n    }\n\n    if (!isNullOrUndefined(liElement)) {\n      if (!(liElement.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0)) {\n        var statusElement = liElement.querySelector('.' + STATUS);\n\n        if (isNullOrUndefined(this.template)) {\n          statusElement.classList.add(UPLOAD_INPROGRESS);\n          statusElement.classList.remove(UPLOAD_FAILED);\n          this.createProgressBar(liElement);\n          this.updateProgressBarClasses(liElement, UPLOAD_INPROGRESS);\n        }\n\n        var clearIcon = liElement.querySelector('.' + REMOVE_ICON) ? liElement.querySelector('.' + REMOVE_ICON) : liElement.querySelector('.' + DELETE_ICON);\n\n        if (!isNullOrUndefined(clearIcon)) {\n          clearIcon.classList.add(ABORT_ICON);\n          clearIcon.setAttribute('title', this.localizedTexts('abort'));\n          clearIcon.classList.remove(REMOVE_ICON);\n        }\n      }\n\n      if (!isNaN(Math.round(e.loaded / e.total * 100)) && isNullOrUndefined(this.template) && metaData.file.statusCode !== '4') {\n        var loadedSize = metaData.chunkIndex * this.asyncSettings.chunkSize;\n        var value = Math.min((loadedSize + e.loaded) / metaData.file.size * 100, 100);\n        this.changeProgressValue(liElement, Math.round(value).toString() + '%');\n      }\n\n      if (metaData.chunkIndex === 0) {\n        this.checkActionButtonStatus();\n      }\n    }\n\n    if (isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD)) && isNullOrUndefined(this.template)) {\n      this.pauseButton = this.createElement('span', {\n        className: 'e-icons e-file-pause-btn',\n        attrs: {\n          'tabindex': this.btnTabIndex\n        }\n      });\n\n      if (this.browserName === 'msie') {\n        this.pauseButton.classList.add('e-msie');\n      }\n\n      var abortIcon = liElement.querySelector('.' + ABORT_ICON);\n      abortIcon.parentElement.insertBefore(this.pauseButton, abortIcon);\n      this.pauseButton.setAttribute('title', this.localizedTexts('pause'));\n      this.pauseButton.addEventListener('click', function (e) {\n        _this.checkPausePlayAction(e);\n      }, false);\n    }\n  };\n  /**\n   * It is used to convert bytes value into kilobytes or megabytes depending on the size based\n   * on [binary prefix](https://en.wikipedia.org/wiki/Binary_prefix).\n   * @param { number } bytes - specifies the file size in bytes.\n   * @returns string\n   */\n\n\n  Uploader.prototype.bytesToSize = function (bytes) {\n    var i = -1;\n    var size;\n\n    if (!bytes) {\n      return '0.0 KB';\n    }\n\n    do {\n      bytes = bytes / 1024;\n      i++;\n    } while (bytes > 99);\n\n    if (i >= 2) {\n      bytes = bytes * 1024;\n      i = 1;\n    }\n\n    return Math.max(bytes, 0).toFixed(1) + ' ' + ['KB', 'MB'][i];\n  };\n  /**\n   * Allows you to sort the file data alphabetically based on its file name clearly.\n   * @param { FileList } filesData - specifies the files data for upload.\n   * @returns File[]\n   */\n\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.sortFileList = function (filesData) {\n    filesData = filesData ? filesData : this.sortFilesList;\n    var files = filesData;\n    var fileNames = [];\n\n    for (var i = 0; i < files.length; i++) {\n      fileNames.push(files[i].name);\n    }\n\n    var sortedFileNames = fileNames.sort();\n    var sortedFilesData = [];\n    var index = 0;\n\n    for (var _i = 0, sortedFileNames_1 = sortedFileNames; _i < sortedFileNames_1.length; _i++) {\n      var name_4 = sortedFileNames_1[_i];\n\n      for (var i = 0; i < files.length; i++) {\n        if (name_4 === files[i].name) {\n          sortedFilesData.push(files[i]);\n        }\n      }\n    }\n\n    return sortedFilesData;\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   * @method destroy\n   * @return {void}.\n   */\n\n\n  Uploader.prototype.destroy = function () {\n    this.element.value = null;\n\n    if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n      this.clearAll();\n    }\n\n    this.unWireEvents();\n    this.unBindDropEvents();\n\n    if (this.multiple) {\n      this.element.removeAttribute('multiple');\n    }\n\n    if (!this.enabled) {\n      this.element.removeAttribute('disabled');\n    }\n\n    this.element.removeAttribute('accept');\n    this.setInitialAttributes();\n    var attributes = ['aria-label', 'directory', 'webkitdirectory', 'tabindex'];\n\n    for (var _i = 0, attributes_2 = attributes; _i < attributes_2.length; _i++) {\n      var key = attributes_2[_i];\n      this.element.removeAttribute(key);\n    }\n\n    if (!this.isServerBlazor) {\n      if (!isNullOrUndefined(this.uploadWrapper)) {\n        this.uploadWrapper.parentElement.appendChild(this.element);\n        detach(this.uploadWrapper);\n      }\n\n      this.uploadWrapper = null;\n\n      _super.prototype.destroy.call(this);\n    } else {\n      this.uploadWrapper = null;\n    }\n  };\n  /**\n   * Allows you to call the upload process manually by calling save URL action.\n   * To process the selected files (added in upload queue), pass an empty argument otherwise\n   * upload the specific file based on its argument.\n   * @param { FileInfo | FileInfo[] } files - specifies the files data for upload.\n   * @returns void\n   */\n\n\n  Uploader.prototype.upload = function (files, custom) {\n    var _this = this;\n\n    files = files ? files : this.filesData;\n    var uploadFiles = this.getFilesInArray(files);\n    var eventArgs = {\n      customFormData: [],\n      currentRequest: null\n    };\n    this.trigger('beforeUpload', eventArgs, function (eventArgs) {\n      if (_this.isServerBlazor) {\n        _this.currentRequestHeader = eventArgs.currentRequest ? eventArgs.currentRequest : _this.currentRequestHeader;\n        _this.customFormDatas = eventArgs.customFormData && eventArgs.customFormData.length > 0 ? eventArgs.customFormData : _this.customFormDatas;\n      }\n\n      _this.uploadFiles(uploadFiles, custom);\n    });\n  };\n\n  Uploader.prototype.getFilesInArray = function (files) {\n    var uploadFiles = [];\n\n    if (files instanceof Array) {\n      uploadFiles = files;\n    } else {\n      uploadFiles.push(files);\n    }\n\n    return uploadFiles;\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.serverReadFileBase64 = function (fileIndex, position, totalCount) {\n    var _this = this;\n\n    return new Promise(function (resolve, reject) {\n      var file = _this.fileStreams[fileIndex].rawFile;\n\n      try {\n        var reader = new FileReader(); // tslint:disable-next-line\n\n        reader.onload = function (args) {\n          return function () {\n            try {\n              var contents = args.result;\n              var data = contents ? contents.split(';base64,')[1] : null;\n              resolve(data);\n            } catch (e) {\n              reject(e);\n            }\n          };\n        }(reader);\n\n        reader.readAsDataURL(file.slice(position, position + totalCount));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.uploadFileCount = function (ele) {\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return -1;\n    }\n\n    var result = files.length;\n    return result;\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFileRead = function (index, ele) {\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return -1;\n    }\n\n    var file = files[index];\n    var fileCount = this.newFileRef++;\n    this.fileStreams[fileCount] = file;\n    return fileCount;\n  };\n  /* istanbul ignore next */\n\n\n  Uploader.prototype.getFileInfo = function (index, ele) {\n    var files = this.filesData;\n\n    if (!files || files.length === 0) {\n      return null;\n    }\n\n    var file = files[index];\n\n    if (!file) {\n      return null;\n    }\n\n    return this.filesData[index];\n  };\n\n  Uploader.prototype.uploadFiles = function (files, custom) {\n    var _this = this;\n\n    var selectedFiles = [];\n\n    if (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl)) {\n      if (this.isServerBlazor) {\n        // tslint:disable-next-line\n        this.interopAdaptor.invokeMethodAsync('GetFileDetails', files);\n      }\n\n      return;\n    }\n\n    if (!custom || isNullOrUndefined(custom)) {\n      if (!this.multiple) {\n        var file = [];\n        file.push(files[0]);\n        selectedFiles = this.filterfileList(file);\n      } else {\n        selectedFiles = this.filterfileList(files);\n      }\n    } else {\n      selectedFiles = files;\n    }\n\n    var _loop_5 = function (i) {\n      if (this_3.isServerBlazor && !this_3.checkChunkUpload()) {\n        /* istanbul ignore next */\n\n        /* tslint:disable */\n        if (selectedFiles[i] && selectedFiles[i].rawFile instanceof File) {\n          this_3.getBase64(selectedFiles[i].rawFile).then(function (data) {\n            _this.base64String.push(data);\n\n            _this.uploadFilesRequest(selectedFiles, i, custom);\n          });\n        }\n        /* tslint:disable */\n\n      } else {\n        this_3.uploadFilesRequest(selectedFiles, i, custom);\n      }\n    };\n\n    var this_3 = this;\n\n    for (var i = 0; i < selectedFiles.length; i++) {\n      _loop_5(i);\n    }\n  };\n\n  Uploader.prototype.uploadFilesRequest = function (selectedFiles, i, custom) {\n    var _this = this;\n\n    var cloneFiles = [];\n    var chunkEnabled = this.checkChunkUpload();\n    var ajax = new Ajax(this.asyncSettings.saveUrl, 'POST', true, null);\n    ajax.emitError = false;\n    var getFileData;\n    /* istanbul ignore next */\n\n    if (this.isServerBlazor) {\n      getFileData = selectedFiles.slice(0);\n      cloneFiles.push(getFileData[i].rawFile);\n    }\n\n    var eventArgs = {\n      fileData: this.isServerBlazor ? getFileData[i] : selectedFiles[i],\n      customFormData: [],\n      cancel: false\n    };\n    var formData = new FormData();\n\n    ajax.beforeSend = function (e) {\n      eventArgs.currentRequest = ajax.httpRequest;\n      /* istanbul ignore next */\n\n      if (_this.isServerBlazor) {\n        eventArgs.fileData.rawFile = !chunkEnabled ? _this.base64String[i] : eventArgs.fileData.rawFile;\n\n        if (_this.currentRequestHeader) {\n          _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n        }\n\n        if (_this.customFormDatas) {\n          _this.updateFormData(formData, _this.customFormDatas);\n        }\n      }\n\n      _this.trigger('uploading', eventArgs, function (eventArgs) {\n        /* istanbul ignore next */\n        if (_this.isServerBlazor && !chunkEnabled) {\n          selectedFiles[i].rawFile = eventArgs.fileData.rawFile = cloneFiles[i];\n        }\n\n        if (eventArgs.cancel) {\n          _this.eventCancelByArgs(e, eventArgs, selectedFiles[i]);\n        }\n\n        _this.updateFormData(formData, eventArgs.customFormData);\n      });\n    };\n\n    if (selectedFiles[i].statusCode === '1') {\n      var name_5 = this.element.getAttribute('name');\n      formData.append(name_5, selectedFiles[i].rawFile, selectedFiles[i].name);\n\n      if (chunkEnabled && selectedFiles[i].size > this.asyncSettings.chunkSize) {\n        this.chunkUpload(selectedFiles[i], custom, i);\n      } else {\n        ajax.onLoad = function (e) {\n          if (eventArgs.cancel && _this.isServerBlazor) {\n            return {};\n          } else {\n            _this.uploadComplete(e, selectedFiles[i], custom);\n\n            return {};\n          }\n        };\n\n        ajax.onUploadProgress = function (e) {\n          if (eventArgs.cancel && _this.isServerBlazor) {\n            return {};\n          } else {\n            _this.uploadInProgress(e, selectedFiles[i], custom, ajax);\n\n            return {};\n          }\n        };\n        /* istanbul ignore next */\n\n\n        ajax.onError = function (e) {\n          _this.uploadFailed(e, selectedFiles[i]);\n\n          return {};\n        };\n\n        ajax.send(formData);\n      }\n    }\n  };\n\n  Uploader.prototype.spliceFiles = function (liIndex) {\n    var liElement = this.fileList[liIndex];\n    var allFiles = this.getFilesData();\n    var nameElements = +liElement.getAttribute('data-files-count');\n    var startIndex = 0;\n\n    for (var i = 0; i < liIndex; i++) {\n      startIndex += +this.fileList[i].getAttribute('data-files-count');\n    }\n\n    var endIndex = startIndex + nameElements - 1;\n\n    for (var j = endIndex; j >= startIndex; j--) {\n      allFiles.splice(j, 1);\n    }\n  };\n  /**\n   * Remove the uploaded file from server manually by calling the remove URL action.\n   * If you pass an empty argument to this method, the complete file list can be cleared,\n   * otherwise remove the specific file based on its argument (file_data).\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to remove from file list/server.\n   * @param { boolean } customTemplate - Set true if the component rendering with customize template.\n   * @param { boolean } removeDirectly - Set true if files remove without removing event.\n   * @param { boolean } postRawFile - Set false, to post file name only to the remove action.\n   * @returns void\n   */\n\n\n  Uploader.prototype.remove = function (fileData, customTemplate, removeDirectly, postRawFile, args) {\n    var _this = this;\n\n    if (isNullOrUndefined(postRawFile)) {\n      postRawFile = true;\n    }\n\n    var eventArgs = {\n      event: args,\n      cancel: false,\n      filesData: [],\n      customFormData: [],\n      postRawFile: postRawFile,\n      currentRequest: null\n    };\n    var beforeEventArgs = {\n      cancel: false,\n      customFormData: [],\n      currentRequest: null\n    };\n    this.trigger('beforeRemove', beforeEventArgs, function (beforeEventArgs) {\n      if (!beforeEventArgs.cancel) {\n        if (_this.isServerBlazor) {\n          _this.currentRequestHeader = beforeEventArgs.currentRequest;\n          _this.customFormDatas = beforeEventArgs.customFormData;\n        }\n\n        var index = void 0;\n\n        if (_this.isFormUpload() && !_this.isBlazorSaveUrl) {\n          eventArgs.filesData = fileData;\n\n          _this.trigger('removing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              var removingFiles = _this.getFilesInArray(fileData);\n\n              var isLiRemoved = false;\n              var liIndex = void 0;\n\n              for (var _i = 0, removingFiles_1 = removingFiles; _i < removingFiles_1.length; _i++) {\n                var data = removingFiles_1[_i];\n\n                if (!isLiRemoved) {\n                  liIndex = _this.fileList.indexOf(data.list);\n                }\n\n                if (liIndex > -1) {\n                  var inputElement = !isNullOrUndefined(data.input) ? data.input : null;\n\n                  if (inputElement) {\n                    detach(inputElement);\n                  }\n\n                  _this.spliceFiles(liIndex);\n\n                  detach(_this.fileList[liIndex]);\n\n                  _this.fileList.splice(liIndex, 1);\n\n                  isLiRemoved = true;\n                  liIndex = -1;\n                }\n              }\n            }\n          });\n        } else if (_this.isForm && (isNullOrUndefined(_this.asyncSettings.removeUrl) || _this.asyncSettings.removeUrl === '') && !_this.isBlazorSaveUrl) {\n          eventArgs.filesData = _this.getFilesData();\n\n          _this.trigger('removing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n              _this.clearAll();\n            }\n          });\n        } else {\n          var removeFiles = [];\n          fileData = !isNullOrUndefined(fileData) ? fileData : _this.filesData;\n\n          if (fileData instanceof Array) {\n            removeFiles = fileData;\n          } else {\n            removeFiles.push(fileData);\n          }\n\n          eventArgs.filesData = removeFiles;\n          var removeUrl = _this.asyncSettings.removeUrl;\n          var validUrl = removeUrl === '' || isNullOrUndefined(removeUrl) ? false : true;\n\n          var _loop_6 = function (files) {\n            index = _this.filesData.indexOf(files);\n\n            if ((files.statusCode === '2' || files.statusCode === '4') && validUrl) {\n              _this.removeUploadedFile(files, eventArgs, removeDirectly, customTemplate);\n            } else {\n              if (!removeDirectly) {\n                _this.trigger('removing', eventArgs, function (eventArgs) {\n                  if (!eventArgs.cancel) {\n                    _this.removeFilesData(files, customTemplate);\n                  }\n                });\n              } else {\n                _this.removeFilesData(files, customTemplate);\n              }\n            }\n\n            if (_this.sequentialUpload) {\n              /* istanbul ignore next */\n              if (index <= _this.actionCompleteCount) {\n                _this.checkActionComplete(false);\n              }\n            } else {\n              _this.checkActionComplete(false);\n            }\n          };\n\n          for (var _i = 0, removeFiles_1 = removeFiles; _i < removeFiles_1.length; _i++) {\n            var files = removeFiles_1[_i];\n\n            _loop_6(files);\n          }\n        }\n      }\n    });\n  };\n  /**\n   * Clear all the file entries from list that can be uploaded files or added in upload queue.\n   * @returns void\n   */\n\n\n  Uploader.prototype.clearAll = function () {\n    var _this = this;\n\n    if (isNullOrUndefined(this.listParent) && !(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n      if (this.browserName !== 'msie') {\n        this.element.value = '';\n      }\n\n      this.filesData = [];\n      return;\n    }\n\n    var eventArgs = {\n      cancel: false,\n      filesData: this.filesData\n    };\n    this.trigger('clearing', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.clearData();\n\n        _this.actionCompleteCount = 0;\n        _this.count = -1;\n      }\n    });\n  };\n  /**\n   * Get the data of files which are shown in file list.\n   * @param { number } index - specifies the file list item(li) index.\n   * @returns FileInfo[]\n   */\n\n\n  Uploader.prototype.getFilesData = function (index) {\n    if (!this.isServerBlazor) {\n      if (isNullOrUndefined(index)) {\n        return this.filesData;\n      } else {\n        return this.getSelectedFiles(index);\n      }\n    } else {\n      for (var i = 0; i < this.filesData.length; i++) {\n        this.filesData[i].rawFile = this.base64String[i];\n      }\n\n      return this.filesData;\n    }\n  };\n  /**\n   * Pauses the in-progress chunked upload based on the file data.\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to pause from uploading.\n   * @param { boolean } custom - Set true if used custom UI.\n   * @returns void\n   */\n\n\n  Uploader.prototype.pause = function (fileData, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n    this.pauseUploading(fileDataFiles, custom);\n  };\n\n  Uploader.prototype.pauseUploading = function (fileData, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '3') {\n        this.pauseUpload(this.getCurrentMetaData(files[i], null), null, custom);\n      }\n    }\n  };\n\n  Uploader.prototype.getFiles = function (fileData) {\n    var files = [];\n\n    if (!isNullOrUndefined(fileData) && !(fileData instanceof Array)) {\n      files.push(fileData);\n    } else {\n      files = fileData;\n    }\n\n    return files;\n  };\n  /**\n   * Resumes the chunked upload that is previously paused based on the file data.\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to resume the paused file.\n   * @param { boolean } custom - Set true if used custom UI.\n   * @returns void\n   */\n\n\n  Uploader.prototype.resume = function (fileData, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n    this.resumeFiles(fileDataFiles, custom);\n  };\n\n  Uploader.prototype.resumeFiles = function (fileData, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '4') {\n        this.resumeUpload(this.getCurrentMetaData(files[i], null), null, custom);\n      }\n    }\n  };\n  /**\n   * Retries the canceled or failed file upload based on the file data.\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to retry the canceled or failed file.\n   * @param { boolean } fromcanceledStage - Set true to retry from canceled stage and set false to retry from initial stage.\n   * @returns void\n   */\n\n\n  Uploader.prototype.retry = function (fileData, fromcanceledStage, custom) {\n    fileData = fileData ? fileData : this.filesData;\n    var fileDataFiles = this.getFilesInArray(fileData);\n    this.retryFailedFiles(fileDataFiles, fromcanceledStage, custom);\n  };\n\n  Uploader.prototype.retryFailedFiles = function (fileData, fromcanceledStage, custom) {\n    var files = this.getFiles(fileData);\n\n    for (var i = 0; i < files.length; i++) {\n      if (files[i].statusCode === '5' || files[i].statusCode === '0') {\n        if (this.asyncSettings.chunkSize > 0) {\n          this.retryUpload(this.getCurrentMetaData(files[i], null), fromcanceledStage);\n        } else {\n          var liElement = void 0;\n\n          if (!custom) {\n            liElement = this.fileList[this.filesData.indexOf(files[i])];\n          }\n\n          this.reloadcanceledFile(null, files[i], liElement, custom);\n        }\n      }\n    }\n  };\n  /**\n   * Stops the in-progress chunked upload based on the file data.\n   * When the file upload is canceled, the partially uploaded file is removed from server.\n   * @param { FileInfo | FileInfo[] } fileData - specifies the files data to cancel the progressing file.\n   * @returns void\n   */\n\n\n  Uploader.prototype.cancel = function (fileData) {\n    fileData = fileData ? fileData : this.filesData;\n    var cancelingFiles = this.getFilesInArray(fileData);\n    this.cancelUpload(cancelingFiles);\n  };\n\n  Uploader.prototype.cancelUpload = function (fileData) {\n    var files = this.getFiles(fileData);\n\n    if (this.asyncSettings.chunkSize > 0) {\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].statusCode === '3') {\n          var metaData = this.getCurrentMetaData(files[i], null);\n          metaData.file.statusCode = '5';\n          metaData.file.status = this.localizedTexts('fileUploadCancel');\n          this.updateMetaData(metaData);\n          this.showHideUploadSpinner(files[i]);\n        }\n      }\n    } else {\n      for (var i = 0; i < files.length; i++) {\n        if (files[i].statusCode === '3') {\n          files[i].statusCode = '5';\n          files[i].status = this.localizedTexts('fileUploadCancel');\n          this.showHideUploadSpinner(files[i]);\n        }\n      }\n    }\n  };\n\n  Uploader.prototype.showHideUploadSpinner = function (files) {\n    var liElement = this.getLiElement(files);\n\n    if (!isNullOrUndefined(liElement) && isNullOrUndefined(this.template)) {\n      var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n      createSpinner({\n        target: spinnerTarget,\n        width: '20px'\n      });\n      showSpinner(spinnerTarget);\n    }\n  };\n\n  __decorate([Complex({\n    saveUrl: '',\n    removeUrl: ''\n  }, AsyncSettings)], Uploader.prototype, \"asyncSettings\", void 0);\n\n  __decorate([Property(false)], Uploader.prototype, \"sequentialUpload\", void 0);\n\n  __decorate([Property({})], Uploader.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property('')], Uploader.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"enabled\", void 0);\n\n  __decorate([Property(null)], Uploader.prototype, \"template\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"multiple\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"autoUpload\", void 0);\n\n  __decorate([Complex({}, ButtonsProps)], Uploader.prototype, \"buttons\", void 0);\n\n  __decorate([Property('')], Uploader.prototype, \"allowedExtensions\", void 0);\n\n  __decorate([Property(0)], Uploader.prototype, \"minFileSize\", void 0);\n\n  __decorate([Property(30000000)], Uploader.prototype, \"maxFileSize\", void 0);\n\n  __decorate([Property(null)], Uploader.prototype, \"dropArea\", void 0);\n\n  __decorate([Collection([{}], FilesProp)], Uploader.prototype, \"files\", void 0);\n\n  __decorate([Property(true)], Uploader.prototype, \"showFileList\", void 0);\n\n  __decorate([Property(false)], Uploader.prototype, \"directoryUpload\", void 0);\n\n  __decorate([Property('Default')], Uploader.prototype, \"dropEffect\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"created\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"actionComplete\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"rendering\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"beforeUpload\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"fileListRendering\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"selected\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"uploading\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"success\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"failure\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"removing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"beforeRemove\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"clearing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"progress\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"change\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkSuccess\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkFailure\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"chunkUploading\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"canceling\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"pausing\", void 0);\n\n  __decorate([Event()], Uploader.prototype, \"resuming\", void 0);\n\n  Uploader = __decorate([NotifyPropertyChanges], Uploader);\n  return Uploader;\n}(Component);\n\nexport { Uploader };","map":{"version":3,"sources":["/Users/josh/Desktop/React/Scheduler/node_modules/@syncfusion/ej2-inputs/src/uploader/uploader.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Property","Event","EventHandler","L10n","compile","isNullOrUndefined","NotifyPropertyChanges","detach","append","Animation","addClass","removeClass","KeyboardEvents","setValue","getValue","ChildProperty","Collection","Complex","Browser","Ajax","getUniqueID","closest","createSpinner","showSpinner","hideSpinner","updateBlazorTemplate","resetBlazorTemplate","isBlazor","ROOT","CONTROL_WRAPPER","INPUT_WRAPPER","DROP_AREA","DROP_WRAPPER","LIST_PARENT","FILE","STATUS","ACTION_BUTTONS","UPLOAD_BUTTONS","CLEAR_BUTTONS","FILE_NAME","FILE_TYPE","FILE_SIZE","REMOVE_ICON","DELETE_ICON","SPINNER_PANE","ABORT_ICON","RETRY_ICON","DRAG_HOVER","PROGRESS_WRAPPER","PROGRESSBAR","PROGRESSBAR_TEXT","UPLOAD_INPROGRESS","UPLOAD_SUCCESS","UPLOAD_FAILED","TEXT_CONTAINER","VALIDATION_FAILS","RTL","DISABLED","RTL_CONTAINER","ICON_FOCUSED","PROGRESS_INNER_WRAPPER","PAUSE_UPLOAD","RESUME_UPLOAD","RESTRICT_RETRY","wrapperAttr","FORM_UPLOAD","HIDDEN_INPUT","INVALID_FILE","INFORMATION","FilesProp","_super","apply","ButtonsProps","AsyncSettings","Uploader","options","element","_this","call","initialAttr","accept","multiple","disabled","uploadedFilesData","base64String","isForm","allTypes","pausedData","uploadMetaData","tabIndex","btnTabIndex","disableKeyboardNavigation","count","actionCompleteCount","flag","selectedFiles","uploaderName","fileStreams","newFileRef","fileList","filesData","uploaderOptions","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","setExtensions","allowedExtensions","clearAll","setControlStatus","setMultipleSelection","setRTL","reRenderFileList","buttons","browse","clear","upload","renderButtonTemplates","unBindDropEvents","setDropArea","updateHTMLAttrToElement","updateHTMLAttrToWrapper","checkHTMLAttributes","renderPreLoadFiles","updateDirectoryAttributes","isServerBlazor","l10n","setLocale","locale","setLocalizedTexts","preLocaleObj","setCSSClass","cssClass","template","browseButton","innerText","localizedTexts","setAttribute","uploadWrapper","querySelector","innerHTML","updateFileList","getKeyValue","val","keyValue","status","classList","contains","autoUpload","uploadButton","clearButton","listParent","createFileList","actionButtons","removeActionButtons","renderActionButtons","checkActionButtonStatus","preRender","localeText","Browse","Clear","Upload","dropFilesHint","invalidMaxFileSize","invalidMinFileSize","invalidFileType","uploadFailedMessage","uploadSuccessMessage","removedSuccessMessage","removedFailedMessage","inProgress","readyToUploadMessage","abort","remove","cancel","delete","pauseUpload","pause","resume","retry","fileUploadCancel","invalidFileSelection","totalFiles","size","isServerRendered","isBlazorTemplate","isBlazorSaveUrl","asyncSettings","saveUrl","sequentialUpload","formRendered","ejInstance","tagName","inputElement","createElement","attrs","type","index","attributes","nodeName","nodeValue","hasAttribute","appendChild","isPureReactComponent","props","name","id","getAttribute","keyConfigs","enter","browserName","info","parentEle","document","documentElement","parentElement","formElement","getPersistData","addOnPersist","getModuleName","directoryUpload","removeAttribute","render","renderBrowseButton","initializeUpload","wireEvents","dropAreaWrapper","renderComplete","className","textContent","blur","focus","wireActionButtonEvents","serverActionButtonsEventBind","unwireActionButtonEvents","serverUlElement","slice","querySelectorAll","serverRemoveIconBindEvent","checkAutoUpload","add","uploadButtonClick","clearButtonClick","uploadText","clearText","inputWrapper","insertBefore","fileDropArea","files","enablePersistence","clearData","files_1","data","fileData","split","rawFile","validationMessages","minSize","maxSize","statusCode","push","allowUpload","showFileList","length_1","dropTextArea","dropArea","dropZoneElement","enableDropText","parentNode","bindDropEvents","htmlAttributes","pro","indexOf","updatedClassValues","replace","trim","uploadStyle","newAttr","createAttribute","value","setAttributeNode","sequenceUpload","isFileListCreated","oldCSSClass","updatedCssClassValue","updatedOldCssClass","browseButtonClick","onSelectFiles","removeFocus","keyboardModule","keyAction","keyActionHandler","bind","eventName","resetForm","unWireEvents","destroy","e","targetElement","action","metaData","getCurrentMetaData","file","abortUpload","resumeUpload","chunkUpload","removeFiles","preventDefault","stopPropagation","fileInfo","targetMetaData","activeElement","click","dropElement","dragHover","onDragLeave","onPasteFile","enabled","dropEffect","dataTransfer","toLowerCase","event","item","clipboardData","items","pasteFile","kind","match","renderSelectedFiles","getAsFile","getSelectedFiles","liElement","allFiles","getFilesData","nameElements","startIndex","j","args","selectedElement","formUpload","isFormUpload","getFilesInArray","spinnerTarget","width","uploadSequential","checkActionComplete","removeFilesData","customTemplate","splice","getLiElement","interopAdaptor","invokeMethodAsync","removeUploadedFile","eventArgs","removeDirectly","custom","ajax","removeUrl","emitError","formData","FormData","beforeSend","currentRequest","httpRequest","currentRequestHeader","updateCustomheader","customFormDatas","updateFormData","trigger","removingEventCallback","name_1","onLoad","removeCompleted","onError","removeFailed","send","postRawFile","customFormData","customData","_loop_1","map","request","_loop_2","setRequestHeader","response","currentTarget","getResponse","operation","updateStatus","rootElement","statusElement","getFilesFromFolder","filesEntries","validDirectoryUpload","checkDirectoryUpload","_loop_3","webkitGetAsEntry","isFile","files_2","fileObj","path","fullPath","this_1","isDirectory","traverseFileTree","directoryReader","createReader","readFileFromDirectory","readEntries","entries","pushFilesEntries","_loop_4","this_2","targetFiles","sortFilesList","sortFileList","getBase64","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","result","onerror","error","directory","paste","isModified","modifiedFilesData","progressInterval","isCanceled","updateInitialFileDetails","checkExtension","_internalRenderSelect","fileName","substring","lastIndexOf","getFileType","webkitRelativePath","fileDetails","validatedFileSize","fileSource","k","dataFiles","updateSortedFileList","concat","raiseActionComplete","allowFormUpload","singleUpload","previousListClone","added","removedList","cloneNode","removedList_1","oldList","childNodes","createParentUL","isBlank","str","test","dropFiles","extensions","extensions_1","extension","toLocaleLowerCase","fileSize","minSizeError","maxSizeError","minFileSize","maxFileSize","errorMessage","isPreLoadFile","isPreload","createCustomfileList","fileData_1","listItem","uploadTemplateFn","templateComplier","fromElements","isStringTemplate","eventsArgs","formFileList","fileContainer","statusMessage","fileData_2","fileNameEle","getFileNameOnly","fileTypeEle","enableRtl","rtlContainer","truncateName","formValidateFileInfo","setListToFileInfo","infoEle","bytesToSize","getFileSize","createFormInput","iconElement","mergeFileInfo","addInvalidClass","typeValidationMessage","fileData_3","input","fileData_4","list","fileNames","fileData_5","join","statusForFormUpload","isValid","fileData_6","formCustomFileList","isSelectedFile","fileListData","fileData_7","textContainer","textElement","fileExtension","getSlicedName","nameElement","text","dataset","tail","fileData_8","offsetWidth","scrollWidth","names","setInitialAttributes","filterfileList","filterFiles","li","updateLiStatus","createProgressBar","progressbarWrapper","progressBar","max","progressbarInnerWrapper","progressbarText","updateProgressbar","isNaN","Math","round","loaded","total","parseInt","changeProgressValue","toString","progressValue","uploadInProgress","customUI","cancelUploadingFile","updateProgressBarClasses","iconEle","name_2","removecanceledFile","renderFailureState","requestResponse","removeProgressbar","deleteIcon","pauseButton","retryElement","addEventListener","reloadcanceledFile","uploadComplete","readyState","raiseSuccessEvent","uploadFailed","statusText","headers","getAllResponseHeaders","withCredentials","removeIconEle","spinnerEle","increment","getSelectedFileStatus","matchFiles","matchFilesIndex","selectFileIndex","selectedFileData","fileDataIndex","callType","progressAnimation","duration","animate","setTimeout","animateProgressBar","uploadTemplate","exception","undefined","getConstant","isDynamic","attributes_1","setProperties","isMutiple","isDisabled","fileIndex","start","end","min","chunkSize","blob","chunkIndex","retryCount","sendRequest","cloneFile","totalChunk","ceil","url","async","contentType","chunkUploadComplete","onUploadProgress","chunkUploadInProgress","currentChunkIndex","uploadingEventCallback","chunkUploadFailed","eventCancelByArgs","removeIcon","checkChunkUpload","updateMetaData","eventArgs_1","sendNextRequest","name_3","removeChunkFile","removeChunkProgressBar","pauseIcon","chunkCount","nextElementSibling","cancelButton","retryRequest","retryAfterDelay","file_1","failureMessage","checkPausePlayAction","retryUpload","fromcanceledStage","clearIcon","loadedSize","abortIcon","bytes","toFixed","sortedFileNames","sort","sortedFilesData","sortedFileNames_1","name_4","attributes_2","uploadFiles","serverReadFileBase64","position","totalCount","reader","contents","uploadFileCount","ele","getFileRead","fileCount","getFileInfo","_loop_5","this_3","File","then","uploadFilesRequest","cloneFiles","chunkEnabled","getFileData","name_5","spliceFiles","liIndex","endIndex","beforeEventArgs","removingFiles","isLiRemoved","removingFiles_1","validUrl","_loop_6","removeFiles_1","fileDataFiles","pauseUploading","getFiles","resumeFiles","retryFailedFiles","cancelingFiles","cancelUpload","showHideUploadSpinner"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, Event, EventHandler, L10n, compile, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, detach, append, Animation } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, KeyboardEvents, setValue, getValue, ChildProperty } from '@syncfusion/ej2-base';\nimport { Collection, Complex, Browser, Ajax, getUniqueID, closest } from '@syncfusion/ej2-base';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { updateBlazorTemplate, resetBlazorTemplate, isBlazor } from '@syncfusion/ej2-base';\nvar ROOT = 'e-uploader';\nvar CONTROL_WRAPPER = 'e-upload e-control-wrapper';\nvar INPUT_WRAPPER = 'e-file-select';\nvar DROP_AREA = 'e-file-drop';\nvar DROP_WRAPPER = 'e-file-select-wrap';\nvar LIST_PARENT = 'e-upload-files';\nvar FILE = 'e-upload-file-list';\nvar STATUS = 'e-file-status';\nvar ACTION_BUTTONS = 'e-upload-actions';\nvar UPLOAD_BUTTONS = 'e-file-upload-btn e-css e-btn e-flat e-primary';\nvar CLEAR_BUTTONS = 'e-file-clear-btn e-css e-btn e-flat';\nvar FILE_NAME = 'e-file-name';\nvar FILE_TYPE = 'e-file-type';\nvar FILE_SIZE = 'e-file-size';\nvar REMOVE_ICON = 'e-file-remove-btn';\nvar DELETE_ICON = 'e-file-delete-btn';\nvar SPINNER_PANE = 'e-spinner-pane';\nvar ABORT_ICON = 'e-file-abort-btn';\nvar RETRY_ICON = 'e-file-reload-btn';\nvar DRAG_HOVER = 'e-upload-drag-hover';\nvar PROGRESS_WRAPPER = 'e-upload-progress-wrap';\nvar PROGRESSBAR = 'e-upload-progress-bar';\nvar PROGRESSBAR_TEXT = 'e-progress-bar-text';\nvar UPLOAD_INPROGRESS = 'e-upload-progress';\nvar UPLOAD_SUCCESS = 'e-upload-success';\nvar UPLOAD_FAILED = 'e-upload-fails';\nvar TEXT_CONTAINER = 'e-file-container';\nvar VALIDATION_FAILS = 'e-validation-fails';\nvar RTL = 'e-rtl';\nvar DISABLED = 'e-disabled';\nvar RTL_CONTAINER = 'e-rtl-container';\nvar ICON_FOCUSED = 'e-clear-icon-focus';\nvar PROGRESS_INNER_WRAPPER = 'e-progress-inner-wrap';\nvar PAUSE_UPLOAD = 'e-file-pause-btn';\nvar RESUME_UPLOAD = 'e-file-play-btn';\nvar RESTRICT_RETRY = 'e-restrict-retry';\nvar wrapperAttr = ['title', 'style', 'class'];\nvar FORM_UPLOAD = 'e-form-upload';\nvar HIDDEN_INPUT = 'e-hidden-file-input';\nvar INVALID_FILE = 'e-file-invalid';\nvar INFORMATION = 'e-file-information';\nvar FilesProp = /** @class */ (function (_super) {\n    __extends(FilesProp, _super);\n    function FilesProp() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], FilesProp.prototype, \"name\", void 0);\n    __decorate([\n        Property(null)\n    ], FilesProp.prototype, \"size\", void 0);\n    __decorate([\n        Property('')\n    ], FilesProp.prototype, \"type\", void 0);\n    return FilesProp;\n}(ChildProperty));\nexport { FilesProp };\nvar ButtonsProps = /** @class */ (function (_super) {\n    __extends(ButtonsProps, _super);\n    function ButtonsProps() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Browse...')\n    ], ButtonsProps.prototype, \"browse\", void 0);\n    __decorate([\n        Property('Upload')\n    ], ButtonsProps.prototype, \"upload\", void 0);\n    __decorate([\n        Property('Clear')\n    ], ButtonsProps.prototype, \"clear\", void 0);\n    return ButtonsProps;\n}(ChildProperty));\nexport { ButtonsProps };\nvar AsyncSettings = /** @class */ (function (_super) {\n    __extends(AsyncSettings, _super);\n    function AsyncSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], AsyncSettings.prototype, \"saveUrl\", void 0);\n    __decorate([\n        Property('')\n    ], AsyncSettings.prototype, \"removeUrl\", void 0);\n    __decorate([\n        Property(0)\n    ], AsyncSettings.prototype, \"chunkSize\", void 0);\n    __decorate([\n        Property(3)\n    ], AsyncSettings.prototype, \"retryCount\", void 0);\n    __decorate([\n        Property(500)\n    ], AsyncSettings.prototype, \"retryAfterDelay\", void 0);\n    return AsyncSettings;\n}(ChildProperty));\nexport { AsyncSettings };\n/**\n * The uploader component allows to upload images, documents, and other files from local to server.\n * ```html\n * <input type='file' name='images[]' id='upload'/>\n * ```\n * ```typescript\n * <script>\n *   var uploadObj = new Uploader();\n *   uploadObj.appendTo('#upload');\n * </script>\n * ```\n */\nvar Uploader = /** @class */ (function (_super) {\n    __extends(Uploader, _super);\n    /**\n     * Triggers when change the Uploader value.\n     */\n    function Uploader(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.initialAttr = { accept: null, multiple: false, disabled: false };\n        _this.uploadedFilesData = [];\n        _this.base64String = [];\n        _this.isForm = false;\n        _this.allTypes = false;\n        _this.pausedData = [];\n        _this.uploadMetaData = [];\n        _this.tabIndex = '0';\n        _this.btnTabIndex = '0';\n        _this.disableKeyboardNavigation = false;\n        _this.count = -1;\n        _this.actionCompleteCount = 0;\n        _this.flag = true;\n        _this.selectedFiles = [];\n        _this.uploaderName = 'UploadFiles';\n        _this.fileStreams = [];\n        _this.newFileRef = 0;\n        /**\n         * Get the file item(li) which are shown in file list.\n         * @private\n         */\n        _this.fileList = [];\n        /**\n         * Get the data of files which are shown in file list.\n         * @private\n         */\n        _this.filesData = [];\n        _this.uploaderOptions = options;\n        return _this;\n    }\n    /**\n     * Calls internally if any of the property value is changed.\n     * @private\n     */\n    Uploader.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowedExtensions':\n                    this.setExtensions(this.allowedExtensions);\n                    this.clearAll();\n                    break;\n                case 'enabled':\n                    this.setControlStatus();\n                    break;\n                case 'multiple':\n                    this.setMultipleSelection();\n                    break;\n                case 'enableRtl':\n                    this.setRTL();\n                    this.reRenderFileList();\n                    break;\n                case 'buttons':\n                    this.buttons.browse = isNullOrUndefined(this.buttons.browse) ? '' : this.buttons.browse;\n                    this.buttons.clear = isNullOrUndefined(this.buttons.clear) ? '' : this.buttons.clear;\n                    this.buttons.upload = isNullOrUndefined(this.buttons.upload) ? '' : this.buttons.upload;\n                    this.renderButtonTemplates();\n                    break;\n                case 'dropArea':\n                    this.unBindDropEvents();\n                    this.setDropArea();\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttrToElement();\n                    this.updateHTMLAttrToWrapper();\n                    this.checkHTMLAttributes(true);\n                    break;\n                case 'files':\n                    this.renderPreLoadFiles();\n                    break;\n                case 'directoryUpload':\n                    this.updateDirectoryAttributes();\n                    break;\n                case 'template':\n                    if (!this.isServerBlazor) {\n                        this.clearAll();\n                    }\n                    break;\n                case 'minFileSize':\n                case 'maxFileSize':\n                case 'autoUpload':\n                    this.clearAll();\n                    break;\n                case 'sequentialUpload':\n                    this.clearAll();\n                    break;\n                case 'locale':\n                    this.l10n.setLocale(this.locale);\n                    this.setLocalizedTexts();\n                    this.preLocaleObj = getValue('currentLocale', this.l10n);\n                    break;\n                case 'cssClass':\n                    this.setCSSClass(oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Uploader.prototype.setLocalizedTexts = function () {\n        if (isNullOrUndefined(this.template)) {\n            if (typeof (this.buttons.browse) === 'string') {\n                this.browseButton.innerText = (this.buttons.browse === 'Browse...') ?\n                    this.localizedTexts('Browse') : this.buttons.browse;\n                this.browseButton.setAttribute('title', this.browseButton.innerText);\n                if (this.uploadWrapper) {\n                    this.uploadWrapper.querySelector('.' + DROP_AREA).innerHTML = this.localizedTexts('dropFilesHint');\n                }\n            }\n            this.updateFileList();\n        }\n    };\n    Uploader.prototype.getKeyValue = function (val) {\n        var keyValue;\n        for (var _i = 0, _a = Object.keys(this.preLocaleObj); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (this.preLocaleObj[key] === val) {\n                keyValue = key;\n            }\n        }\n        return keyValue;\n    };\n    Uploader.prototype.updateFileList = function () {\n        var element;\n        /* istanbul ignore next */\n        if (this.fileList.length > 0 && !isNullOrUndefined(this.uploadWrapper.querySelector('.' + LIST_PARENT))) {\n            for (var i = 0; i < this.fileList.length; i++) {\n                element = this.fileList[i].querySelector('.e-file-status');\n                element.innerHTML = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n                this.filesData[i].status = this.localizedTexts(this.getKeyValue(this.filesData[i].status));\n                if (this.fileList[i].classList.contains(UPLOAD_SUCCESS)) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('delete'));\n                }\n                if (this.fileList[i].querySelector('.e-file-play-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('resume'));\n                }\n                if (this.fileList[i].querySelector('.e-file-remove-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('remove'));\n                }\n                if (this.fileList[i].querySelector('.e-file-reload-btn')) {\n                    this.fileList[i].querySelector('.e-icons').setAttribute('title', this.localizedTexts('retry'));\n                }\n                if (!this.autoUpload) {\n                    this.uploadButton.innerText = (this.buttons.upload === 'Upload') ?\n                        this.localizedTexts('Upload') : this.buttons.upload;\n                    this.uploadButton.setAttribute('title', this.localizedTexts('Upload'));\n                    this.clearButton.innerText = (this.buttons.clear === 'Clear') ?\n                        this.localizedTexts('Clear') : this.buttons.clear;\n                    this.clearButton.setAttribute('title', this.localizedTexts('Clear'));\n                }\n            }\n        }\n    };\n    Uploader.prototype.reRenderFileList = function () {\n        if (this.listParent) {\n            detach(this.listParent);\n            this.listParent = null;\n            this.fileList = [];\n            this.createFileList(this.filesData);\n            if (this.actionButtons) {\n                this.removeActionButtons();\n                this.renderActionButtons();\n                this.checkActionButtonStatus();\n            }\n        }\n    };\n    Uploader.prototype.preRender = function () {\n        this.localeText = { Browse: 'Browse...', Clear: 'Clear', Upload: 'Upload',\n            dropFilesHint: 'Or drop files here', invalidMaxFileSize: 'File size is too large',\n            invalidMinFileSize: 'File size is too small', invalidFileType: 'File type is not allowed',\n            uploadFailedMessage: 'File failed to upload', uploadSuccessMessage: 'File uploaded successfully',\n            removedSuccessMessage: 'File removed successfully', removedFailedMessage: 'Unable to remove file', inProgress: 'Uploading',\n            readyToUploadMessage: 'Ready to upload', abort: 'Abort', remove: 'Remove', cancel: 'Cancel', delete: 'Delete file',\n            pauseUpload: 'File upload paused', pause: 'Pause', resume: 'Resume', retry: 'Retry',\n            fileUploadCancel: 'File upload canceled', invalidFileSelection: 'Invalid files selected', totalFiles: 'Total files',\n            size: 'Size'\n        };\n        this.l10n = new L10n('uploader', this.localeText, this.locale);\n        this.preLocaleObj = getValue('currentLocale', this.l10n);\n        this.isServerBlazor = (isBlazor() && this.isServerRendered) ? true : false;\n        this.isBlazorTemplate = this.isServerBlazor && this.template !== '' && !isNullOrUndefined(this.template) ? true : false;\n        this.isBlazorSaveUrl = (this.isServerRendered &&\n            (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl))) ? true : false;\n        if (this.isBlazorSaveUrl && this.sequentialUpload) {\n            this.sequentialUpload = false;\n        }\n        this.formRendered();\n        if (!this.isServerBlazor) {\n            this.updateHTMLAttrToElement();\n            this.checkHTMLAttributes(false);\n            // tslint:disable-next-line\n            var ejInstance = getValue('ej2_instances', this.element);\n            /* istanbul ignore next */\n            if (this.element.tagName === 'EJS-UPLOADER') {\n                var inputElement = this.createElement('input', { attrs: { type: 'file' } });\n                var index = 0;\n                for (index; index < this.element.attributes.length; index++) {\n                    inputElement.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);\n                    inputElement.innerHTML = this.element.innerHTML;\n                }\n                if (!inputElement.hasAttribute('name')) {\n                    inputElement.setAttribute('name', 'UploadFiles');\n                }\n                this.element.appendChild(inputElement);\n                this.element = inputElement;\n                setValue('ej2_instances', ejInstance, this.element);\n            }\n            /* istanbul ignore next */\n            if (ejInstance[0].isPureReactComponent) {\n                if (!isNullOrUndefined(ejInstance[0].props.name)) {\n                    this.element.setAttribute('name', ejInstance[0].props.name);\n                }\n                else if (!isNullOrUndefined(ejInstance[0].props.id) && isNullOrUndefined(ejInstance[0].props.name)) {\n                    this.element.setAttribute('name', ejInstance[0].props.id);\n                }\n                else {\n                    this.element.setAttribute('name', 'UploadFiles');\n                }\n            }\n            if (isNullOrUndefined(this.element.getAttribute('name'))) {\n                this.element.setAttribute('name', this.element.getAttribute('id'));\n            }\n            if (!this.element.hasAttribute('type')) {\n                this.element.setAttribute('type', 'file');\n            }\n            this.updateDirectoryAttributes();\n        }\n        this.keyConfigs = {\n            enter: 'enter'\n        };\n        if (this.element.hasAttribute('tabindex')) {\n            this.tabIndex = this.element.getAttribute('tabindex');\n        }\n        this.browserName = Browser.info.name;\n        this.uploaderName = this.element.getAttribute('name');\n    };\n    Uploader.prototype.formRendered = function () {\n        var parentEle = closest(this.element, 'form');\n        if (!isNullOrUndefined(parentEle)) {\n            for (; parentEle && parentEle !== document.documentElement; parentEle = parentEle.parentElement) {\n                if (parentEle.tagName === 'FORM') {\n                    this.isForm = true;\n                    this.formElement = parentEle;\n                    parentEle.setAttribute('enctype', 'multipart/form-data');\n                    parentEle.setAttribute('encoding', 'multipart/form-data');\n                }\n            }\n        }\n    };\n    Uploader.prototype.getPersistData = function () {\n        return this.addOnPersist(['filesData']);\n    };\n    /**\n     * Return the module name of the component.\n     */\n    Uploader.prototype.getModuleName = function () {\n        return 'uploader';\n    };\n    Uploader.prototype.updateDirectoryAttributes = function () {\n        if (this.directoryUpload) {\n            this.element.setAttribute('directory', 'true');\n            this.element.setAttribute('webkitdirectory', 'true');\n        }\n        else {\n            this.element.removeAttribute('directory');\n            this.element.removeAttribute('webkitdirectory');\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     * @private\n     */\n    Uploader.prototype.render = function () {\n        if (!this.isServerBlazor) {\n            this.renderBrowseButton();\n            this.initializeUpload();\n            this.updateHTMLAttrToWrapper();\n            this.wireEvents();\n            this.setMultipleSelection();\n            this.setExtensions(this.allowedExtensions);\n            this.setRTL();\n            this.renderPreLoadFiles();\n            this.setControlStatus();\n            this.setCSSClass();\n        }\n        else {\n            this.dropAreaWrapper = closest(this.element, '.' + DROP_WRAPPER);\n            this.uploadWrapper = closest(this.element, '.e-upload.e-control-wrapper');\n            this.browseButton = this.dropAreaWrapper.querySelector('button.e-upload-browse-btn');\n            this.setDropArea();\n            this.renderPreLoadFiles();\n            this.wireEvents();\n        }\n        this.renderComplete();\n    };\n    Uploader.prototype.renderBrowseButton = function () {\n        this.browseButton = this.createElement('button', { className: 'e-css e-btn', attrs: { 'type': 'button' } });\n        this.browseButton.setAttribute('tabindex', this.tabIndex);\n        if (typeof (this.buttons.browse) === 'string') {\n            this.browseButton.textContent = (this.buttons.browse === 'Browse...') ?\n                this.localizedTexts('Browse') : this.buttons.browse;\n            this.browseButton.setAttribute('title', this.browseButton.innerText);\n        }\n        else {\n            this.browseButton.appendChild(this.buttons.browse);\n        }\n        this.element.setAttribute('aria-label', 'Uploader');\n    };\n    Uploader.prototype.renderActionButtons = function () {\n        this.element.setAttribute('tabindex', '-1');\n        if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n            this.actionButtons = this.createElement('div', { className: ACTION_BUTTONS });\n            this.uploadButton = this.createElement('button', { className: UPLOAD_BUTTONS,\n                attrs: { 'type': 'button', 'tabindex': this.btnTabIndex } });\n            this.clearButton = this.createElement('button', { className: CLEAR_BUTTONS,\n                attrs: { 'type': 'button', 'tabindex': this.btnTabIndex } });\n            this.actionButtons.appendChild(this.clearButton);\n            this.actionButtons.appendChild(this.uploadButton);\n            this.renderButtonTemplates();\n            this.uploadWrapper.appendChild(this.actionButtons);\n            this.browseButton.blur();\n            this.uploadButton.focus();\n            this.wireActionButtonEvents();\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverActionButtonsEventBind = function (element) {\n        if (element && !this.isForm) {\n            this.browseButton.blur();\n            this.actionButtons = element;\n            this.uploadButton = this.actionButtons.querySelector('.e-file-upload-btn');\n            this.clearButton = this.actionButtons.querySelector('.e-file-clear-btn');\n            this.uploadButton.focus();\n            this.unwireActionButtonEvents();\n            this.wireActionButtonEvents();\n            this.checkActionButtonStatus();\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverUlElement = function (element) {\n        if (element) {\n            if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n                this.listParent = element;\n                this.fileList = [].slice.call(this.listParent.querySelectorAll('li'));\n                this.serverRemoveIconBindEvent();\n                if (!this.isForm) {\n                    this.checkAutoUpload(this.filesData);\n                }\n            }\n        }\n    };\n    Uploader.prototype.wireActionButtonEvents = function () {\n        EventHandler.add(this.uploadButton, 'click', this.uploadButtonClick, this);\n        EventHandler.add(this.clearButton, 'click', this.clearButtonClick, this);\n    };\n    Uploader.prototype.unwireActionButtonEvents = function () {\n        EventHandler.remove(this.uploadButton, 'click', this.uploadButtonClick);\n        EventHandler.remove(this.clearButton, 'click', this.clearButtonClick);\n    };\n    Uploader.prototype.removeActionButtons = function () {\n        if (this.actionButtons) {\n            this.unwireActionButtonEvents();\n            if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n                detach(this.actionButtons);\n            }\n            this.actionButtons = null;\n        }\n    };\n    Uploader.prototype.renderButtonTemplates = function () {\n        if (typeof (this.buttons.browse) === 'string') {\n            this.browseButton.textContent = (this.buttons.browse === 'Browse...') ?\n                this.localizedTexts('Browse') : this.buttons.browse;\n            this.browseButton.setAttribute('title', this.browseButton.textContent);\n        }\n        else {\n            this.browseButton.innerHTML = '';\n            this.browseButton.appendChild(this.buttons.browse);\n        }\n        if (this.uploadButton) {\n            var uploadText = void 0;\n            uploadText = isNullOrUndefined(this.buttons.upload) ? 'Upload' : this.buttons.upload;\n            this.buttons.upload = uploadText;\n            if (typeof (this.buttons.upload) === 'string') {\n                this.uploadButton.textContent = (this.buttons.upload === 'Upload') ?\n                    this.localizedTexts('Upload') : this.buttons.upload;\n                this.uploadButton.setAttribute('title', this.uploadButton.textContent);\n            }\n            else {\n                this.uploadButton.innerHTML = '';\n                this.uploadButton.appendChild(this.buttons.upload);\n            }\n        }\n        if (this.clearButton) {\n            var clearText = void 0;\n            clearText = isNullOrUndefined(this.buttons.clear) ? 'Clear' : this.buttons.clear;\n            this.buttons.clear = clearText;\n            if (typeof (this.buttons.clear) === 'string') {\n                this.clearButton.textContent = (this.buttons.clear === 'Clear') ?\n                    this.localizedTexts('Clear') : this.buttons.clear;\n                this.clearButton.setAttribute('title', this.clearButton.textContent);\n            }\n            else {\n                this.clearButton.innerHTML = '';\n                this.clearButton.appendChild(this.buttons.clear);\n            }\n        }\n    };\n    Uploader.prototype.initializeUpload = function () {\n        this.element.setAttribute('tabindex', '-1');\n        var inputWrapper = this.createElement('span', { className: INPUT_WRAPPER });\n        this.element.parentElement.insertBefore(inputWrapper, this.element);\n        this.dropAreaWrapper = this.createElement('div', { className: DROP_WRAPPER });\n        this.element.parentElement.insertBefore(this.dropAreaWrapper, this.element);\n        inputWrapper.appendChild(this.element);\n        this.dropAreaWrapper.appendChild(this.browseButton);\n        this.dropAreaWrapper.appendChild(inputWrapper);\n        var fileDropArea = this.createElement('span', { className: DROP_AREA });\n        fileDropArea.innerHTML = this.localizedTexts('dropFilesHint');\n        this.dropAreaWrapper.appendChild(fileDropArea);\n        this.uploadWrapper = this.createElement('div', { className: CONTROL_WRAPPER });\n        this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper, this.dropAreaWrapper);\n        this.uploadWrapper.appendChild(this.dropAreaWrapper);\n        this.setDropArea();\n    };\n    Uploader.prototype.renderPreLoadFiles = function () {\n        if (this.files.length) {\n            if (this.enablePersistence && this.filesData.length) {\n                this.createFileList(this.filesData);\n                return;\n            }\n            if (isNullOrUndefined(this.files[0].size)) {\n                return;\n            }\n            var files = [].slice.call(this.files);\n            var filesData = [];\n            if (!this.multiple) {\n                this.clearData();\n                files = [files[0]];\n            }\n            for (var _i = 0, files_1 = files; _i < files_1.length; _i++) {\n                var data = files_1[_i];\n                var fileData = {\n                    name: data.name + '.' + data.type.split('.')[data.type.split('.').length - 1],\n                    rawFile: '',\n                    size: data.size,\n                    status: this.localizedTexts('uploadSuccessMessage'),\n                    type: data.type,\n                    validationMessages: { minSize: '', maxSize: '' },\n                    statusCode: '2'\n                };\n                filesData.push(fileData);\n                this.filesData.push(fileData);\n            }\n            this.createFileList(filesData);\n            if (!this.autoUpload && this.listParent && !this.actionButtons && (!this.isForm || this.allowUpload()) && this.showFileList) {\n                this.renderActionButtons();\n            }\n            this.checkActionButtonStatus();\n        }\n    };\n    Uploader.prototype.checkActionButtonStatus = function () {\n        if (this.actionButtons) {\n            var length_1 = this.uploadWrapper.querySelectorAll('.' + VALIDATION_FAILS).length +\n                this.uploadWrapper.querySelectorAll('.e-upload-fails:not(.e-upload-progress)').length +\n                this.uploadWrapper.querySelectorAll('span.' + UPLOAD_SUCCESS).length +\n                this.uploadWrapper.querySelectorAll('span.' + UPLOAD_INPROGRESS).length;\n            if (length_1 > 0 && length_1 === this.uploadWrapper.querySelectorAll('li').length) {\n                this.uploadButton.setAttribute('disabled', 'disabled');\n            }\n            else {\n                this.uploadButton.removeAttribute('disabled');\n            }\n        }\n    };\n    Uploader.prototype.setDropArea = function () {\n        var dropTextArea = this.dropAreaWrapper.querySelector('.e-file-drop');\n        if (this.dropArea) {\n            this.dropZoneElement = (typeof (this.dropArea) !== 'string') ? this.dropArea :\n                document.querySelector(this.dropArea);\n            var element = this.element;\n            var enableDropText = false;\n            while (element.parentNode) {\n                element = element.parentNode;\n                if (element === this.dropZoneElement) {\n                    enableDropText = true;\n                    dropTextArea.textContent = this.localizedTexts('dropFilesHint');\n                }\n            }\n            if (!enableDropText) {\n                dropTextArea.textContent = '';\n            }\n        }\n        else {\n            this.dropZoneElement = this.uploadWrapper;\n            dropTextArea.textContent = this.localizedTexts('dropFilesHint');\n        }\n        this.bindDropEvents();\n    };\n    Uploader.prototype.updateHTMLAttrToElement = function () {\n        if (!isNullOrUndefined(this.htmlAttributes)) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var pro = _a[_i];\n                if (wrapperAttr.indexOf(pro) < 0) {\n                    this.element.setAttribute(pro, this.htmlAttributes[pro]);\n                }\n            }\n        }\n    };\n    Uploader.prototype.updateHTMLAttrToWrapper = function () {\n        if (!isNullOrUndefined(this.htmlAttributes)) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var pro = _a[_i];\n                if (wrapperAttr.indexOf(pro) > -1) {\n                    if (pro === 'class') {\n                        var updatedClassValues = (this.htmlAttributes[pro].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValues !== '') {\n                            addClass([this.uploadWrapper], updatedClassValues.split(' '));\n                        }\n                    }\n                    else if (pro === 'style') {\n                        var uploadStyle = this.uploadWrapper.getAttribute(pro);\n                        uploadStyle = !isNullOrUndefined(uploadStyle) ? (uploadStyle + this.htmlAttributes[pro]) :\n                            this.htmlAttributes[pro];\n                        this.uploadWrapper.setAttribute(pro, uploadStyle);\n                    }\n                    else {\n                        this.uploadWrapper.setAttribute(pro, this.htmlAttributes[pro]);\n                    }\n                }\n            }\n        }\n    };\n    Uploader.prototype.setMultipleSelection = function () {\n        if (this.multiple && !this.element.hasAttribute('multiple')) {\n            var newAttr = document.createAttribute('multiple');\n            newAttr.value = 'multiple';\n            this.element.setAttributeNode(newAttr);\n        }\n        else if (!this.multiple) {\n            this.element.removeAttribute('multiple');\n        }\n    };\n    Uploader.prototype.checkAutoUpload = function (fileData) {\n        if (this.autoUpload) {\n            if (this.sequentialUpload) {\n                /* istanbul ignore next */\n                this.sequenceUpload(fileData);\n            }\n            else {\n                this.upload(fileData);\n            }\n            this.removeActionButtons();\n        }\n        else if (!this.actionButtons) {\n            this.renderActionButtons();\n        }\n        this.checkActionButtonStatus();\n    };\n    Uploader.prototype.sequenceUpload = function (fileData) {\n        if (this.filesData.length - fileData.length === 0 ||\n            this.filesData[(this.filesData.length - fileData.length - 1)].statusCode !== '1') {\n            ++this.count;\n            var isFileListCreated = this.showFileList ? false : true;\n            if (typeof this.filesData[this.count] === 'object') {\n                this.upload(this.filesData[this.count], isFileListCreated);\n                if (this.filesData[this.count].statusCode === '0') {\n                    this.sequenceUpload(fileData);\n                }\n            }\n            else {\n                --this.count;\n            }\n        }\n    };\n    Uploader.prototype.setCSSClass = function (oldCSSClass) {\n        var updatedCssClassValue = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValue = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(this.cssClass) && updatedCssClassValue !== '') {\n            addClass([this.uploadWrapper], updatedCssClassValue.split(updatedCssClassValue.indexOf(',') > -1 ? ',' : ' '));\n        }\n        var updatedOldCssClass = oldCSSClass;\n        if (!isNullOrUndefined(oldCSSClass)) {\n            updatedOldCssClass = (oldCSSClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(oldCSSClass) && updatedOldCssClass !== '') {\n            removeClass([this.uploadWrapper], updatedOldCssClass.split(' '));\n        }\n    };\n    Uploader.prototype.wireEvents = function () {\n        EventHandler.add(this.browseButton, 'click', this.browseButtonClick, this);\n        EventHandler.add(this.element, 'change', this.onSelectFiles, this);\n        EventHandler.add(document, 'click', this.removeFocus, this);\n        this.keyboardModule = new KeyboardEvents(this.uploadWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown',\n        });\n        if (this.isForm) {\n            EventHandler.add(this.formElement, 'reset', this.resetForm, this);\n        }\n    };\n    Uploader.prototype.unWireEvents = function () {\n        EventHandler.remove(this.browseButton, 'click', this.browseButtonClick);\n        EventHandler.remove(this.element, 'change', this.onSelectFiles);\n        EventHandler.remove(document, 'click', this.removeFocus);\n        if (this.isForm) {\n            EventHandler.remove(this.formElement, 'reset', this.resetForm);\n        }\n        this.keyboardModule.destroy();\n    };\n    Uploader.prototype.resetForm = function () {\n        this.clearAll();\n    };\n    Uploader.prototype.keyActionHandler = function (e) {\n        var targetElement = e.target;\n        switch (e.action) {\n            case 'enter':\n                if (e.target === this.clearButton) {\n                    this.clearButtonClick();\n                }\n                else if (e.target === this.uploadButton) {\n                    this.uploadButtonClick();\n                }\n                else if (e.target === this.browseButton) {\n                    this.browseButtonClick();\n                }\n                else if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n                    var metaData = this.getCurrentMetaData(null, e);\n                    metaData.file.statusCode = '4';\n                    metaData.file.status = this.localizedTexts('pauseUpload');\n                    this.abortUpload(metaData, false);\n                }\n                else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n                    this.resumeUpload(this.getCurrentMetaData(null, e), e);\n                }\n                else if (targetElement.classList.contains(RETRY_ICON)) {\n                    var metaData = this.getCurrentMetaData(null, e);\n                    if (!isNullOrUndefined(metaData)) {\n                        metaData.file.statusCode = '1';\n                        metaData.file.status = this.localizedTexts('readyToUploadMessage');\n                        this.chunkUpload(metaData.file);\n                    }\n                    else {\n                        var target = e.target.parentElement;\n                        var fileData = this.filesData[this.fileList.indexOf(target)];\n                        this.retry(fileData);\n                    }\n                }\n                else {\n                    this.removeFiles(e);\n                    if (!targetElement.classList.contains(ABORT_ICON)) {\n                        this.browseButton.focus();\n                    }\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                break;\n        }\n    };\n    Uploader.prototype.getCurrentMetaData = function (fileInfo, e) {\n        var fileData;\n        var targetMetaData;\n        if (isNullOrUndefined(fileInfo)) {\n            var target = e.target.parentElement;\n            fileData = this.filesData[this.fileList.indexOf(target)];\n        }\n        else {\n            fileData = fileInfo;\n        }\n        for (var i = 0; i < this.uploadMetaData.length; i++) {\n            if (this.uploadMetaData[i].file.name === fileData.name) {\n                targetMetaData = this.uploadMetaData[i];\n            }\n        }\n        return targetMetaData;\n    };\n    Uploader.prototype.removeFocus = function () {\n        if (this.uploadWrapper && this.listParent && this.listParent.querySelector('.' + ICON_FOCUSED)) {\n            document.activeElement.blur();\n            this.listParent.querySelector('.' + ICON_FOCUSED).classList.remove(ICON_FOCUSED);\n        }\n    };\n    Uploader.prototype.browseButtonClick = function () {\n        this.element.click();\n    };\n    Uploader.prototype.uploadButtonClick = function () {\n        if (this.sequentialUpload) {\n            this.sequenceUpload(this.filesData);\n        }\n        else {\n            this.upload(this.filesData);\n        }\n    };\n    Uploader.prototype.clearButtonClick = function () {\n        this.clearAll();\n        /* istanbul ignore next */\n        if (this.sequentialUpload) {\n            this.count = -1;\n        }\n        this.actionCompleteCount = 0;\n    };\n    Uploader.prototype.bindDropEvents = function () {\n        if (this.dropZoneElement) {\n            EventHandler.add(this.dropZoneElement, 'drop', this.dropElement, this);\n            EventHandler.add(this.dropZoneElement, 'dragover', this.dragHover, this);\n            EventHandler.add(this.dropZoneElement, 'dragleave', this.onDragLeave, this);\n            EventHandler.add(this.dropZoneElement, 'paste', this.onPasteFile, this);\n        }\n    };\n    Uploader.prototype.unBindDropEvents = function () {\n        if (this.dropZoneElement) {\n            EventHandler.remove(this.dropZoneElement, 'drop', this.dropElement);\n            EventHandler.remove(this.dropZoneElement, 'dragover', this.dragHover);\n            EventHandler.remove(this.dropZoneElement, 'dragleave', this.onDragLeave);\n        }\n    };\n    Uploader.prototype.onDragLeave = function (e) {\n        this.dropZoneElement.classList.remove(DRAG_HOVER);\n    };\n    Uploader.prototype.dragHover = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        this.dropZoneElement.classList.add(DRAG_HOVER);\n        if (this.dropEffect !== 'Default') {\n            e.dataTransfer.dropEffect = this.dropEffect.toLowerCase();\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.dropElement = function (e) {\n        this.dropZoneElement.classList.remove(DRAG_HOVER);\n        this.onSelectFiles(e);\n        e.preventDefault();\n        e.stopPropagation();\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.onPasteFile = function (event) {\n        var item = event.clipboardData.items;\n        if (item.length !== 1) {\n            return;\n        }\n        var pasteFile = [].slice.call(item)[0];\n        if ((pasteFile.kind === 'file') && pasteFile.type.match('^image/')) {\n            this.renderSelectedFiles(event, [pasteFile.getAsFile()], false, true);\n        }\n    };\n    Uploader.prototype.getSelectedFiles = function (index) {\n        var data = [];\n        var liElement = this.fileList[index];\n        var allFiles = this.getFilesData();\n        var nameElements = +liElement.getAttribute('data-files-count');\n        var startIndex = 0;\n        for (var i = 0; i < index; i++) {\n            startIndex += (+this.fileList[i].getAttribute('data-files-count'));\n        }\n        for (var j = startIndex; j < (startIndex + nameElements); j++) {\n            data.push(allFiles[j]);\n        }\n        return data;\n    };\n    Uploader.prototype.removeFiles = function (args) {\n        if (!this.enabled) {\n            return;\n        }\n        var selectedElement = args.target.parentElement;\n        if (this.isBlazorSaveUrl) {\n            this.fileList = [].slice.call(this.uploadWrapper.querySelectorAll('li'));\n        }\n        var index = this.fileList.indexOf(selectedElement);\n        var liElement = this.fileList[index];\n        var formUpload = this.isFormUpload();\n        var fileData = formUpload ? this.getSelectedFiles(index) : this.getFilesInArray(this.filesData[index]);\n        if (isNullOrUndefined(fileData)) {\n            return;\n        }\n        if (args.target.classList.contains(ABORT_ICON) && !formUpload) {\n            fileData[0].statusCode = '5';\n            if (!isNullOrUndefined(liElement)) {\n                var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n                createSpinner({ target: spinnerTarget, width: '20px' });\n                showSpinner(spinnerTarget);\n            }\n            if (this.sequentialUpload) {\n                /* istanbul ignore next */\n                this.uploadSequential();\n            }\n            if (!(liElement.classList.contains(RESTRICT_RETRY))) {\n                this.checkActionComplete(true);\n            }\n        }\n        else {\n            this.remove(fileData, false, false, true, args);\n        }\n        this.element.value = '';\n        this.checkActionButtonStatus();\n    };\n    Uploader.prototype.removeFilesData = function (file, customTemplate) {\n        var index;\n        if (customTemplate) {\n            if (!this.showFileList) {\n                index = this.filesData.indexOf(file);\n                this.filesData.splice(index, 1);\n            }\n            return;\n        }\n        var selectedElement = this.getLiElement(file);\n        if (isNullOrUndefined(selectedElement)) {\n            return;\n        }\n        if (!this.isBlazorSaveUrl) {\n            detach(selectedElement);\n        }\n        index = this.fileList.indexOf(selectedElement);\n        this.fileList.splice(index, 1);\n        this.filesData.splice(index, 1);\n        if (!this.isBlazorSaveUrl) {\n            if (this.fileList.length === 0 && !isNullOrUndefined(this.listParent)) {\n                detach(this.listParent);\n                this.listParent = null;\n                this.removeActionButtons();\n            }\n            if (this.sequentialUpload) {\n                /* istanbul ignore next */\n                if (index <= this.count) {\n                    --this.count;\n                }\n            }\n        }\n        else {\n            // tslint:disable-next-line\n            this.interopAdaptor.invokeMethodAsync('removeFileData', index);\n        }\n    };\n    Uploader.prototype.removeUploadedFile = function (file, eventArgs, removeDirectly, custom) {\n        var _this = this;\n        var selectedFiles = file;\n        var ajax = new Ajax(this.asyncSettings.removeUrl, 'POST', true, null);\n        ajax.emitError = false;\n        var formData = new FormData();\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            if (_this.isServerBlazor) {\n                if (_this.currentRequestHeader) {\n                    _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n                }\n                if (_this.customFormDatas) {\n                    _this.updateFormData(formData, _this.customFormDatas);\n                }\n            }\n            if (!removeDirectly) {\n                _this.trigger('removing', eventArgs, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        e.cancel = true;\n                    }\n                    else {\n                        _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n                    }\n                });\n            }\n            else {\n                _this.removingEventCallback(eventArgs, formData, selectedFiles, file);\n            }\n        };\n        if (this.isServerBlazor) {\n            var name_1 = this.element.getAttribute('name');\n            if (!isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n                formData.append(name_1, selectedFiles.rawFile, selectedFiles.name);\n            }\n            else {\n                formData.append(name_1, selectedFiles.name);\n            }\n        }\n        ajax.onLoad = function (e) { _this.removeCompleted(e, selectedFiles, custom); return {}; };\n        /* istanbul ignore next */\n        ajax.onError = function (e) { _this.removeFailed(e, selectedFiles, custom); return {}; };\n        ajax.send(formData);\n    };\n    Uploader.prototype.removingEventCallback = function (eventArgs, formData, selectedFiles, file) {\n        /* istanbul ignore next */\n        var name = this.element.getAttribute('name');\n        var liElement = this.getLiElement(file);\n        if (!isNullOrUndefined(liElement) && (!isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON)) ||\n            !isNullOrUndefined(liElement.querySelector('.' + REMOVE_ICON)))) {\n            var spinnerTarget = void 0;\n            spinnerTarget = liElement.querySelector('.' + DELETE_ICON) ? liElement.querySelector('.' + DELETE_ICON) :\n                liElement.querySelector('.' + REMOVE_ICON);\n            createSpinner({ target: spinnerTarget, width: '20px' });\n            showSpinner(spinnerTarget);\n        }\n        if (!this.isServerBlazor) {\n            if (eventArgs.postRawFile && !isNullOrUndefined(selectedFiles.rawFile) && selectedFiles.rawFile !== '') {\n                formData.append(name, selectedFiles.rawFile, selectedFiles.name);\n            }\n            else {\n                formData.append(name, selectedFiles.name);\n            }\n            this.updateFormData(formData, eventArgs.customFormData);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateFormData = function (formData, customData) {\n        if (customData.length > 0 && customData[0]) {\n            var _loop_1 = function (i) {\n                var data = customData[i];\n                // tslint:disable-next-line\n                var value = Object.keys(data).map(function (e) {\n                    return data[e];\n                });\n                formData.append(Object.keys(data)[0], value);\n            };\n            for (var i = 0; i < customData.length; i++) {\n                _loop_1(i);\n            }\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateCustomheader = function (request, currentRequest) {\n        if (currentRequest.length > 0 && currentRequest[0]) {\n            var _loop_2 = function (i) {\n                var data = currentRequest[i];\n                // tslint:disable-next-line\n                var value = Object.keys(data).map(function (e) {\n                    return data[e];\n                });\n                request.setRequestHeader(Object.keys(data)[0], value);\n            };\n            for (var i = 0; i < currentRequest.length; i++) {\n                _loop_2(i);\n            }\n        }\n    };\n    Uploader.prototype.removeCompleted = function (e, files, customTemplate) {\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var args = {\n            e: e, response: response, operation: 'remove', file: this.updateStatus(files, this.localizedTexts('removedSuccessMessage'), '2')\n        };\n        this.trigger('success', args);\n        this.removeFilesData(files, customTemplate);\n        var index = this.uploadedFilesData.indexOf(files);\n        this.uploadedFilesData.splice(index, 1);\n        this.trigger('change', { files: this.uploadedFilesData });\n    };\n    Uploader.prototype.removeFailed = function (e, files, customTemplate) {\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var args = {\n            e: e, response: response, operation: 'remove', file: this.updateStatus(files, this.localizedTexts('removedFailedMessage'), '0')\n        };\n        if (!customTemplate) {\n            var index = this.filesData.indexOf(files);\n            var rootElement = this.fileList[index];\n            if (rootElement) {\n                var statusElement = rootElement.querySelector('.' + STATUS);\n                rootElement.classList.remove(UPLOAD_SUCCESS);\n                statusElement.classList.remove(UPLOAD_SUCCESS);\n                rootElement.classList.add(UPLOAD_FAILED);\n                statusElement.classList.add(UPLOAD_FAILED);\n            }\n            this.checkActionButtonStatus();\n        }\n        this.trigger('failure', args);\n        var liElement = this.getLiElement(files);\n        /* istanbul ignore next */\n        if (!isNullOrUndefined(liElement) && !isNullOrUndefined(liElement.querySelector('.' + DELETE_ICON))) {\n            var spinnerTarget = liElement.querySelector('.' + DELETE_ICON);\n            hideSpinner(spinnerTarget);\n            detach(liElement.querySelector('.e-spinner-pane'));\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getFilesFromFolder = function (event) {\n        this.filesEntries = [];\n        var items;\n        items = this.multiple ? event.dataTransfer.items : [event.dataTransfer.items[0]];\n        var validDirectoryUpload = this.checkDirectoryUpload(items);\n        if (!validDirectoryUpload) {\n            return;\n        }\n        var _loop_3 = function (i) {\n            // tslint:disable-next-line\n            var item = items[i].webkitGetAsEntry();\n            if (item.isFile) {\n                var files_2 = [];\n                // tslint:disable-next-line\n                (item).file(function (fileObj) {\n                    var path = item.fullPath;\n                    files_2.push({ 'path': path, 'file': fileObj });\n                });\n                this_1.renderSelectedFiles(event, files_2, true);\n            }\n            else if (item.isDirectory) {\n                this_1.traverseFileTree(item, event);\n            }\n        };\n        var this_1 = this;\n        for (var i = 0; i < items.length; i++) {\n            _loop_3(i);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.checkDirectoryUpload = function (items) {\n        for (var i = 0; items && i < items.length; i++) {\n            // tslint:disable-next-line\n            var item = items[i].webkitGetAsEntry();\n            if (item.isDirectory) {\n                return true;\n            }\n        }\n        return false;\n    };\n    // tslint:disable\n    /* istanbul ignore next */\n    Uploader.prototype.traverseFileTree = function (item, event) {\n        if (item.isFile) {\n            this.filesEntries.push(item);\n        }\n        else if (item.isDirectory) {\n            // tslint:disable-next-line\n            var directoryReader = item.createReader();\n            // tslint:disable-next-line\n            this.readFileFromDirectory(directoryReader, event);\n        }\n    };\n    // tslint:disable\n    /* istanbul ignore next */\n    Uploader.prototype.readFileFromDirectory = function (directoryReader, event) {\n        var _this = this;\n        // tslint:disable-next-line\n        directoryReader.readEntries(function (entries) {\n            for (var i = 0; i < entries.length; i++) {\n                _this.traverseFileTree(entries[i]);\n                // tslint:disable-next-line\n            }\n            ;\n            _this.pushFilesEntries(event);\n            if (entries.length) {\n                _this.readFileFromDirectory(directoryReader);\n            }\n        });\n    };\n    Uploader.prototype.pushFilesEntries = function (event) {\n        var _this = this;\n        var files = [];\n        var _loop_4 = function (i) {\n            // tslint:disable-next-line\n            this_2.filesEntries[i].file(function (fileObj) {\n                if (_this.filesEntries) {\n                    var path = _this.filesEntries[i].fullPath;\n                    files.push({ 'path': path, 'file': fileObj });\n                    if (i === _this.filesEntries.length - 1) {\n                        _this.filesEntries = [];\n                        _this.renderSelectedFiles(event, files, true);\n                    }\n                }\n            });\n        };\n        var this_2 = this;\n        for (var i = 0; i < this.filesEntries.length; i++) {\n            _loop_4(i);\n        }\n    };\n    // tslint:enable\n    Uploader.prototype.onSelectFiles = function (args) {\n        if (!this.enabled) {\n            return;\n        }\n        var targetFiles;\n        /* istanbul ignore next */\n        if (args.type === 'drop') {\n            if (this.directoryUpload) {\n                this.getFilesFromFolder(args);\n            }\n            else {\n                var files = this.sortFilesList = args.dataTransfer.files;\n                if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n                    this.element.files = files;\n                }\n                targetFiles = this.multiple ? this.sortFileList(files) : [files[0]];\n                this.renderSelectedFiles(args, targetFiles);\n            }\n        }\n        else {\n            targetFiles = [].slice.call(args.target.files);\n            this.renderSelectedFiles(args, targetFiles);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getBase64 = function (file) {\n        return new Promise(function (resolve, reject) {\n            var fileReader = new FileReader();\n            fileReader.readAsDataURL(file);\n            fileReader.onload = function () { return resolve(fileReader.result); };\n            fileReader.onerror = function (error) { return reject(error); };\n        });\n    };\n    /* istanbul ignore next */\n    /* tslint:ignore */\n    Uploader.prototype.renderSelectedFiles = function (args, \n    // tslint:disable-next-line\n    targetFiles, directory, paste) {\n        var _this = this;\n        this.base64String = [];\n        // tslint:disable-next-line\n        var eventArgs = {\n            event: args,\n            cancel: false,\n            filesData: [],\n            isModified: false,\n            modifiedFilesData: [],\n            progressInterval: '',\n            isCanceled: false,\n            currentRequest: null,\n            customFormData: null\n        };\n        /* istanbul ignore next */\n        if (targetFiles.length < 1) {\n            eventArgs.isCanceled = true;\n            this.trigger('selected', eventArgs);\n            return;\n        }\n        this.flag = true;\n        var fileData = [];\n        if (!this.multiple) {\n            this.clearData(true);\n            targetFiles = [targetFiles[0]];\n        }\n        for (var i = 0; i < targetFiles.length; i++) {\n            var file = directory ? targetFiles[i].file : targetFiles[i];\n            this.updateInitialFileDetails(args, targetFiles, file, i, fileData, directory, paste);\n        }\n        eventArgs.filesData = fileData;\n        if (this.allowedExtensions.indexOf('*') > -1) {\n            this.allTypes = true;\n        }\n        if (!this.allTypes) {\n            fileData = this.checkExtension(fileData);\n        }\n        this.trigger('selected', eventArgs, function (eventArgs) {\n            _this._internalRenderSelect(eventArgs, fileData);\n        });\n    };\n    Uploader.prototype.updateInitialFileDetails = function (args, \n    // tslint:disable-next-line\n    targetFiles, file, i, fileData, directory, paste) {\n        var fileName = directory ? targetFiles[i].path.substring(1, targetFiles[i].path.length) : paste ?\n            getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name) :\n            this.directoryUpload ? targetFiles[i].webkitRelativePath : file.name;\n        var fileDetails = {\n            name: fileName,\n            rawFile: file,\n            size: file.size,\n            status: this.localizedTexts('readyToUploadMessage'),\n            type: this.getFileType(file.name),\n            validationMessages: this.validatedFileSize(file.size),\n            statusCode: '1',\n            id: getUniqueID(file.name.substring(0, file.name.lastIndexOf('.'))) + '.' + this.getFileType(file.name)\n        };\n        /* istanbul ignore next */\n        if (paste) {\n            fileDetails.fileSource = 'paste';\n        }\n        fileDetails.status = fileDetails.validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n            fileDetails.validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : fileDetails.status;\n        if (fileDetails.validationMessages.minSize !== '' || fileDetails.validationMessages.maxSize !== '') {\n            fileDetails.statusCode = '0';\n            this.checkActionComplete(true);\n        }\n        fileData.push(fileDetails);\n    };\n    Uploader.prototype._internalRenderSelect = function (eventArgs, fileData) {\n        if (!eventArgs.cancel) {\n            /* istanbul ignore next */\n            if (this.isServerBlazor) {\n                this.currentRequestHeader = eventArgs.currentRequest;\n                this.customFormDatas = eventArgs.customFormData;\n            }\n            this.selectedFiles = fileData;\n            this.btnTabIndex = this.disableKeyboardNavigation ? '-1' : '0';\n            if (this.showFileList) {\n                if (eventArgs.isModified && eventArgs.modifiedFilesData.length > 0) {\n                    for (var j = 0; j < eventArgs.modifiedFilesData.length; j++) {\n                        for (var k = 0; k < fileData.length; k++) {\n                            if (eventArgs.modifiedFilesData[j].id === fileData[k].id) {\n                                eventArgs.modifiedFilesData[j].rawFile = fileData[k].rawFile;\n                            }\n                        }\n                    }\n                    var dataFiles = this.allTypes ? eventArgs.modifiedFilesData :\n                        this.checkExtension(eventArgs.modifiedFilesData);\n                    this.updateSortedFileList(dataFiles);\n                    this.filesData = dataFiles;\n                    if (!this.isForm || this.allowUpload()) {\n                        this.checkAutoUpload(dataFiles);\n                    }\n                }\n                else {\n                    this.createFileList(fileData, true);\n                    if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n                        this.filesData = this.filesData.concat(fileData);\n                    }\n                    if (!this.isForm || this.allowUpload()) {\n                        if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n                            this.checkAutoUpload(fileData);\n                        }\n                    }\n                }\n                if (!isNullOrUndefined(eventArgs.progressInterval) && eventArgs.progressInterval !== '') {\n                    this.progressInterval = eventArgs.progressInterval;\n                }\n            }\n            else {\n                this.filesData = this.filesData.concat(fileData);\n                if (this.isBlazorSaveUrl) {\n                    // tslint:disable-next-line\n                    this.interopAdaptor.invokeMethodAsync('updateServerFileData', this.filesData, this.isForm);\n                }\n                if (this.autoUpload) {\n                    this.upload(this.filesData, true);\n                }\n            }\n            this.raiseActionComplete();\n        }\n    };\n    Uploader.prototype.allowUpload = function () {\n        var allowFormUpload = false;\n        if (this.isForm && (!isNullOrUndefined(this.asyncSettings.saveUrl) && this.asyncSettings.saveUrl !== '')) {\n            allowFormUpload = true;\n        }\n        return allowFormUpload;\n    };\n    Uploader.prototype.isFormUpload = function () {\n        var isFormUpload = false;\n        if (this.isForm && ((isNullOrUndefined(this.asyncSettings.saveUrl) || this.asyncSettings.saveUrl === '')\n            && (isNullOrUndefined(this.asyncSettings.removeUrl) || this.asyncSettings.removeUrl === ''))) {\n            isFormUpload = true;\n        }\n        return isFormUpload;\n    };\n    Uploader.prototype.clearData = function (singleUpload) {\n        if (!isNullOrUndefined(this.listParent) && !(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n            detach(this.listParent);\n            this.listParent = null;\n        }\n        if (this.browserName !== 'msie' && !singleUpload) {\n            this.element.value = '';\n        }\n        this.fileList = [];\n        this.filesData = [];\n        if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n            // tslint:disable-next-line\n            this.interopAdaptor.invokeMethodAsync('clearAll');\n        }\n        else {\n            this.removeActionButtons();\n        }\n    };\n    Uploader.prototype.updateSortedFileList = function (filesData) {\n        var previousListClone = this.createElement('div', { id: 'clonewrapper' });\n        var added = -1;\n        var removedList;\n        if (this.listParent) {\n            for (var i = 0; i < this.listParent.querySelectorAll('li').length; i++) {\n                var liElement = this.listParent.querySelectorAll('li')[i];\n                previousListClone.appendChild(liElement.cloneNode(true));\n            }\n            removedList = this.listParent.querySelectorAll('li');\n            for (var _i = 0, removedList_1 = removedList; _i < removedList_1.length; _i++) {\n                var item = removedList_1[_i];\n                detach(item);\n            }\n            this.removeActionButtons();\n            var oldList = [].slice.call(previousListClone.childNodes);\n            detach(this.listParent);\n            this.listParent = null;\n            this.fileList = [];\n            this.createParentUL();\n            for (var index = 0; index < filesData.length; index++) {\n                for (var j = 0; j < this.filesData.length; j++) {\n                    if (this.filesData[j].name === filesData[index].name) {\n                        this.listParent.appendChild(oldList[j]);\n                        EventHandler.add(oldList[j].querySelector('.e-icons'), 'click', this.removeFiles, this);\n                        this.fileList.push(oldList[j]);\n                        added = index;\n                    }\n                }\n                if (added !== index) {\n                    this.createFileList([filesData[index]]);\n                }\n            }\n        }\n        else {\n            this.createFileList(filesData);\n        }\n    };\n    Uploader.prototype.isBlank = function (str) {\n        return (!str || /^\\s*$/.test(str));\n    };\n    Uploader.prototype.checkExtension = function (files) {\n        var dropFiles = files;\n        if (!this.isBlank(this.allowedExtensions)) {\n            var allowedExtensions = [];\n            var extensions = this.allowedExtensions.split(',');\n            for (var _i = 0, extensions_1 = extensions; _i < extensions_1.length; _i++) {\n                var extension = extensions_1[_i];\n                allowedExtensions.push(extension.trim().toLocaleLowerCase());\n            }\n            for (var i = 0; i < files.length; i++) {\n                if (allowedExtensions.indexOf(('.' + files[i].type).toLocaleLowerCase()) === -1) {\n                    files[i].status = this.localizedTexts('invalidFileType');\n                    files[i].statusCode = '0';\n                }\n            }\n        }\n        return dropFiles;\n    };\n    Uploader.prototype.validatedFileSize = function (fileSize) {\n        var minSizeError = '';\n        var maxSizeError = '';\n        if (fileSize < this.minFileSize) {\n            minSizeError = this.localizedTexts('invalidMinFileSize');\n        }\n        else if (fileSize > this.maxFileSize) {\n            maxSizeError = this.localizedTexts('invalidMaxFileSize');\n        }\n        else {\n            minSizeError = '';\n            maxSizeError = '';\n        }\n        var errorMessage = { minSize: minSizeError, maxSize: maxSizeError };\n        return errorMessage;\n    };\n    Uploader.prototype.isPreLoadFile = function (fileData) {\n        var isPreload = false;\n        for (var i = 0; i < this.files.length; i++) {\n            if (this.files[i].name === fileData.name.slice(0, fileData.name.lastIndexOf('.')) && this.files[i].type === fileData.type) {\n                isPreload = true;\n            }\n        }\n        return isPreload;\n    };\n    Uploader.prototype.createCustomfileList = function (fileData) {\n        this.createParentUL();\n        resetBlazorTemplate(this.element.id + 'Template', 'Template');\n        for (var _i = 0, fileData_1 = fileData; _i < fileData_1.length; _i++) {\n            var listItem = fileData_1[_i];\n            var liElement = this.createElement('li', { className: FILE, attrs: { 'data-file-name': listItem.name } });\n            this.uploadTemplateFn = this.templateComplier(this.template);\n            var fromElements = [].slice.call(this.uploadTemplateFn(listItem, null, null, this.element.id + 'Template', this.isStringTemplate));\n            var index = fileData.indexOf(listItem);\n            append(fromElements, liElement);\n            var eventArgs = {\n                element: liElement,\n                fileInfo: listItem,\n                index: index,\n                isPreload: this.isPreLoadFile(listItem)\n            };\n            var eventsArgs = {\n                element: liElement,\n                fileInfo: listItem,\n                index: index,\n                isPreload: this.isPreLoadFile(listItem)\n            };\n            this.trigger('rendering', eventArgs);\n            this.trigger('fileListRendering', eventsArgs);\n            this.listParent.appendChild(liElement);\n            this.fileList.push(liElement);\n        }\n        updateBlazorTemplate(this.element.id + 'Template', 'Template', this, false);\n    };\n    Uploader.prototype.createParentUL = function () {\n        if (isNullOrUndefined(this.listParent)) {\n            this.listParent = this.createElement('ul', { className: LIST_PARENT });\n            this.uploadWrapper.appendChild(this.listParent);\n        }\n    };\n    Uploader.prototype.formFileList = function (fileData, files) {\n        var fileList = this.createElement('li', { className: FILE });\n        fileList.setAttribute('data-files-count', fileData.length + '');\n        var fileContainer = this.createElement('span', { className: TEXT_CONTAINER });\n        var statusMessage;\n        for (var _i = 0, fileData_2 = fileData; _i < fileData_2.length; _i++) {\n            var listItem = fileData_2[_i];\n            var fileNameEle = this.createElement('span', { className: FILE_NAME });\n            fileNameEle.innerHTML = this.getFileNameOnly(listItem.name);\n            var fileTypeEle = this.createElement('span', { className: FILE_TYPE });\n            fileTypeEle.innerHTML = '.' + this.getFileType(listItem.name);\n            if (!this.enableRtl) {\n                fileContainer.appendChild(fileNameEle);\n                fileContainer.appendChild(fileTypeEle);\n            }\n            else {\n                var rtlContainer = this.createElement('span', { className: RTL_CONTAINER });\n                rtlContainer.appendChild(fileTypeEle);\n                rtlContainer.appendChild(fileNameEle);\n                fileContainer.appendChild(rtlContainer);\n            }\n            this.truncateName(fileNameEle);\n            statusMessage = this.formValidateFileInfo(listItem, fileList);\n        }\n        fileList.appendChild(fileContainer);\n        this.setListToFileInfo(fileData, fileList);\n        var index = this.listParent.querySelectorAll('li').length;\n        var infoEle = this.createElement('span');\n        if (fileList.classList.contains(INVALID_FILE)) {\n            infoEle.classList.add(STATUS);\n            infoEle.classList.add(INVALID_FILE);\n            infoEle.innerText = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n        }\n        else {\n            infoEle.classList.add(fileData.length > 1 ? INFORMATION : FILE_SIZE);\n            infoEle.innerText = fileData.length > 1 ? this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , '\n                + this.localizedTexts('size') + ': ' +\n                this.bytesToSize(this.getFileSize(fileData)) : this.bytesToSize(fileData[0].size);\n            this.createFormInput(fileData);\n        }\n        fileContainer.appendChild(infoEle);\n        if (isNullOrUndefined(fileList.querySelector('.e-icons'))) {\n            var iconElement = this.createElement('span', { className: 'e-icons', attrs: { 'tabindex': this.btnTabIndex } });\n            /* istanbul ignore next */\n            if (this.browserName === 'msie') {\n                iconElement.classList.add('e-msie');\n            }\n            iconElement.setAttribute('title', this.localizedTexts('remove'));\n            fileList.appendChild(fileContainer);\n            fileList.appendChild(iconElement);\n            EventHandler.add(iconElement, 'click', this.removeFiles, this);\n            iconElement.classList.add(REMOVE_ICON);\n        }\n        var eventArgs = {\n            element: fileList,\n            fileInfo: this.mergeFileInfo(fileData, fileList),\n            index: index,\n            isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n        };\n        var eventsArgs = {\n            element: fileList,\n            fileInfo: this.mergeFileInfo(fileData, fileList),\n            index: index,\n            isPreload: this.isPreLoadFile(this.mergeFileInfo(fileData, fileList))\n        };\n        this.trigger('rendering', eventArgs);\n        this.trigger('fileListRendering', eventsArgs);\n        this.listParent.appendChild(fileList);\n        this.fileList.push(fileList);\n    };\n    Uploader.prototype.formValidateFileInfo = function (listItem, fileList) {\n        var statusMessage = listItem.status;\n        var validationMessages = this.validatedFileSize(listItem.size);\n        if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n            this.addInvalidClass(fileList);\n            statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n                validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n        }\n        var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n        if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n            this.addInvalidClass(fileList);\n            statusMessage = typeValidationMessage;\n        }\n        return statusMessage;\n    };\n    Uploader.prototype.addInvalidClass = function (fileList) {\n        fileList.classList.add(INVALID_FILE);\n    };\n    Uploader.prototype.createFormInput = function (fileData) {\n        var inputElement = this.element.cloneNode(true);\n        inputElement.classList.add(HIDDEN_INPUT);\n        for (var _i = 0, fileData_3 = fileData; _i < fileData_3.length; _i++) {\n            var listItem = fileData_3[_i];\n            listItem.input = inputElement;\n        }\n        inputElement.setAttribute('name', this.uploaderName);\n        this.uploadWrapper.querySelector('.' + INPUT_WRAPPER).appendChild(inputElement);\n        if (this.browserName !== 'msie' && this.browserName !== 'edge') {\n            this.element.value = '';\n        }\n    };\n    Uploader.prototype.getFileSize = function (fileData) {\n        var fileSize = 0;\n        for (var _i = 0, fileData_4 = fileData; _i < fileData_4.length; _i++) {\n            var file = fileData_4[_i];\n            fileSize += file.size;\n        }\n        return fileSize;\n    };\n    Uploader.prototype.mergeFileInfo = function (fileData, fileList) {\n        var result = {\n            name: '',\n            rawFile: '',\n            size: 0,\n            status: '',\n            type: '',\n            validationMessages: { minSize: '', maxSize: '' },\n            statusCode: '1',\n            list: fileList\n        };\n        var fileNames = [];\n        var type = '';\n        for (var _i = 0, fileData_5 = fileData; _i < fileData_5.length; _i++) {\n            var listItem = fileData_5[_i];\n            fileNames.push(listItem.name);\n            type = listItem.type;\n        }\n        result.name = fileNames.join(', ');\n        result.size = this.getFileSize(fileData);\n        result.type = type;\n        result.status = this.statusForFormUpload(fileData, fileList);\n        return result;\n    };\n    Uploader.prototype.statusForFormUpload = function (fileData, fileList) {\n        var isValid = true;\n        var statusMessage;\n        for (var _i = 0, fileData_6 = fileData; _i < fileData_6.length; _i++) {\n            var listItem = fileData_6[_i];\n            statusMessage = listItem.status;\n            var validationMessages = this.validatedFileSize(listItem.size);\n            if (validationMessages.minSize !== '' || validationMessages.maxSize !== '') {\n                isValid = false;\n                statusMessage = validationMessages.minSize !== '' ? this.localizedTexts('invalidMinFileSize') :\n                    validationMessages.maxSize !== '' ? this.localizedTexts('invalidMaxFileSize') : statusMessage;\n            }\n            var typeValidationMessage = this.checkExtension(this.getFilesInArray(listItem))[0].status;\n            if (typeValidationMessage === this.localizedTexts('invalidFileType')) {\n                isValid = false;\n                statusMessage = typeValidationMessage;\n            }\n        }\n        if (!isValid) {\n            fileList.classList.add(INVALID_FILE);\n            statusMessage = fileData.length > 1 ? this.localizedTexts('invalidFileSelection') : statusMessage;\n        }\n        else {\n            statusMessage = this.localizedTexts('totalFiles') + ': ' + fileData.length + ' , '\n                + this.localizedTexts('size') + ': ' +\n                this.bytesToSize(this.getFileSize(fileData));\n        }\n        return statusMessage;\n    };\n    Uploader.prototype.formCustomFileList = function (fileData, files) {\n        this.createParentUL();\n        resetBlazorTemplate(this.element.id + 'Template', 'Template');\n        var fileList = this.createElement('li', { className: FILE });\n        fileList.setAttribute('data-files-count', fileData.length + '');\n        this.setListToFileInfo(fileData, fileList);\n        var result = this.mergeFileInfo(fileData, fileList);\n        fileList.setAttribute('data-file-name', result.name);\n        this.uploadTemplateFn = this.templateComplier(this.template);\n        var fromElements = [].slice.call(this.uploadTemplateFn(result, null, null, this.element.id + 'Template', this.isStringTemplate));\n        var index = this.listParent.querySelectorAll('li').length;\n        append(fromElements, fileList);\n        if (!fileList.classList.contains(INVALID_FILE)) {\n            this.createFormInput(fileData);\n        }\n        var eventArgs = {\n            element: fileList,\n            fileInfo: result,\n            index: index,\n            isPreload: this.isPreLoadFile(result)\n        };\n        var eventsArgs = {\n            element: fileList,\n            fileInfo: result,\n            index: index,\n            isPreload: this.isPreLoadFile(result)\n        };\n        this.trigger('rendering', eventArgs);\n        this.trigger('fileListRendering', eventsArgs);\n        this.listParent.appendChild(fileList);\n        this.fileList.push(fileList);\n        updateBlazorTemplate(this.element.id + 'Template', 'Template', this, false);\n    };\n    /**\n     * Create the file list for specified files data.\n     * @param { FileInfo[] } fileData - specifies the files data for file list creation.\n     * @returns void\n     */\n    Uploader.prototype.createFileList = function (fileData, isSelectedFile) {\n        if (this.isBlazorSaveUrl || this.isBlazorTemplate) {\n            var fileListData = (isSelectedFile) ? this.filesData = this.filesData.concat(fileData) : fileData;\n            // tslint:disable-next-line\n            this.interopAdaptor.invokeMethodAsync('createFileList', fileListData, this.isForm);\n        }\n        else {\n            this.createParentUL();\n            if (this.template !== '' && !isNullOrUndefined(this.template)) {\n                if (this.isFormUpload()) {\n                    this.uploadWrapper.classList.add(FORM_UPLOAD);\n                    this.formCustomFileList(fileData, this.element.files);\n                }\n                else {\n                    this.createCustomfileList(fileData);\n                }\n            }\n            else if (this.isFormUpload()) {\n                this.uploadWrapper.classList.add(FORM_UPLOAD);\n                this.formFileList(fileData, this.element.files);\n            }\n            else {\n                for (var _i = 0, fileData_7 = fileData; _i < fileData_7.length; _i++) {\n                    var listItem = fileData_7[_i];\n                    var liElement = this.createElement('li', {\n                        className: FILE,\n                        attrs: { 'data-file-name': listItem.name, 'data-files-count': '1' }\n                    });\n                    var textContainer = this.createElement('span', { className: TEXT_CONTAINER });\n                    var textElement = this.createElement('span', { className: FILE_NAME, attrs: { 'title': listItem.name } });\n                    textElement.innerHTML = this.getFileNameOnly(listItem.name);\n                    var fileExtension = this.createElement('span', { className: FILE_TYPE });\n                    fileExtension.innerHTML = '.' + this.getFileType(listItem.name);\n                    if (!this.enableRtl) {\n                        textContainer.appendChild(textElement);\n                        textContainer.appendChild(fileExtension);\n                    }\n                    else {\n                        var rtlContainer = this.createElement('span', { className: RTL_CONTAINER });\n                        rtlContainer.appendChild(fileExtension);\n                        rtlContainer.appendChild(textElement);\n                        textContainer.appendChild(rtlContainer);\n                    }\n                    var fileSize = this.createElement('span', { className: FILE_SIZE });\n                    fileSize.innerHTML = this.bytesToSize(listItem.size);\n                    textContainer.appendChild(fileSize);\n                    var statusElement = this.createElement('span', { className: STATUS });\n                    textContainer.appendChild(statusElement);\n                    statusElement.innerHTML = listItem.status;\n                    liElement.appendChild(textContainer);\n                    var iconElement = this.createElement('span', { className: ' e-icons',\n                        attrs: { 'tabindex': this.btnTabIndex } });\n                    /* istanbul ignore next */\n                    if (this.browserName === 'msie') {\n                        iconElement.classList.add('e-msie');\n                    }\n                    iconElement.setAttribute('title', this.localizedTexts('remove'));\n                    liElement.appendChild(iconElement);\n                    EventHandler.add(iconElement, 'click', this.removeFiles, this);\n                    if (listItem.statusCode === '2') {\n                        statusElement.classList.add(UPLOAD_SUCCESS);\n                        iconElement.classList.add(DELETE_ICON);\n                        iconElement.setAttribute('title', this.localizedTexts('delete'));\n                    }\n                    else if (listItem.statusCode !== '1') {\n                        statusElement.classList.remove(UPLOAD_SUCCESS);\n                        statusElement.classList.add(VALIDATION_FAILS);\n                    }\n                    if (this.autoUpload && listItem.statusCode === '1' && this.asyncSettings.saveUrl !== '') {\n                        statusElement.innerHTML = '';\n                    }\n                    if (!iconElement.classList.contains(DELETE_ICON)) {\n                        iconElement.classList.add(REMOVE_ICON);\n                    }\n                    var index = fileData.indexOf(listItem);\n                    var eventArgs = {\n                        element: liElement,\n                        fileInfo: listItem,\n                        index: index,\n                        isPreload: this.isPreLoadFile(listItem)\n                    };\n                    var eventsArgs = {\n                        element: liElement,\n                        fileInfo: listItem,\n                        index: index,\n                        isPreload: this.isPreLoadFile(listItem)\n                    };\n                    this.trigger('rendering', eventArgs);\n                    this.trigger('fileListRendering', eventsArgs);\n                    this.listParent.appendChild(liElement);\n                    this.fileList.push(liElement);\n                    this.truncateName(textElement);\n                }\n            }\n        }\n    };\n    Uploader.prototype.getSlicedName = function (nameElement) {\n        var text;\n        text = nameElement.textContent;\n        nameElement.dataset.tail = text.slice(text.length - 10);\n    };\n    Uploader.prototype.setListToFileInfo = function (fileData, fileList) {\n        for (var _i = 0, fileData_8 = fileData; _i < fileData_8.length; _i++) {\n            var listItem = fileData_8[_i];\n            listItem.list = fileList;\n        }\n    };\n    Uploader.prototype.truncateName = function (name) {\n        var nameElement = name;\n        if (this.browserName !== 'edge' && nameElement.offsetWidth < nameElement.scrollWidth) {\n            this.getSlicedName(nameElement);\n            /* istanbul ignore next */\n        }\n        else if (nameElement.offsetWidth + 1 < nameElement.scrollWidth) {\n            this.getSlicedName(nameElement);\n        }\n    };\n    Uploader.prototype.getFileType = function (name) {\n        var extension;\n        var index = name.lastIndexOf('.');\n        if (index >= 0) {\n            extension = name.substring(index + 1);\n        }\n        return extension ? extension : '';\n    };\n    Uploader.prototype.getFileNameOnly = function (name) {\n        var type = this.getFileType(name);\n        var names = name.split('.' + type);\n        return type = names[0];\n    };\n    Uploader.prototype.setInitialAttributes = function () {\n        if (this.initialAttr.accept) {\n            this.element.setAttribute('accept', this.initialAttr.accept);\n        }\n        if (this.initialAttr.disabled) {\n            this.element.setAttribute('disabled', 'disabled');\n        }\n        if (this.initialAttr.multiple) {\n            var newAttr = document.createAttribute('multiple');\n            this.element.setAttributeNode(newAttr);\n        }\n    };\n    Uploader.prototype.filterfileList = function (files) {\n        var filterFiles = [];\n        var li;\n        for (var i = 0; i < files.length; i++) {\n            li = this.getLiElement(files[i]);\n            if (!li.classList.contains(UPLOAD_SUCCESS)) {\n                filterFiles.push(files[i]);\n            }\n        }\n        return filterFiles;\n    };\n    Uploader.prototype.updateStatus = function (files, status, statusCode, updateLiStatus) {\n        if (updateLiStatus === void 0) { updateLiStatus = true; }\n        if (!(status === '' || isNullOrUndefined(status)) && !(statusCode === '' || isNullOrUndefined(statusCode))) {\n            if (this.isBlazorSaveUrl) {\n                for (var i = 0; i < this.filesData.length; i++) {\n                    if (this.filesData[i].name === files.name) {\n                        this.filesData[i].status = status;\n                        this.filesData[i].statusCode = statusCode;\n                    }\n                }\n            }\n            else {\n                files.status = status;\n                files.statusCode = statusCode;\n            }\n        }\n        if (updateLiStatus) {\n            var li = this.getLiElement(files);\n            if (!isNullOrUndefined(li)) {\n                if (!isNullOrUndefined(li.querySelector('.' + STATUS)) && !((status === '' || isNullOrUndefined(status)))) {\n                    li.querySelector('.' + STATUS).textContent = status;\n                }\n            }\n        }\n        return files;\n    };\n    Uploader.prototype.getLiElement = function (files) {\n        var index;\n        for (var i = 0; i < this.filesData.length; i++) {\n            if (this.filesData[i].name === files.name) {\n                index = i;\n            }\n        }\n        return this.fileList[index];\n    };\n    Uploader.prototype.createProgressBar = function (liElement) {\n        var progressbarWrapper = this.createElement('span', { className: PROGRESS_WRAPPER });\n        var progressBar = this.createElement('progressbar', { className: PROGRESSBAR, attrs: { value: '0', max: '100' } });\n        var progressbarInnerWrapper = this.createElement('span', { className: PROGRESS_INNER_WRAPPER });\n        progressBar.setAttribute('style', 'width: 0%');\n        var progressbarText = this.createElement('span', { className: PROGRESSBAR_TEXT });\n        progressbarText.textContent = '0%';\n        progressbarInnerWrapper.appendChild(progressBar);\n        progressbarWrapper.appendChild(progressbarInnerWrapper);\n        progressbarWrapper.appendChild(progressbarText);\n        liElement.querySelector('.' + TEXT_CONTAINER).appendChild(progressbarWrapper);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.updateProgressbar = function (e, li) {\n        if (!isNaN(Math.round((e.loaded / e.total) * 100)) && !isNullOrUndefined(li.querySelector('.' + PROGRESSBAR))) {\n            if (!isNullOrUndefined(this.progressInterval) && this.progressInterval !== '') {\n                var value = (Math.round((e.loaded / e.total) * 100)) % parseInt(this.progressInterval, 10);\n                if (value === 0 || value === 100) {\n                    this.changeProgressValue(li, Math.round((e.loaded / e.total) * 100).toString() + '%');\n                }\n            }\n            else {\n                this.changeProgressValue(li, Math.round((e.loaded / e.total) * 100).toString() + '%');\n            }\n        }\n    };\n    Uploader.prototype.changeProgressValue = function (li, progressValue) {\n        li.querySelector('.' + PROGRESSBAR).setAttribute('style', 'width:' + progressValue);\n        li.querySelector('.' + PROGRESSBAR_TEXT).textContent = progressValue;\n    };\n    Uploader.prototype.uploadInProgress = function (e, files, customUI, request) {\n        var li = this.getLiElement(files);\n        if (isNullOrUndefined(li) && (!customUI)) {\n            return;\n        }\n        if (!isNullOrUndefined(li)) {\n            /* istanbul ignore next */\n            if (files.statusCode === '5') {\n                this.cancelUploadingFile(files, e, request, li);\n            }\n            if (!(li.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0) && li.querySelector('.' + STATUS)) {\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_INPROGRESS);\n                this.createProgressBar(li);\n                this.updateProgressBarClasses(li, UPLOAD_INPROGRESS);\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n            }\n            this.updateProgressbar(e, li);\n            var iconEle = li.querySelector('.' + REMOVE_ICON);\n            if (!isNullOrUndefined(iconEle)) {\n                iconEle.classList.add(ABORT_ICON, UPLOAD_INPROGRESS);\n                iconEle.setAttribute('title', this.localizedTexts('abort'));\n                iconEle.classList.remove(REMOVE_ICON);\n            }\n        }\n        else {\n            this.cancelUploadingFile(files, e, request);\n        }\n        var args = { e: e, operation: 'upload', file: this.updateStatus(files, this.localizedTexts('inProgress'), '3') };\n        this.trigger('progress', args);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.cancelUploadingFile = function (files, e, request, li) {\n        var _this = this;\n        if (files.statusCode === '5') {\n            var eventArgs = {\n                event: e,\n                fileData: files,\n                cancel: false\n            };\n            this.trigger('canceling', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    files.statusCode = '3';\n                    if (!isNullOrUndefined(li)) {\n                        var spinnerTarget = li.querySelector('.' + ABORT_ICON);\n                        if (!isNullOrUndefined(spinnerTarget)) {\n                            hideSpinner(spinnerTarget);\n                            detach(li.querySelector('.e-spinner-pane'));\n                        }\n                    }\n                }\n                else {\n                    request.emitError = false;\n                    request.httpRequest.abort();\n                    var formData = new FormData();\n                    if (files.statusCode === '5') {\n                        var name_2 = _this.element.getAttribute('name');\n                        formData.append(name_2, files.name);\n                        formData.append('cancel-uploading', files.name);\n                        var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n                        ajax.emitError = false;\n                        ajax.onLoad = function (e) { _this.removecanceledFile(e, files); return {}; };\n                        ajax.send(formData);\n                    }\n                }\n            });\n        }\n    };\n    Uploader.prototype.removecanceledFile = function (e, file) {\n        var liElement = this.getLiElement(file);\n        if (liElement.querySelector('.' + RETRY_ICON) || isNullOrUndefined(liElement.querySelector('.' + ABORT_ICON))) {\n            return;\n        }\n        this.updateStatus(file, this.localizedTexts('fileUploadCancel'), '5');\n        this.renderFailureState(e, file, liElement);\n        var spinnerTarget = liElement.querySelector('.' + REMOVE_ICON);\n        if (!isNullOrUndefined(liElement)) {\n            hideSpinner(spinnerTarget);\n            detach(liElement.querySelector('.e-spinner-pane'));\n        }\n        var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n        var args = { event: e, response: requestResponse, operation: 'cancel', file: file };\n        this.trigger('success', args);\n    };\n    Uploader.prototype.renderFailureState = function (e, file, liElement) {\n        var _this = this;\n        this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n        this.removeProgressbar(liElement, 'failure');\n        if (!isNullOrUndefined(liElement.querySelector('.e-file-status'))) {\n            liElement.querySelector('.e-file-status').classList.add(UPLOAD_FAILED);\n        }\n        var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n        if (isNullOrUndefined(deleteIcon)) {\n            return;\n        }\n        deleteIcon.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n        deleteIcon.classList.add(REMOVE_ICON);\n        deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n        this.pauseButton = this.createElement('span', { className: 'e-icons e-file-reload-btn', attrs: { 'tabindex': this.btnTabIndex } });\n        deleteIcon.parentElement.insertBefore(this.pauseButton, deleteIcon);\n        this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n        var retryElement = liElement.querySelector('.' + RETRY_ICON);\n        /* istanbul ignore next */\n        retryElement.addEventListener('click', function (e) { _this.reloadcanceledFile(e, file, liElement, false); }, false);\n    };\n    Uploader.prototype.reloadcanceledFile = function (e, file, liElement, custom) {\n        file.statusCode = '1';\n        file.status = this.localizedTexts('readyToUploadMessage');\n        if (!custom) {\n            liElement.querySelector('.' + STATUS).classList.remove(UPLOAD_FAILED);\n            if (!isNullOrUndefined(liElement.querySelector('.' + RETRY_ICON))) {\n                detach(liElement.querySelector('.' + RETRY_ICON));\n            }\n            this.pauseButton = null;\n        }\n        /* istanbul ignore next */\n        liElement.classList.add(RESTRICT_RETRY);\n        this.upload([file]);\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.uploadComplete = function (e, file, customUI) {\n        var status = e.target;\n        if (status.readyState === 4 && status.status >= 200 && status.status <= 299) {\n            var li = this.getLiElement(file);\n            if (isNullOrUndefined(li) && (!customUI || isNullOrUndefined(customUI))) {\n                return;\n            }\n            if (!isNullOrUndefined(li)) {\n                this.updateProgressBarClasses(li, UPLOAD_SUCCESS);\n                this.removeProgressbar(li, 'success');\n                var iconEle = li.querySelector('.' + ABORT_ICON);\n                if (!isNullOrUndefined(iconEle)) {\n                    iconEle.classList.add(DELETE_ICON);\n                    iconEle.setAttribute('title', this.localizedTexts('delete'));\n                    iconEle.classList.remove(ABORT_ICON);\n                    iconEle.classList.remove(UPLOAD_INPROGRESS);\n                }\n            }\n            this.raiseSuccessEvent(e, file);\n        }\n        else {\n            this.uploadFailed(e, file);\n        }\n    };\n    Uploader.prototype.getResponse = function (e) {\n        // tslint:disable-next-line\n        var target = e.currentTarget;\n        var response = {\n            readyState: target.readyState,\n            statusCode: target.status,\n            statusText: target.statusText,\n            headers: target.getAllResponseHeaders(),\n            withCredentials: target.withCredentials\n        };\n        return response;\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverRemoveIconBindEvent = function () {\n        if (this.uploadWrapper && this.isBlazorSaveUrl) {\n            var iconElement = [].slice.call(this.uploadWrapper.querySelectorAll('ul li'));\n            for (var i = 0; i < iconElement.length; i++) {\n                var removeIconEle = (iconElement[i]) ? iconElement[i].querySelector('.e-icons') : null;\n                if (removeIconEle) {\n                    EventHandler.remove(removeIconEle, 'click', this.removeFiles);\n                    EventHandler.add(removeIconEle, 'click', this.removeFiles, this);\n                }\n            }\n        }\n    };\n    Uploader.prototype.raiseSuccessEvent = function (e, file) {\n        var _this = this;\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var statusMessage = this.localizedTexts('uploadSuccessMessage');\n        var args = {\n            e: e, response: response, operation: 'upload', file: this.updateStatus(file, statusMessage, '2', false), statusText: statusMessage\n        };\n        if (!this.isBlazorSaveUrl) {\n            var liElement = this.getLiElement(file);\n            if (!isNullOrUndefined(liElement)) {\n                var spinnerEle = liElement.querySelector('.' + SPINNER_PANE);\n                if (!isNullOrUndefined(spinnerEle)) {\n                    hideSpinner(liElement);\n                    detach(spinnerEle);\n                }\n            }\n        }\n        this.trigger('success', args, function (args) {\n            // tslint:disable-next-line\n            _this.updateStatus(file, args.statusText, '2');\n            _this.uploadedFilesData.push(file);\n            if (!_this.isBlazorSaveUrl) {\n                _this.trigger('change', { file: _this.uploadedFilesData });\n            }\n            _this.checkActionButtonStatus();\n            if (_this.fileList.length > 0) {\n                if ((!(_this.getLiElement(file)).classList.contains(RESTRICT_RETRY))) {\n                    _this.uploadSequential();\n                    _this.checkActionComplete(true);\n                }\n                else {\n                    /* istanbul ignore next */\n                    (_this.getLiElement(file)).classList.remove(RESTRICT_RETRY);\n                }\n            }\n        });\n    };\n    Uploader.prototype.uploadFailed = function (e, file) {\n        var _this = this;\n        var li = this.getLiElement(file);\n        var response = e && e.currentTarget ? this.getResponse(e) : null;\n        var statusMessage = this.localizedTexts('uploadFailedMessage');\n        var args = {\n            e: e, response: response, operation: 'upload', file: this.updateStatus(file, statusMessage, '0', false), statusText: statusMessage\n        };\n        if (!isNullOrUndefined(li)) {\n            this.renderFailureState(e, file, li);\n        }\n        this.trigger('failure', args, function (args) {\n            // tslint:disable-next-line\n            _this.updateStatus(file, args.statusText, '0');\n            _this.checkActionButtonStatus();\n            _this.uploadSequential();\n            _this.checkActionComplete(true);\n        });\n    };\n    Uploader.prototype.uploadSequential = function () {\n        if (this.sequentialUpload) {\n            if (this.autoUpload) {\n                /* istanbul ignore next */\n                this.checkAutoUpload(this.filesData);\n            }\n            else {\n                this.uploadButtonClick();\n            }\n        }\n    };\n    Uploader.prototype.checkActionComplete = function (increment) {\n        increment ? ++this.actionCompleteCount : --this.actionCompleteCount;\n        this.raiseActionComplete();\n    };\n    Uploader.prototype.raiseActionComplete = function () {\n        if ((this.filesData.length === this.actionCompleteCount) && this.flag) {\n            this.flag = false;\n            var eventArgs = {\n                fileData: []\n            };\n            eventArgs.fileData = this.getSelectedFileStatus(this.selectedFiles);\n            this.trigger('actionComplete', eventArgs);\n        }\n    };\n    Uploader.prototype.getSelectedFileStatus = function (selectedFiles) {\n        var matchFiles = [];\n        var matchFilesIndex = 0;\n        for (var selectFileIndex = 0; selectFileIndex < selectedFiles.length; selectFileIndex++) {\n            var selectedFileData = selectedFiles[selectFileIndex];\n            for (var fileDataIndex = 0; fileDataIndex < this.filesData.length; fileDataIndex++) {\n                if (this.filesData[fileDataIndex].name === selectedFileData.name) {\n                    matchFiles[matchFilesIndex] = this.filesData[fileDataIndex];\n                    ++matchFilesIndex;\n                }\n            }\n        }\n        return matchFiles;\n    };\n    Uploader.prototype.updateProgressBarClasses = function (li, className) {\n        var progressBar = li.querySelector('.' + PROGRESSBAR);\n        if (!isNullOrUndefined(progressBar)) {\n            progressBar.classList.add(className);\n        }\n    };\n    Uploader.prototype.removeProgressbar = function (li, callType) {\n        var _this = this;\n        if (!isNullOrUndefined(li.querySelector('.' + PROGRESS_WRAPPER))) {\n            this.progressAnimation = new Animation({ duration: 1250 });\n            this.progressAnimation.animate(li.querySelector('.' + PROGRESS_WRAPPER), { name: 'FadeOut' });\n            this.progressAnimation.animate(li.querySelector('.' + PROGRESSBAR_TEXT), { name: 'FadeOut' });\n            setTimeout(function () { _this.animateProgressBar(li, callType); }, 750);\n        }\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.animateProgressBar = function (li, callType) {\n        if (callType === 'success') {\n            li.classList.add(UPLOAD_SUCCESS);\n            if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n                this.progressAnimation.animate(li.querySelector('.' + STATUS), { name: 'FadeIn' });\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_SUCCESS);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(li.querySelector('.' + STATUS))) {\n                li.querySelector('.' + STATUS).classList.remove(UPLOAD_INPROGRESS);\n                this.progressAnimation.animate(li.querySelector('.' + STATUS), { name: 'FadeIn' });\n                li.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n            }\n        }\n        if (li.querySelector('.' + PROGRESS_WRAPPER)) {\n            detach(li.querySelector('.' + PROGRESS_WRAPPER));\n        }\n    };\n    Uploader.prototype.setExtensions = function (extensions) {\n        if (extensions !== '' && !isNullOrUndefined(extensions)) {\n            this.element.setAttribute('accept', extensions);\n        }\n        else {\n            this.element.removeAttribute('accept');\n        }\n    };\n    Uploader.prototype.templateComplier = function (uploadTemplate) {\n        if (uploadTemplate) {\n            var exception = void 0;\n            try {\n                if (document.querySelectorAll(uploadTemplate).length) {\n                    return compile(document.querySelector(uploadTemplate).innerHTML.trim());\n                }\n            }\n            catch (exception) {\n                return compile(uploadTemplate);\n            }\n        }\n        return undefined;\n    };\n    Uploader.prototype.setRTL = function () {\n        this.enableRtl ? addClass([this.uploadWrapper], RTL) : removeClass([this.uploadWrapper], RTL);\n    };\n    Uploader.prototype.localizedTexts = function (localeText) {\n        this.l10n.setLocale(this.locale);\n        return this.l10n.getConstant(localeText);\n    };\n    Uploader.prototype.setControlStatus = function () {\n        if (!this.enabled) {\n            this.uploadWrapper.classList.add(DISABLED);\n            this.element.setAttribute('disabled', 'disabled');\n            this.browseButton.setAttribute('disabled', 'disabled');\n            if (!isNullOrUndefined(this.clearButton)) {\n                this.clearButton.setAttribute('disabled', 'disabled');\n            }\n            if (!isNullOrUndefined(this.uploadButton)) {\n                this.uploadButton.setAttribute('disabled', 'disabled');\n            }\n        }\n        else {\n            if (this.uploadWrapper.classList.contains(DISABLED)) {\n                this.uploadWrapper.classList.remove(DISABLED);\n            }\n            if (!isNullOrUndefined(this.browseButton) && this.element.hasAttribute('disabled')) {\n                this.element.removeAttribute('disabled');\n                this.browseButton.removeAttribute('disabled');\n            }\n            if (!isNullOrUndefined(this.clearButton) && this.clearButton.hasAttribute('disabled')) {\n                this.clearButton.removeAttribute('disabled');\n            }\n            if (!isNullOrUndefined(this.uploadButton) && this.uploadButton.hasAttribute('disabled')) {\n                this.uploadButton.hasAttribute('disabled');\n            }\n        }\n    };\n    Uploader.prototype.checkHTMLAttributes = function (isDynamic) {\n        var attributes = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) :\n            ['accept', 'multiple', 'disabled'];\n        for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n            var prop = attributes_1[_i];\n            if (!isNullOrUndefined(this.element.getAttribute(prop))) {\n                switch (prop) {\n                    case 'accept':\n                        // tslint:disable-next-line\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['allowedExtensions'] === undefined))\n                            || isDynamic) {\n                            this.setProperties({ allowedExtensions: this.element.getAttribute('accept') }, !isDynamic);\n                            this.initialAttr.accept = this.allowedExtensions;\n                        }\n                        break;\n                    case 'multiple':\n                        // tslint:disable-next-line\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['multiple'] === undefined)) || isDynamic) {\n                            var isMutiple = this.element.getAttribute(prop) === 'multiple' ||\n                                this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? true : false;\n                            this.setProperties({ multiple: isMutiple }, !isDynamic);\n                            this.initialAttr.multiple = true;\n                        }\n                        break;\n                    case 'disabled':\n                        // tslint:disable-next-line\n                        if ((isNullOrUndefined(this.uploaderOptions) || (this.uploaderOptions['enabled'] === undefined)) || isDynamic) {\n                            var isDisabled = this.element.getAttribute(prop) === 'disabled' ||\n                                this.element.getAttribute(prop) === '' || this.element.getAttribute(prop) === 'true' ? false : true;\n                            this.setProperties({ enabled: isDisabled }, !isDynamic);\n                            this.initialAttr.disabled = true;\n                        }\n                }\n            }\n        }\n    };\n    Uploader.prototype.chunkUpload = function (file, custom, fileIndex) {\n        var start = 0;\n        var end = Math.min(this.asyncSettings.chunkSize, file.size);\n        var index = 0;\n        var blob = file.rawFile.slice(start, end);\n        var metaData = { chunkIndex: index, blob: blob, file: file, start: start, end: end, retryCount: 0, request: null };\n        this.sendRequest(file, metaData, custom, fileIndex);\n    };\n    Uploader.prototype.sendRequest = function (file, metaData, custom, fileIndex) {\n        var _this = this;\n        var formData = new FormData();\n        var cloneFile;\n        var blob = file.rawFile.slice(metaData.start, metaData.end);\n        formData.append('chunkFile', blob, file.name);\n        formData.append('chunk-index', metaData.chunkIndex.toString());\n        formData.append('chunkIndex', metaData.chunkIndex.toString());\n        var totalChunk = Math.max(Math.ceil(file.size / this.asyncSettings.chunkSize), 1);\n        formData.append('total-chunk', totalChunk.toString());\n        formData.append('totalChunk', totalChunk.toString());\n        var ajax = new Ajax({ url: this.asyncSettings.saveUrl, type: 'POST', async: true, contentType: null });\n        ajax.emitError = false;\n        ajax.onLoad = function (e) { _this.chunkUploadComplete(e, metaData, custom); return {}; };\n        ajax.onUploadProgress = function (e) {\n            _this.chunkUploadInProgress(e, metaData, custom);\n            return {};\n        };\n        var eventArgs = {\n            fileData: file,\n            customFormData: [],\n            cancel: false,\n            chunkSize: this.asyncSettings.chunkSize === 0 ? null : this.asyncSettings.chunkSize\n        };\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            eventArgs.currentChunkIndex = metaData.chunkIndex;\n            /* istanbul ignore next */\n            if (_this.isServerBlazor) {\n                if (_this.currentRequestHeader) {\n                    _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n                }\n                if (_this.customFormDatas) {\n                    _this.updateFormData(formData, _this.customFormDatas);\n                }\n            }\n            if (eventArgs.currentChunkIndex === 0) {\n                // This event is currently not required but to avoid breaking changes for previous customer, we have included.\n                _this.trigger('uploading', eventArgs, function (eventArgs) {\n                    _this.uploadingEventCallback(formData, eventArgs, e, file);\n                });\n            }\n            else {\n                _this.trigger('chunkUploading', eventArgs, function (eventArgs) {\n                    _this.uploadingEventCallback(formData, eventArgs, e, file);\n                });\n            }\n        };\n        /* istanbul ignore next */\n        ajax.onError = function (e) { _this.chunkUploadFailed(e, metaData, custom); return {}; };\n        ajax.send(formData);\n        metaData.request = ajax;\n    };\n    Uploader.prototype.uploadingEventCallback = function (formData, eventArgs, e, file) {\n        if (eventArgs.cancel) {\n            this.eventCancelByArgs(e, eventArgs, file);\n        }\n        else {\n            this.updateFormData(formData, eventArgs.customFormData);\n        }\n    };\n    Uploader.prototype.eventCancelByArgs = function (e, eventArgs, file) {\n        var _this = this;\n        e.cancel = true;\n        if (eventArgs.fileData.statusCode === '5') {\n            return;\n        }\n        var liElement = this.getLiElement(eventArgs.fileData);\n        liElement.querySelector('.' + STATUS).innerHTML = this.localizedTexts('fileUploadCancel');\n        liElement.querySelector('.' + STATUS).classList.add(UPLOAD_FAILED);\n        eventArgs.fileData.statusCode = '5';\n        eventArgs.fileData.status = this.localizedTexts('fileUploadCancel');\n        this.pauseButton = this.createElement('span', { className: 'e-icons e-file-reload-btn', attrs: { 'tabindex': this.btnTabIndex } });\n        var removeIcon = liElement.querySelector('.' + REMOVE_ICON);\n        removeIcon.parentElement.insertBefore(this.pauseButton, removeIcon);\n        this.pauseButton.setAttribute('title', this.localizedTexts('retry'));\n        /* istanbul ignore next */\n        this.pauseButton.addEventListener('click', function (e) { _this.reloadcanceledFile(e, file, liElement); }, false);\n        this.checkActionButtonStatus();\n    };\n    Uploader.prototype.checkChunkUpload = function () {\n        return (this.asyncSettings.chunkSize <= 0 || isNullOrUndefined(this.asyncSettings.chunkSize)) ? false : true;\n    };\n    Uploader.prototype.chunkUploadComplete = function (e, metaData, custom) {\n        var _this = this;\n        var response = e.target;\n        var liElement;\n        if (response.readyState === 4 && response.status >= 200 && response.status < 300) {\n            var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n            var totalChunk = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n            var eventArgs = {\n                event: e,\n                file: metaData.file,\n                chunkIndex: metaData.chunkIndex,\n                totalChunk: totalChunk,\n                chunkSize: this.asyncSettings.chunkSize,\n                response: requestResponse\n            };\n            this.trigger('chunkSuccess', eventArgs);\n            if (isNullOrUndefined(custom) || !custom) {\n                liElement = this.getLiElement(metaData.file);\n            }\n            this.updateMetaData(metaData);\n            if (metaData.end === metaData.file.size) {\n                metaData.file.statusCode = '3';\n            }\n            if (metaData.file.statusCode === '5') {\n                var eventArgs_1 = { event: e, fileData: metaData.file, cancel: false };\n                this.trigger('canceling', eventArgs_1, function (eventArgs) {\n                    /* istanbul ignore next */\n                    if (eventArgs.cancel) {\n                        metaData.file.statusCode = '3';\n                        var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n                        if (!isNullOrUndefined(liElement) && !isNullOrUndefined(spinnerTarget)) {\n                            hideSpinner(spinnerTarget);\n                            detach(liElement.querySelector('.e-spinner-pane'));\n                        }\n                        _this.sendNextRequest(metaData);\n                    }\n                    else {\n                        metaData.request.emitError = false;\n                        response.abort();\n                        var formData = new FormData();\n                        var name_3 = _this.element.getAttribute('name');\n                        formData.append(name_3, metaData.file.name);\n                        formData.append('cancel-uploading', metaData.file.name);\n                        formData.append('cancelUploading', metaData.file.name);\n                        var ajax = new Ajax(_this.asyncSettings.removeUrl, 'POST', true, null);\n                        ajax.emitError = false;\n                        ajax.onLoad = function (e) { _this.removeChunkFile(e, metaData, custom); return {}; };\n                        ajax.send(formData);\n                    }\n                });\n            }\n            else {\n                if ((totalChunk - 1) === metaData.chunkIndex && totalChunk > metaData.chunkIndex) {\n                    var index = this.pausedData.indexOf(metaData);\n                    if (index >= 0) {\n                        this.pausedData.splice(index, 1);\n                    }\n                    if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n                        if (liElement) {\n                            detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n                        }\n                        this.removeChunkProgressBar(metaData);\n                    }\n                    this.raiseSuccessEvent(e, metaData.file);\n                    return;\n                }\n                this.sendNextRequest(metaData);\n            }\n        }\n        else {\n            this.chunkUploadFailed(e, metaData);\n        }\n    };\n    Uploader.prototype.sendNextRequest = function (metaData) {\n        metaData.start = metaData.end;\n        metaData.end += this.asyncSettings.chunkSize;\n        metaData.end = Math.min(metaData.end, metaData.file.size);\n        metaData.chunkIndex += 1;\n        this.sendRequest(metaData.file, metaData);\n    };\n    Uploader.prototype.removeChunkFile = function (e, metaData, custom) {\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) && !custom)) {\n            var liElement = this.getLiElement(metaData.file);\n            var deleteIcon = liElement.querySelector('.' + ABORT_ICON);\n            var spinnerTarget = deleteIcon;\n            this.updateStatus(metaData.file, this.localizedTexts('fileUploadCancel'), '5');\n            this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n            this.removeProgressbar(liElement, 'failure');\n            deleteIcon.classList.remove(ABORT_ICON);\n            deleteIcon.classList.add(REMOVE_ICON);\n            deleteIcon.setAttribute('title', this.localizedTexts('remove'));\n            var pauseIcon = liElement.querySelector('.' + PAUSE_UPLOAD);\n            pauseIcon.classList.add(RETRY_ICON);\n            pauseIcon.classList.remove(PAUSE_UPLOAD);\n            pauseIcon.setAttribute('title', this.localizedTexts('retry'));\n            if (!isNullOrUndefined(liElement) && !isNullOrUndefined(deleteIcon)) {\n                hideSpinner(spinnerTarget);\n                detach(liElement.querySelector('.e-spinner-pane'));\n            }\n        }\n    };\n    Uploader.prototype.pauseUpload = function (metaData, e, custom) {\n        metaData.file.statusCode = '4';\n        metaData.file.status = this.localizedTexts('pause');\n        this.updateMetaData(metaData);\n        var eventArgs = {\n            event: e ? e : null,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n            chunkSize: this.asyncSettings.chunkSize\n        };\n        this.abortUpload(metaData, custom, eventArgs);\n    };\n    Uploader.prototype.abortUpload = function (metaData, custom, eventArgs) {\n        metaData.request.emitError = false;\n        metaData.request.httpRequest.abort();\n        var liElement = this.getLiElement(metaData.file);\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n            var targetElement = liElement.querySelector('.' + PAUSE_UPLOAD);\n            targetElement.classList.remove(PAUSE_UPLOAD);\n            targetElement.classList.add(RESUME_UPLOAD);\n            targetElement.setAttribute('title', this.localizedTexts('resume'));\n            targetElement.nextElementSibling.classList.add(REMOVE_ICON);\n            targetElement.nextElementSibling.classList.remove(ABORT_ICON);\n            targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('remove'));\n        }\n        for (var i = 0; i < this.pausedData.length; i++) {\n            if (this.pausedData[i].file.name === metaData.file.name) {\n                this.pausedData.splice(i, 1);\n            }\n        }\n        this.pausedData.push(metaData);\n        this.trigger('pausing', eventArgs);\n    };\n    Uploader.prototype.resumeUpload = function (metaData, e, custom) {\n        var liElement = this.getLiElement(metaData.file);\n        var targetElement;\n        if (!isNullOrUndefined(liElement)) {\n            targetElement = liElement.querySelector('.' + RESUME_UPLOAD);\n        }\n        if (!isNullOrUndefined(targetElement) && (isNullOrUndefined(custom) || !custom)) {\n            targetElement.classList.remove(RESUME_UPLOAD);\n            targetElement.classList.add(PAUSE_UPLOAD);\n            targetElement.setAttribute('title', this.localizedTexts('pause'));\n            targetElement.nextElementSibling.classList.remove(REMOVE_ICON);\n            targetElement.nextElementSibling.classList.add(ABORT_ICON);\n            targetElement.nextElementSibling.setAttribute('title', this.localizedTexts('abort'));\n        }\n        metaData.file.status = this.localizedTexts('inProgress');\n        metaData.file.statusCode = '3';\n        this.updateMetaData(metaData);\n        var eventArgs = {\n            event: e ? e : null,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            chunkCount: Math.round(metaData.file.size / this.asyncSettings.chunkSize),\n            chunkSize: this.asyncSettings.chunkSize\n        };\n        this.trigger('resuming', eventArgs);\n        for (var i = 0; i < this.pausedData.length; i++) {\n            if (this.pausedData[i].end === this.pausedData[i].file.size) {\n                this.chunkUploadComplete(e, metaData, custom);\n            }\n            else {\n                if (this.pausedData[i].file.name === metaData.file.name) {\n                    this.pausedData[i].start = this.pausedData[i].end;\n                    this.pausedData[i].end = this.pausedData[i].end + this.asyncSettings.chunkSize;\n                    this.pausedData[i].end = Math.min(this.pausedData[i].end, this.pausedData[i].file.size);\n                    this.pausedData[i].chunkIndex = this.pausedData[i].chunkIndex + 1;\n                    this.sendRequest(this.pausedData[i].file, this.pausedData[i], custom);\n                }\n            }\n        }\n    };\n    Uploader.prototype.updateMetaData = function (metaData) {\n        if (this.uploadMetaData.indexOf(metaData) === -1) {\n            this.uploadMetaData.push(metaData);\n        }\n        else {\n            this.uploadMetaData.splice(this.uploadMetaData.indexOf(metaData), 1);\n            this.uploadMetaData.push(metaData);\n        }\n    };\n    Uploader.prototype.removeChunkProgressBar = function (metaData) {\n        var liElement = this.getLiElement(metaData.file);\n        if (!isNullOrUndefined(liElement)) {\n            this.updateProgressBarClasses(liElement, UPLOAD_SUCCESS);\n            this.removeProgressbar(liElement, 'success');\n            var cancelButton = liElement.querySelector('.' + ABORT_ICON);\n            if (!isNullOrUndefined(cancelButton)) {\n                cancelButton.classList.add(DELETE_ICON);\n                cancelButton.setAttribute('title', this.localizedTexts('delete'));\n                cancelButton.classList.remove(ABORT_ICON, UPLOAD_INPROGRESS);\n            }\n        }\n    };\n    Uploader.prototype.chunkUploadFailed = function (e, metaData, custom) {\n        var _this = this;\n        var chunkCount = Math.max(Math.ceil(metaData.file.size / this.asyncSettings.chunkSize), 1);\n        var liElement;\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom)) {\n            liElement = this.getLiElement(metaData.file);\n        }\n        var requestResponse = e && e.currentTarget ? this.getResponse(e) : null;\n        var eventArgs = {\n            event: e,\n            file: metaData.file,\n            chunkIndex: metaData.chunkIndex,\n            totalChunk: chunkCount,\n            chunkSize: this.asyncSettings.chunkSize,\n            cancel: false,\n            response: requestResponse\n        };\n        this.trigger('chunkFailure', eventArgs, function (eventArgs) {\n            // To prevent triggering of failure event\n            // tslint:disable-next-line\n            if (!eventArgs.cancel) {\n                if (metaData.retryCount < _this.asyncSettings.retryCount) {\n                    setTimeout(function () { _this.retryRequest(liElement, metaData, custom); }, _this.asyncSettings.retryAfterDelay);\n                }\n                else {\n                    if (!isNullOrUndefined(liElement)) {\n                        var pauseButton = liElement.querySelector('.' + PAUSE_UPLOAD) ?\n                            liElement.querySelector('.' + PAUSE_UPLOAD) : liElement.querySelector('.' + RESUME_UPLOAD);\n                        if (!isNullOrUndefined(pauseButton)) {\n                            pauseButton.classList.add(RETRY_ICON);\n                            pauseButton.classList.remove(PAUSE_UPLOAD, RESUME_UPLOAD);\n                        }\n                        _this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n                        _this.removeProgressbar(liElement, 'failure');\n                        liElement.querySelector('.e-icons').classList.remove(UPLOAD_INPROGRESS);\n                        var iconElement = liElement.querySelector('.' + ABORT_ICON) ?\n                            liElement.querySelector('.' + ABORT_ICON) : liElement.querySelector('.' + REMOVE_ICON);\n                        iconElement.classList.remove(ABORT_ICON);\n                        if (!isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD))) {\n                            detach(liElement.querySelector('.' + PAUSE_UPLOAD));\n                        }\n                        if (metaData.start > 0) {\n                            iconElement.classList.add(DELETE_ICON);\n                            iconElement.setAttribute('title', _this.localizedTexts('delete'));\n                        }\n                        else {\n                            iconElement.classList.add(REMOVE_ICON);\n                            iconElement.setAttribute('title', _this.localizedTexts('remove'));\n                        }\n                    }\n                    metaData.retryCount = 0;\n                    var file_1 = metaData.file;\n                    var failureMessage = _this.localizedTexts('uploadFailedMessage');\n                    var args = {\n                        e: e, response: requestResponse,\n                        operation: 'upload',\n                        file: _this.updateStatus(file_1, failureMessage, '0', false),\n                        statusText: failureMessage\n                    };\n                    _this.trigger('failure', args, function (args) {\n                        // tslint:disable-next-line\n                        _this.updateStatus(file_1, args.statusText, '0');\n                        _this.uploadSequential();\n                        _this.checkActionComplete(true);\n                    });\n                }\n            }\n        });\n    };\n    Uploader.prototype.retryRequest = function (liElement, metaData, custom) {\n        if (isNullOrUndefined(this.template) && (isNullOrUndefined(custom) || !custom) && liElement) {\n            this.updateProgressBarClasses(liElement, UPLOAD_FAILED);\n        }\n        metaData.retryCount += 1;\n        this.sendRequest(metaData.file, metaData);\n    };\n    Uploader.prototype.checkPausePlayAction = function (e) {\n        var targetElement = e.target;\n        var selectedElement = e.target.parentElement;\n        var index = this.fileList.indexOf(selectedElement);\n        var fileData = this.filesData[index];\n        var metaData = this.getCurrentMetaData(fileData);\n        if (targetElement.classList.contains(PAUSE_UPLOAD)) {\n            /* istanbul ignore next */\n            this.pauseUpload(metaData, e);\n        }\n        else if (targetElement.classList.contains(RESUME_UPLOAD)) {\n            /* istanbul ignore next */\n            this.resumeUpload(metaData, e);\n        }\n        else if (targetElement.classList.contains(RETRY_ICON)) {\n            if (metaData.file.status === this.localizedTexts('fileUploadCancel')) {\n                this.retryUpload(metaData, false);\n            }\n            else {\n                this.retryUpload(metaData, true);\n            }\n        }\n    };\n    Uploader.prototype.retryUpload = function (metaData, fromcanceledStage) {\n        if (fromcanceledStage) {\n            metaData.end = metaData.end + this.asyncSettings.chunkSize;\n            metaData.start = metaData.start + this.asyncSettings.chunkSize;\n            this.sendRequest(metaData.file, metaData);\n        }\n        else {\n            metaData.file.statusCode = '1';\n            metaData.file.status = this.localizedTexts('readyToUploadMessage');\n            this.chunkUpload(metaData.file);\n        }\n        /* istanbul ignore next */\n        (this.getLiElement(metaData.file)).classList.add(RESTRICT_RETRY);\n    };\n    Uploader.prototype.chunkUploadInProgress = function (e, metaData, custom) {\n        var _this = this;\n        if (metaData.file.statusCode === '4') {\n            return;\n        }\n        if (metaData.file.statusCode !== '4' && metaData.file.statusCode !== '5') {\n            metaData.file.statusCode = '3';\n            metaData.file.status = this.localizedTexts('inProgress');\n        }\n        this.updateMetaData(metaData);\n        var liElement = this.getLiElement(metaData.file);\n        if (isNullOrUndefined(liElement)) {\n            return;\n        }\n        var target;\n        var retryElement = liElement.querySelector('.' + RETRY_ICON);\n        if (!isNullOrUndefined(retryElement)) {\n            retryElement.classList.add(PAUSE_UPLOAD);\n            retryElement.setAttribute('title', this.localizedTexts('pause'));\n            retryElement.classList.remove(RETRY_ICON);\n        }\n        if (!isNullOrUndefined(liElement)) {\n            if (!(liElement.querySelectorAll('.' + PROGRESS_WRAPPER).length > 0)) {\n                var statusElement = liElement.querySelector('.' + STATUS);\n                if (isNullOrUndefined(this.template)) {\n                    statusElement.classList.add(UPLOAD_INPROGRESS);\n                    statusElement.classList.remove(UPLOAD_FAILED);\n                    this.createProgressBar(liElement);\n                    this.updateProgressBarClasses(liElement, UPLOAD_INPROGRESS);\n                }\n                var clearIcon = liElement.querySelector('.' + REMOVE_ICON) ? liElement.querySelector('.' + REMOVE_ICON) :\n                    liElement.querySelector('.' + DELETE_ICON);\n                if (!isNullOrUndefined(clearIcon)) {\n                    clearIcon.classList.add(ABORT_ICON);\n                    clearIcon.setAttribute('title', this.localizedTexts('abort'));\n                    clearIcon.classList.remove(REMOVE_ICON);\n                }\n            }\n            if (!isNaN(Math.round((e.loaded / e.total) * 100)) && isNullOrUndefined(this.template) && metaData.file.statusCode !== '4') {\n                var loadedSize = (metaData.chunkIndex * this.asyncSettings.chunkSize);\n                var value = Math.min((((loadedSize + e.loaded) / metaData.file.size) * 100), 100);\n                this.changeProgressValue(liElement, Math.round(value).toString() + '%');\n            }\n            if (metaData.chunkIndex === 0) {\n                this.checkActionButtonStatus();\n            }\n        }\n        if (isNullOrUndefined(liElement.querySelector('.' + PAUSE_UPLOAD)) && isNullOrUndefined(this.template)) {\n            this.pauseButton = this.createElement('span', { className: 'e-icons e-file-pause-btn', attrs: { 'tabindex': this.btnTabIndex } });\n            if (this.browserName === 'msie') {\n                this.pauseButton.classList.add('e-msie');\n            }\n            var abortIcon = liElement.querySelector('.' + ABORT_ICON);\n            abortIcon.parentElement.insertBefore(this.pauseButton, abortIcon);\n            this.pauseButton.setAttribute('title', this.localizedTexts('pause'));\n            this.pauseButton.addEventListener('click', function (e) { _this.checkPausePlayAction(e); }, false);\n        }\n    };\n    /**\n     * It is used to convert bytes value into kilobytes or megabytes depending on the size based\n     * on [binary prefix](https://en.wikipedia.org/wiki/Binary_prefix).\n     * @param { number } bytes - specifies the file size in bytes.\n     * @returns string\n     */\n    Uploader.prototype.bytesToSize = function (bytes) {\n        var i = -1;\n        var size;\n        if (!bytes) {\n            return '0.0 KB';\n        }\n        do {\n            bytes = bytes / 1024;\n            i++;\n        } while (bytes > 99);\n        if (i >= 2) {\n            bytes = bytes * 1024;\n            i = 1;\n        }\n        return Math.max(bytes, 0).toFixed(1) + ' ' + ['KB', 'MB'][i];\n    };\n    /**\n     * Allows you to sort the file data alphabetically based on its file name clearly.\n     * @param { FileList } filesData - specifies the files data for upload.\n     * @returns File[]\n     */\n    /* istanbul ignore next */\n    Uploader.prototype.sortFileList = function (filesData) {\n        filesData = filesData ? filesData : this.sortFilesList;\n        var files = filesData;\n        var fileNames = [];\n        for (var i = 0; i < files.length; i++) {\n            fileNames.push(files[i].name);\n        }\n        var sortedFileNames = fileNames.sort();\n        var sortedFilesData = [];\n        var index = 0;\n        for (var _i = 0, sortedFileNames_1 = sortedFileNames; _i < sortedFileNames_1.length; _i++) {\n            var name_4 = sortedFileNames_1[_i];\n            for (var i = 0; i < files.length; i++) {\n                if (name_4 === files[i].name) {\n                    sortedFilesData.push(files[i]);\n                }\n            }\n        }\n        return sortedFilesData;\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     * @method destroy\n     * @return {void}.\n     */\n    Uploader.prototype.destroy = function () {\n        this.element.value = null;\n        if (!(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n            this.clearAll();\n        }\n        this.unWireEvents();\n        this.unBindDropEvents();\n        if (this.multiple) {\n            this.element.removeAttribute('multiple');\n        }\n        if (!this.enabled) {\n            this.element.removeAttribute('disabled');\n        }\n        this.element.removeAttribute('accept');\n        this.setInitialAttributes();\n        var attributes = ['aria-label', 'directory', 'webkitdirectory', 'tabindex'];\n        for (var _i = 0, attributes_2 = attributes; _i < attributes_2.length; _i++) {\n            var key = attributes_2[_i];\n            this.element.removeAttribute(key);\n        }\n        if (!this.isServerBlazor) {\n            if (!isNullOrUndefined(this.uploadWrapper)) {\n                this.uploadWrapper.parentElement.appendChild(this.element);\n                detach(this.uploadWrapper);\n            }\n            this.uploadWrapper = null;\n            _super.prototype.destroy.call(this);\n        }\n        else {\n            this.uploadWrapper = null;\n        }\n    };\n    /**\n     * Allows you to call the upload process manually by calling save URL action.\n     * To process the selected files (added in upload queue), pass an empty argument otherwise\n     * upload the specific file based on its argument.\n     * @param { FileInfo | FileInfo[] } files - specifies the files data for upload.\n     * @returns void\n     */\n    Uploader.prototype.upload = function (files, custom) {\n        var _this = this;\n        files = files ? files : this.filesData;\n        var uploadFiles = this.getFilesInArray(files);\n        var eventArgs = {\n            customFormData: [],\n            currentRequest: null\n        };\n        this.trigger('beforeUpload', eventArgs, function (eventArgs) {\n            if (_this.isServerBlazor) {\n                _this.currentRequestHeader = eventArgs.currentRequest ? eventArgs.currentRequest : _this.currentRequestHeader;\n                _this.customFormDatas = (eventArgs.customFormData && eventArgs.customFormData.length > 0) ?\n                    eventArgs.customFormData : _this.customFormDatas;\n            }\n            _this.uploadFiles(uploadFiles, custom);\n        });\n    };\n    Uploader.prototype.getFilesInArray = function (files) {\n        var uploadFiles = [];\n        if (files instanceof Array) {\n            uploadFiles = files;\n        }\n        else {\n            uploadFiles.push(files);\n        }\n        return uploadFiles;\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.serverReadFileBase64 = function (fileIndex, position, totalCount) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var file = _this.fileStreams[fileIndex].rawFile;\n            try {\n                var reader = new FileReader();\n                // tslint:disable-next-line\n                reader.onload = (function (args) {\n                    return function () {\n                        try {\n                            var contents = args.result;\n                            var data = contents ? contents.split(';base64,')[1] : null;\n                            resolve(data);\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                    };\n                })(reader);\n                reader.readAsDataURL(file.slice(position, position + totalCount));\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.uploadFileCount = function (ele) {\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return -1;\n        }\n        var result = files.length;\n        return result;\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getFileRead = function (index, ele) {\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return -1;\n        }\n        var file = files[index];\n        var fileCount = this.newFileRef++;\n        this.fileStreams[fileCount] = file;\n        return fileCount;\n    };\n    /* istanbul ignore next */\n    Uploader.prototype.getFileInfo = function (index, ele) {\n        var files = this.filesData;\n        if (!files || files.length === 0) {\n            return null;\n        }\n        var file = files[index];\n        if (!file) {\n            return null;\n        }\n        return this.filesData[index];\n    };\n    Uploader.prototype.uploadFiles = function (files, custom) {\n        var _this = this;\n        var selectedFiles = [];\n        if (this.asyncSettings.saveUrl === '' || isNullOrUndefined(this.asyncSettings.saveUrl)) {\n            if (this.isServerBlazor) {\n                // tslint:disable-next-line\n                this.interopAdaptor.invokeMethodAsync('GetFileDetails', files);\n            }\n            return;\n        }\n        if (!custom || isNullOrUndefined(custom)) {\n            if (!this.multiple) {\n                var file = [];\n                file.push(files[0]);\n                selectedFiles = this.filterfileList(file);\n            }\n            else {\n                selectedFiles = this.filterfileList(files);\n            }\n        }\n        else {\n            selectedFiles = files;\n        }\n        var _loop_5 = function (i) {\n            if (this_3.isServerBlazor && !this_3.checkChunkUpload()) {\n                /* istanbul ignore next */\n                /* tslint:disable */\n                if (selectedFiles[i] && selectedFiles[i].rawFile instanceof File) {\n                    this_3.getBase64(selectedFiles[i].rawFile).then(function (data) {\n                        _this.base64String.push(data);\n                        _this.uploadFilesRequest(selectedFiles, i, custom);\n                    });\n                }\n                /* tslint:disable */\n            }\n            else {\n                this_3.uploadFilesRequest(selectedFiles, i, custom);\n            }\n        };\n        var this_3 = this;\n        for (var i = 0; i < selectedFiles.length; i++) {\n            _loop_5(i);\n        }\n    };\n    Uploader.prototype.uploadFilesRequest = function (selectedFiles, i, custom) {\n        var _this = this;\n        var cloneFiles = [];\n        var chunkEnabled = this.checkChunkUpload();\n        var ajax = new Ajax(this.asyncSettings.saveUrl, 'POST', true, null);\n        ajax.emitError = false;\n        var getFileData;\n        /* istanbul ignore next */\n        if (this.isServerBlazor) {\n            getFileData = selectedFiles.slice(0);\n            cloneFiles.push(getFileData[i].rawFile);\n        }\n        var eventArgs = {\n            fileData: (this.isServerBlazor) ? getFileData[i] : selectedFiles[i],\n            customFormData: [],\n            cancel: false\n        };\n        var formData = new FormData();\n        ajax.beforeSend = function (e) {\n            eventArgs.currentRequest = ajax.httpRequest;\n            /* istanbul ignore next */\n            if (_this.isServerBlazor) {\n                eventArgs.fileData.rawFile = !chunkEnabled ? _this.base64String[i] : eventArgs.fileData.rawFile;\n                if (_this.currentRequestHeader) {\n                    _this.updateCustomheader(ajax.httpRequest, _this.currentRequestHeader);\n                }\n                if (_this.customFormDatas) {\n                    _this.updateFormData(formData, _this.customFormDatas);\n                }\n            }\n            _this.trigger('uploading', eventArgs, function (eventArgs) {\n                /* istanbul ignore next */\n                if (_this.isServerBlazor && !chunkEnabled) {\n                    selectedFiles[i].rawFile = eventArgs.fileData.rawFile = cloneFiles[i];\n                }\n                if (eventArgs.cancel) {\n                    _this.eventCancelByArgs(e, eventArgs, selectedFiles[i]);\n                }\n                _this.updateFormData(formData, eventArgs.customFormData);\n            });\n        };\n        if (selectedFiles[i].statusCode === '1') {\n            var name_5 = this.element.getAttribute('name');\n            formData.append(name_5, selectedFiles[i].rawFile, selectedFiles[i].name);\n            if (chunkEnabled && selectedFiles[i].size > this.asyncSettings.chunkSize) {\n                this.chunkUpload(selectedFiles[i], custom, i);\n            }\n            else {\n                ajax.onLoad = function (e) {\n                    if (eventArgs.cancel && _this.isServerBlazor) {\n                        return {};\n                    }\n                    else {\n                        _this.uploadComplete(e, selectedFiles[i], custom);\n                        return {};\n                    }\n                };\n                ajax.onUploadProgress = function (e) {\n                    if (eventArgs.cancel && _this.isServerBlazor) {\n                        return {};\n                    }\n                    else {\n                        _this.uploadInProgress(e, selectedFiles[i], custom, ajax);\n                        return {};\n                    }\n                };\n                /* istanbul ignore next */\n                ajax.onError = function (e) { _this.uploadFailed(e, selectedFiles[i]); return {}; };\n                ajax.send(formData);\n            }\n        }\n    };\n    Uploader.prototype.spliceFiles = function (liIndex) {\n        var liElement = this.fileList[liIndex];\n        var allFiles = this.getFilesData();\n        var nameElements = +liElement.getAttribute('data-files-count');\n        var startIndex = 0;\n        for (var i = 0; i < liIndex; i++) {\n            startIndex += (+this.fileList[i].getAttribute('data-files-count'));\n        }\n        var endIndex = (startIndex + nameElements) - 1;\n        for (var j = endIndex; j >= startIndex; j--) {\n            allFiles.splice(j, 1);\n        }\n    };\n    /**\n     * Remove the uploaded file from server manually by calling the remove URL action.\n     * If you pass an empty argument to this method, the complete file list can be cleared,\n     * otherwise remove the specific file based on its argument (file_data).\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to remove from file list/server.\n     * @param { boolean } customTemplate - Set true if the component rendering with customize template.\n     * @param { boolean } removeDirectly - Set true if files remove without removing event.\n     * @param { boolean } postRawFile - Set false, to post file name only to the remove action.\n     * @returns void\n     */\n    Uploader.prototype.remove = function (fileData, customTemplate, removeDirectly, postRawFile, args) {\n        var _this = this;\n        if (isNullOrUndefined(postRawFile)) {\n            postRawFile = true;\n        }\n        var eventArgs = {\n            event: args,\n            cancel: false,\n            filesData: [],\n            customFormData: [],\n            postRawFile: postRawFile,\n            currentRequest: null\n        };\n        var beforeEventArgs = {\n            cancel: false,\n            customFormData: [],\n            currentRequest: null\n        };\n        this.trigger('beforeRemove', beforeEventArgs, function (beforeEventArgs) {\n            if (!beforeEventArgs.cancel) {\n                if (_this.isServerBlazor) {\n                    _this.currentRequestHeader = beforeEventArgs.currentRequest;\n                    _this.customFormDatas = beforeEventArgs.customFormData;\n                }\n                var index = void 0;\n                if (_this.isFormUpload() && !_this.isBlazorSaveUrl) {\n                    eventArgs.filesData = fileData;\n                    _this.trigger('removing', eventArgs, function (eventArgs) {\n                        if (!eventArgs.cancel) {\n                            var removingFiles = _this.getFilesInArray(fileData);\n                            var isLiRemoved = false;\n                            var liIndex = void 0;\n                            for (var _i = 0, removingFiles_1 = removingFiles; _i < removingFiles_1.length; _i++) {\n                                var data = removingFiles_1[_i];\n                                if (!isLiRemoved) {\n                                    liIndex = _this.fileList.indexOf(data.list);\n                                }\n                                if (liIndex > -1) {\n                                    var inputElement = !isNullOrUndefined(data.input) ? data.input : null;\n                                    if (inputElement) {\n                                        detach(inputElement);\n                                    }\n                                    _this.spliceFiles(liIndex);\n                                    detach(_this.fileList[liIndex]);\n                                    _this.fileList.splice(liIndex, 1);\n                                    isLiRemoved = true;\n                                    liIndex = -1;\n                                }\n                            }\n                        }\n                    });\n                }\n                else if (_this.isForm && (isNullOrUndefined(_this.asyncSettings.removeUrl) || _this.asyncSettings.removeUrl === '')\n                    && !_this.isBlazorSaveUrl) {\n                    eventArgs.filesData = _this.getFilesData();\n                    _this.trigger('removing', eventArgs, function (eventArgs) {\n                        if (!eventArgs.cancel) {\n                            _this.clearAll();\n                        }\n                    });\n                }\n                else {\n                    var removeFiles = [];\n                    fileData = !isNullOrUndefined(fileData) ? fileData : _this.filesData;\n                    if (fileData instanceof Array) {\n                        removeFiles = fileData;\n                    }\n                    else {\n                        removeFiles.push(fileData);\n                    }\n                    eventArgs.filesData = removeFiles;\n                    var removeUrl = _this.asyncSettings.removeUrl;\n                    var validUrl = (removeUrl === '' || isNullOrUndefined(removeUrl)) ? false : true;\n                    var _loop_6 = function (files) {\n                        index = _this.filesData.indexOf(files);\n                        if ((files.statusCode === '2' || files.statusCode === '4') && validUrl) {\n                            _this.removeUploadedFile(files, eventArgs, removeDirectly, customTemplate);\n                        }\n                        else {\n                            if (!removeDirectly) {\n                                _this.trigger('removing', eventArgs, function (eventArgs) {\n                                    if (!eventArgs.cancel) {\n                                        _this.removeFilesData(files, customTemplate);\n                                    }\n                                });\n                            }\n                            else {\n                                _this.removeFilesData(files, customTemplate);\n                            }\n                        }\n                        if (_this.sequentialUpload) {\n                            /* istanbul ignore next */\n                            if (index <= _this.actionCompleteCount) {\n                                _this.checkActionComplete(false);\n                            }\n                        }\n                        else {\n                            _this.checkActionComplete(false);\n                        }\n                    };\n                    for (var _i = 0, removeFiles_1 = removeFiles; _i < removeFiles_1.length; _i++) {\n                        var files = removeFiles_1[_i];\n                        _loop_6(files);\n                    }\n                }\n            }\n        });\n    };\n    /**\n     * Clear all the file entries from list that can be uploaded files or added in upload queue.\n     * @returns void\n     */\n    Uploader.prototype.clearAll = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.listParent) && !(this.isBlazorSaveUrl || this.isBlazorTemplate)) {\n            if (this.browserName !== 'msie') {\n                this.element.value = '';\n            }\n            this.filesData = [];\n            return;\n        }\n        var eventArgs = {\n            cancel: false,\n            filesData: this.filesData\n        };\n        this.trigger('clearing', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.clearData();\n                _this.actionCompleteCount = 0;\n                _this.count = -1;\n            }\n        });\n    };\n    /**\n     * Get the data of files which are shown in file list.\n     * @param { number } index - specifies the file list item(li) index.\n     * @returns FileInfo[]\n     */\n    Uploader.prototype.getFilesData = function (index) {\n        if (!this.isServerBlazor) {\n            if (isNullOrUndefined(index)) {\n                return this.filesData;\n            }\n            else {\n                return this.getSelectedFiles(index);\n            }\n        }\n        else {\n            for (var i = 0; i < this.filesData.length; i++) {\n                this.filesData[i].rawFile = this.base64String[i];\n            }\n            return this.filesData;\n        }\n    };\n    /**\n     * Pauses the in-progress chunked upload based on the file data.\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to pause from uploading.\n     * @param { boolean } custom - Set true if used custom UI.\n     * @returns void\n     */\n    Uploader.prototype.pause = function (fileData, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        this.pauseUploading(fileDataFiles, custom);\n    };\n    Uploader.prototype.pauseUploading = function (fileData, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '3') {\n                this.pauseUpload(this.getCurrentMetaData(files[i], null), null, custom);\n            }\n        }\n    };\n    Uploader.prototype.getFiles = function (fileData) {\n        var files = [];\n        if (!isNullOrUndefined(fileData) && !(fileData instanceof Array)) {\n            files.push(fileData);\n        }\n        else {\n            files = fileData;\n        }\n        return files;\n    };\n    /**\n     * Resumes the chunked upload that is previously paused based on the file data.\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to resume the paused file.\n     * @param { boolean } custom - Set true if used custom UI.\n     * @returns void\n     */\n    Uploader.prototype.resume = function (fileData, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        this.resumeFiles(fileDataFiles, custom);\n    };\n    Uploader.prototype.resumeFiles = function (fileData, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '4') {\n                this.resumeUpload(this.getCurrentMetaData(files[i], null), null, custom);\n            }\n        }\n    };\n    /**\n     * Retries the canceled or failed file upload based on the file data.\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to retry the canceled or failed file.\n     * @param { boolean } fromcanceledStage - Set true to retry from canceled stage and set false to retry from initial stage.\n     * @returns void\n     */\n    Uploader.prototype.retry = function (fileData, fromcanceledStage, custom) {\n        fileData = fileData ? fileData : this.filesData;\n        var fileDataFiles = this.getFilesInArray(fileData);\n        this.retryFailedFiles(fileDataFiles, fromcanceledStage, custom);\n    };\n    Uploader.prototype.retryFailedFiles = function (fileData, fromcanceledStage, custom) {\n        var files = this.getFiles(fileData);\n        for (var i = 0; i < files.length; i++) {\n            if (files[i].statusCode === '5' || files[i].statusCode === '0') {\n                if (this.asyncSettings.chunkSize > 0) {\n                    this.retryUpload(this.getCurrentMetaData(files[i], null), fromcanceledStage);\n                }\n                else {\n                    var liElement = void 0;\n                    if (!custom) {\n                        liElement = this.fileList[this.filesData.indexOf(files[i])];\n                    }\n                    this.reloadcanceledFile(null, files[i], liElement, custom);\n                }\n            }\n        }\n    };\n    /**\n     * Stops the in-progress chunked upload based on the file data.\n     * When the file upload is canceled, the partially uploaded file is removed from server.\n     * @param { FileInfo | FileInfo[] } fileData - specifies the files data to cancel the progressing file.\n     * @returns void\n     */\n    Uploader.prototype.cancel = function (fileData) {\n        fileData = fileData ? fileData : this.filesData;\n        var cancelingFiles = this.getFilesInArray(fileData);\n        this.cancelUpload(cancelingFiles);\n    };\n    Uploader.prototype.cancelUpload = function (fileData) {\n        var files = this.getFiles(fileData);\n        if (this.asyncSettings.chunkSize > 0) {\n            for (var i = 0; i < files.length; i++) {\n                if (files[i].statusCode === '3') {\n                    var metaData = this.getCurrentMetaData(files[i], null);\n                    metaData.file.statusCode = '5';\n                    metaData.file.status = this.localizedTexts('fileUploadCancel');\n                    this.updateMetaData(metaData);\n                    this.showHideUploadSpinner(files[i]);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < files.length; i++) {\n                if (files[i].statusCode === '3') {\n                    files[i].statusCode = '5';\n                    files[i].status = this.localizedTexts('fileUploadCancel');\n                    this.showHideUploadSpinner(files[i]);\n                }\n            }\n        }\n    };\n    Uploader.prototype.showHideUploadSpinner = function (files) {\n        var liElement = this.getLiElement(files);\n        if (!isNullOrUndefined(liElement) && isNullOrUndefined(this.template)) {\n            var spinnerTarget = liElement.querySelector('.' + ABORT_ICON);\n            createSpinner({ target: spinnerTarget, width: '20px' });\n            showSpinner(spinnerTarget);\n        }\n    };\n    __decorate([\n        Complex({ saveUrl: '', removeUrl: '' }, AsyncSettings)\n    ], Uploader.prototype, \"asyncSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Uploader.prototype, \"sequentialUpload\", void 0);\n    __decorate([\n        Property({})\n    ], Uploader.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], Uploader.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"enabled\", void 0);\n    __decorate([\n        Property(null)\n    ], Uploader.prototype, \"template\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"multiple\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"autoUpload\", void 0);\n    __decorate([\n        Complex({}, ButtonsProps)\n    ], Uploader.prototype, \"buttons\", void 0);\n    __decorate([\n        Property('')\n    ], Uploader.prototype, \"allowedExtensions\", void 0);\n    __decorate([\n        Property(0)\n    ], Uploader.prototype, \"minFileSize\", void 0);\n    __decorate([\n        Property(30000000)\n    ], Uploader.prototype, \"maxFileSize\", void 0);\n    __decorate([\n        Property(null)\n    ], Uploader.prototype, \"dropArea\", void 0);\n    __decorate([\n        Collection([{}], FilesProp)\n    ], Uploader.prototype, \"files\", void 0);\n    __decorate([\n        Property(true)\n    ], Uploader.prototype, \"showFileList\", void 0);\n    __decorate([\n        Property(false)\n    ], Uploader.prototype, \"directoryUpload\", void 0);\n    __decorate([\n        Property('Default')\n    ], Uploader.prototype, \"dropEffect\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"rendering\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"beforeUpload\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"fileListRendering\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"uploading\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"success\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"failure\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"removing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"beforeRemove\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"clearing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"progress\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkSuccess\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkFailure\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"chunkUploading\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"canceling\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"pausing\", void 0);\n    __decorate([\n        Event()\n    ], Uploader.prototype, \"resuming\", void 0);\n    Uploader = __decorate([\n        NotifyPropertyChanges\n    ], Uploader);\n    return Uploader;\n}(Component));\nexport { Uploader };\n"]},"metadata":{},"sourceType":"module"}